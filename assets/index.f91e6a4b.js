import{z as createDirective,A as client,B as noop,C as leftClick,D as addEvt,E as preventDraggable,F as position,G as stopAndPrevent,H as clearSelection,I as cleanEvt,r as ref,c as computed,J as watch,K as nextTick,L as getCurrentInstance,e as h,T as Transition,M as getNormalizedVNodes,N as hSlot,O as KeepAlive,P as vmHasRouter,Q as History,R as onBeforeMount,o as onMounted,b as onBeforeUnmount,S as createComponent,U as useDarkProps,V as useSizeProps,W as useDark,X as useSize,Y as hDir,Z as Ripple,$ as __nuxt_component_0$1,a0 as hMergeSlotSafely,a1 as useTick,a2 as useTimeout,a3 as provide,a4 as tabsKey,a5 as onDeactivated,a6 as onActivated,a7 as QResizeObserver,a8 as inject,a9 as emptyRenderFn,aa as withDirectives,ab as isKeyCode,ac as shouldIgnoreKey,ad as hMergeSlot,ae as isDeepEqual,af as uid,ag as useFieldProps,ah as useFieldEmits,ai as useField,aj as useFieldState,ak as useFormProps,al as useFileProps,am as useFileEmits,an as useFormInputNameAttr,ao as useFile,ap as useFileFormDomProps,aq as fieldValueIsFilled,ar as humanStorageSize,as as injectProp,at as prevent,au as layoutKey,av as pageContainerKey,aw as useAnchorProps,ax as useAnchor,ay as __nuxt_component_8,az as __nuxt_component_6,aA as debounce,aB as onBeforeUpdate,aC as onUpdated,aD as useKeyComposition,aE as stop,aF as normalizeToInterval,aG as __nuxt_component_1$2,aH as __nuxt_component_2,aI as __nuxt_component_3$3,aJ as hUniqueSlot,aK as getScrollTarget,aL as listenOpts,aM as __nuxt_component_6$1,aN as isNumber,aO as isDate,aP as isObject,aQ as injectMultipleProps,aR as QCheckbox,aS as __nuxt_component_8$1,aT as __nuxt_component_2$1,aU as getPortalProxy,aV as closePortals,aW as getVerticalScrollPosition,aX as getHorizontalScrollPosition,m as createBaseVNode,aY as mergeProps,d as defineComponent,k as openBlock,aZ as createBlock,s as withCtx,q as createVNode,a_ as unref,a$ as mdiOpenInNew,l as createElementBlock,b0 as Fragment,b1 as renderList,t as toDisplayString,b2 as createCommentVNode,b3 as __nuxt_component_9$1,b4 as __nuxt_component_8$2,_ as _export_sfc,b5 as j,b6 as defineStore,u as useNuxtApp,b7 as extend,b8 as mdiCheckCircle,b9 as mdiDelete,ba as mdiFolder,bb as withModifiers,bc as mdiAlertCircle,bd as mdiRefresh,be as mdiTextBoxOutline,bf as isRef,bg as mdiClipboardOutline,bh as mdiClose,bi as __nuxt_component_2$2,x as pushScopeId,y as popScopeId,bj as __nuxt_component_1$3,bk as __nuxt_component_3$4,bl as normalizeClass,bm as mdiChevronLeft,bn as mdiChevronRight,v as createTextVNode,bo as __nuxt_component_2$3,bp as mdiChevronDoubleLeft,bq as mdiChevronDoubleRight,br as mdiChevronUp,bs as mdiChevronDown,bt as vShow,bu as useTabs,bv as scroll}from"./entry.267a8a3f.js";const modifiersAll={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},directionList=Object.keys(modifiersAll);modifiersAll.all=!0;function getModifierDirections(e){const i={};for(const r of directionList)e[r]===!0&&(i[r]=!0);return Object.keys(i).length===0?modifiersAll:(i.horizontal===!0?i.left=i.right=!0:i.left===!0&&i.right===!0&&(i.horizontal=!0),i.vertical===!0?i.up=i.down=!0:i.up===!0&&i.down===!0&&(i.vertical=!0),i.horizontal===!0&&i.vertical===!0&&(i.all=!0),i)}const avoidNodeNamesList=["INPUT","TEXTAREA"];function shouldStart(e,i){return i.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof i.handler=="function"&&avoidNodeNamesList.includes(e.target.nodeName.toUpperCase())===!1&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(i.uid)===-1)}function parseArg(e){const i=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((r,o)=>{const t=parseFloat(r);t&&(i[o]=t)}),i}const TouchSwipe=createDirective({name:"touch-swipe",beforeMount(e,{value:i,arg:r,modifiers:o}){if(o.mouse!==!0&&client.has.touch!==!0)return;const t=o.mouseCapture===!0?"Capture":"",n={handler:i,sensitivity:parseArg(r),direction:getModifierDirections(o),noop,mouseStart(l){shouldStart(l,n)&&leftClick(l)&&(addEvt(n,"temp",[[document,"mousemove","move",`notPassive${t}`],[document,"mouseup","end","notPassiveCapture"]]),n.start(l,!0))},touchStart(l){if(shouldStart(l,n)){const a=l.target;addEvt(n,"temp",[[a,"touchmove","move","notPassiveCapture"],[a,"touchcancel","end","notPassiveCapture"],[a,"touchend","end","notPassiveCapture"]]),n.start(l)}},start(l,a){client.is.firefox===!0&&preventDraggable(e,!0);const c=position(l);n.event={x:c.left,y:c.top,time:Date.now(),mouse:a===!0,dir:!1}},move(l){if(n.event===void 0)return;if(n.event.dir!==!1){stopAndPrevent(l);return}const a=Date.now()-n.event.time;if(a===0)return;const c=position(l),u=c.left-n.event.x,s=Math.abs(u),v=c.top-n.event.y,d=Math.abs(v);if(n.event.mouse!==!0){if(s<n.sensitivity[1]&&d<n.sensitivity[1]){n.end(l);return}}else if(window.getSelection().toString()!==""){n.end(l);return}else if(s<n.sensitivity[2]&&d<n.sensitivity[2])return;const g=s/a,m=d/a;n.direction.vertical===!0&&s<d&&s<100&&m>n.sensitivity[0]&&(n.event.dir=v<0?"up":"down"),n.direction.horizontal===!0&&s>d&&d<100&&g>n.sensitivity[0]&&(n.event.dir=u<0?"left":"right"),n.direction.up===!0&&s<d&&v<0&&s<100&&m>n.sensitivity[0]&&(n.event.dir="up"),n.direction.down===!0&&s<d&&v>0&&s<100&&m>n.sensitivity[0]&&(n.event.dir="down"),n.direction.left===!0&&s>d&&u<0&&d<100&&g>n.sensitivity[0]&&(n.event.dir="left"),n.direction.right===!0&&s>d&&u>0&&d<100&&g>n.sensitivity[0]&&(n.event.dir="right"),n.event.dir!==!1?(stopAndPrevent(l),n.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),clearSelection(),n.styleCleanup=f=>{n.styleCleanup=void 0,document.body.classList.remove("non-selectable");const p=()=>{document.body.classList.remove("no-pointer-events--children")};f===!0?setTimeout(p,50):p()}),n.handler({evt:l,touch:n.event.mouse!==!0,mouse:n.event.mouse,direction:n.event.dir,duration:a,distance:{x:s,y:d}})):n.end(l)},end(l){n.event!==void 0&&(cleanEvt(n,"temp"),client.is.firefox===!0&&preventDraggable(e,!1),n.styleCleanup!==void 0&&n.styleCleanup(!0),l!==void 0&&n.event.dir!==!1&&stopAndPrevent(l),n.event=void 0)}};if(e.__qtouchswipe=n,o.mouse===!0){const l=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";addEvt(n,"main",[[e,"mousedown","mouseStart",`passive${l}`]])}client.has.touch===!0&&addEvt(n,"main",[[e,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,i){const r=e.__qtouchswipe;r!==void 0&&(i.oldValue!==i.value&&(typeof i.value!="function"&&r.end(),r.handler=i.value),r.direction=getModifierDirections(i.modifiers))},beforeUnmount(e){const i=e.__qtouchswipe;i!==void 0&&(cleanEvt(i,"main"),cleanEvt(i,"temp"),client.is.firefox===!0&&preventDraggable(e,!1),i.styleCleanup!==void 0&&i.styleCleanup(),delete e.__qtouchswipe)}});function useCache(){const e=new Map;return{getCache:function(i,r){return e[i]===void 0?e[i]=r:e[i]},getCacheWithFn:function(i,r){return e[i]===void 0?e[i]=r():e[i]}}}const usePanelChildProps={name:{required:!0},disable:Boolean},PanelWrapper={setup(e,{slots:i}){return()=>h("div",{class:"q-panel scroll",role:"tabpanel"},hSlot(i.default))}},usePanelProps={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},usePanelEmits=["update:modelValue","beforeTransition","transition"];function usePanel(){const{props:e,emit:i,proxy:r}=getCurrentInstance(),{getCacheWithFn:o}=useCache();let t,n;const l=ref(null),a=ref(null);function c(T){const q=e.vertical===!0?"up":"left";y((r.$q.lang.rtl===!0?-1:1)*(T.direction===q?1:-1))}const u=computed(()=>[[TouchSwipe,c,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),s=computed(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),v=computed(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),d=computed(()=>`--q-transition-duration: ${e.transitionDuration}ms`),g=computed(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),m=computed(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),f=computed(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);watch(()=>e.modelValue,(T,q)=>{const Q=C(T)===!0?I(T):-1;n!==!0&&E(Q===-1?0:Q<I(q)?-1:1),l.value!==Q&&(l.value=Q,i("beforeTransition",T,q),nextTick(()=>{i("transition",T,q)}))});function p(){y(1)}function b(){y(-1)}function k(T){i("update:modelValue",T)}function C(T){return T!=null&&T!==""}function I(T){return t.findIndex(q=>q.props.name===T&&q.props.disable!==""&&q.props.disable!==!0)}function P(){return t.filter(T=>T.props.disable!==""&&T.props.disable!==!0)}function E(T){const q=T!==0&&e.animated===!0&&l.value!==-1?"q-transition--"+(T===-1?s.value:v.value):null;a.value!==q&&(a.value=q)}function y(T,q=l.value){let Q=q+T;for(;Q>-1&&Q<t.length;){const le=t[Q];if(le!==void 0&&le.props.disable!==""&&le.props.disable!==!0){E(T),n=!0,i("update:modelValue",le.props.name),setTimeout(()=>{n=!1});return}Q+=T}e.infinite===!0&&t.length!==0&&q!==-1&&q!==t.length&&y(T,T===-1?t.length:-1)}function B(){const T=I(e.modelValue);return l.value!==T&&(l.value=T),!0}function S(){const T=C(e.modelValue)===!0&&B()&&t[l.value];return e.keepAlive===!0?[h(KeepAlive,m.value,[h(f.value===!0?o(g.value,()=>({...PanelWrapper,name:g.value})):PanelWrapper,{key:g.value,style:d.value},()=>T)])]:[h("div",{class:"q-panel scroll",style:d.value,key:g.value,role:"tabpanel"},[T])]}function V(){if(t.length!==0)return e.animated===!0?[h(Transition,{name:a.value},S)]:S()}function D(T){return t=getNormalizedVNodes(hSlot(T.default,[])).filter(q=>q.props!==null&&q.props.slot===void 0&&C(q.props.name)===!0),t.length}function G(){return t}return Object.assign(r,{next:p,previous:b,goTo:k}),{panelIndex:l,panelDirectives:u,updatePanelsList:D,updatePanelIndex:B,getPanelContent:V,getEnabledPanels:P,getPanels:G,isValidPanelName:C,keepAliveProps:m,needsUniqueKeepAliveWrapper:f,goToPanelByOffset:y,goToPanel:k,nextPanel:p,previousPanel:b}}let counter=0;const useFullscreenProps={fullscreen:Boolean,noRouteFullscreenExit:Boolean},useFullscreenEmits=["update:fullscreen","fullscreen"];function useFullscreen(){const e=getCurrentInstance(),{props:i,emit:r,proxy:o}=e;let t,n,l;const a=ref(!1);vmHasRouter(e)===!0&&watch(()=>o.$route.fullPath,()=>{i.noRouteFullscreenExit!==!0&&s()}),watch(()=>i.fullscreen,v=>{a.value!==v&&c()}),watch(a,v=>{r("update:fullscreen",v),r("fullscreen",v)});function c(){a.value===!0?s():u()}function u(){a.value!==!0&&(a.value=!0,l=o.$el.parentNode,l.replaceChild(n,o.$el),document.body.appendChild(o.$el),counter++,counter===1&&document.body.classList.add("q-body--fullscreen-mixin"),t={handler:s},History.add(t))}function s(){a.value===!0&&(t!==void 0&&(History.remove(t),t=void 0),l.replaceChild(o.$el,n),a.value=!1,counter=Math.max(0,counter-1),counter===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),o.$el.scrollIntoView!==void 0&&setTimeout(()=>{o.$el.scrollIntoView()})))}return onBeforeMount(()=>{n=document.createElement("span")}),onMounted(()=>{i.fullscreen===!0&&u()}),onBeforeUnmount(s),Object.assign(o,{toggleFullscreen:c,setFullscreen:u,exitFullscreen:s}),{inFullscreen:a,toggleFullscreen:c}}const defaultSizes$1={xs:8,sm:10,md:14,lg:20,xl:24},__nuxt_component_4$3=createComponent({name:"QChip",props:{...useDarkProps,...useSizeProps,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:i,emit:r}){const{proxy:{$q:o}}=getCurrentInstance(),t=useDark(e,o),n=useSize(e,defaultSizes$1),l=computed(()=>e.selected===!0||e.icon!==void 0),a=computed(()=>e.selected===!0?e.iconSelected||o.iconSet.chip.selected:e.icon),c=computed(()=>e.iconRemove||o.iconSet.chip.remove),u=computed(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),s=computed(()=>{const p=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(p?` text-${p} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(u.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(t.value===!0?" q-chip--dark q-dark":"")}),v=computed(()=>{const p=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},b={...p,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||o.lang.label.remove};return{chip:p,remove:b}});function d(p){p.keyCode===13&&g(p)}function g(p){e.disable||(r("update:selected",!e.selected),r("click",p))}function m(p){(p.keyCode===void 0||p.keyCode===13)&&(stopAndPrevent(p),e.disable===!1&&(r("update:modelValue",!1),r("remove")))}function f(){const p=[];u.value===!0&&p.push(h("div",{class:"q-focus-helper"})),l.value===!0&&p.push(h(__nuxt_component_0$1,{class:"q-chip__icon q-chip__icon--left",name:a.value}));const b=e.label!==void 0?[h("div",{class:"ellipsis"},[e.label])]:void 0;return p.push(h("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},hMergeSlotSafely(i.default,b))),e.iconRight&&p.push(h(__nuxt_component_0$1,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&p.push(h(__nuxt_component_0$1,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:c.value,...v.value.remove,onClick:m,onKeyup:m})),p}return()=>{if(e.modelValue===!1)return;const p={class:s.value,style:n.value};return u.value===!0&&Object.assign(p,v.value.chip,{onClick:g,onKeyup:d}),hDir("div",p,f(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[Ripple,e.ripple]])}}});function getIndicatorClass(e,i,r){const o=r===!0?["left","right"]:["top","bottom"];return`absolute-${i===!0?o[0]:o[1]}${e?` text-${e}`:""}`}const alignValues=["left","center","right","justify"],__nuxt_component_4$2=createComponent({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>alignValues.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:i,emit:r}){const{proxy:o}=getCurrentInstance(),{$q:t}=o,{registerTick:n}=useTick(),{registerTick:l}=useTick(),{registerTick:a}=useTick(),{registerTimeout:c,removeTimeout:u}=useTimeout(),{registerTimeout:s,removeTimeout:v}=useTimeout(),d=ref(null),g=ref(null),m=ref(e.modelValue),f=ref(!1),p=ref(!0),b=ref(!1),k=ref(!1),C=[],I=ref(0),P=ref(!1);let E=null,y=null,B;const S=computed(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:getIndicatorClass(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),V=computed(()=>{const F=I.value,oe=m.value;for(let he=0;he<F;he++)if(C[he].name.value===oe)return!0;return!1}),D=computed(()=>`q-tabs__content--align-${f.value===!0?"left":k.value===!0?"justify":e.align}`),G=computed(()=>`q-tabs row no-wrap items-center q-tabs--${f.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),T=computed(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+D.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),q=computed(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),Q=computed(()=>e.vertical!==!0&&t.lang.rtl===!0),le=computed(()=>Q.value===!0);watch(Q,K),watch(()=>e.modelValue,F=>{W({name:F,setCurrent:!0,skipEmit:!0})}),watch(()=>e.outsideArrows,$);function W({name:F,setCurrent:oe,skipEmit:he}){m.value!==F&&(he!==!0&&e["onUpdate:modelValue"]!==void 0&&r("update:modelValue",F),(oe===!0||e["onUpdate:modelValue"]===void 0)&&(L(m.value,F),m.value=F))}function $(){n(()=>{O({width:d.value.offsetWidth,height:d.value.offsetHeight})})}function O(F){if(q.value===void 0||g.value===null)return;const oe=F[q.value.container],he=Math.min(g.value[q.value.scroll],Array.prototype.reduce.call(g.value.children,(Pe,Se)=>Pe+(Se[q.value.content]||0),0)),Ie=oe>0&&he>oe;f.value=Ie,Ie===!0&&l(K),k.value=oe<parseInt(e.breakpoint,10)}function L(F,oe){const he=F!=null&&F!==""?C.find(Pe=>Pe.name.value===F):null,Ie=oe!=null&&oe!==""?C.find(Pe=>Pe.name.value===oe):null;if(he&&Ie){const Pe=he.tabIndicatorRef.value,Se=Ie.tabIndicatorRef.value;E!==null&&(clearTimeout(E),E=null),Pe.style.transition="none",Pe.style.transform="none",Se.style.transition="none",Se.style.transform="none";const ge=Pe.getBoundingClientRect(),Le=Se.getBoundingClientRect();Se.style.transform=e.vertical===!0?`translate3d(0,${ge.top-Le.top}px,0) scale3d(1,${Le.height?ge.height/Le.height:1},1)`:`translate3d(${ge.left-Le.left}px,0,0) scale3d(${Le.width?ge.width/Le.width:1},1,1)`,a(()=>{E=setTimeout(()=>{E=null,Se.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",Se.style.transform="none"},70)})}Ie&&f.value===!0&&A(Ie.rootRef.value)}function A(F){const{left:oe,width:he,top:Ie,height:Pe}=g.value.getBoundingClientRect(),Se=F.getBoundingClientRect();let ge=e.vertical===!0?Se.top-Ie:Se.left-oe;if(ge<0){g.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(ge),K();return}ge+=e.vertical===!0?Se.height-Pe:Se.width-he,ge>0&&(g.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(ge),K())}function K(){const F=g.value;if(F===null)return;const oe=F.getBoundingClientRect(),he=e.vertical===!0?F.scrollTop:Math.abs(F.scrollLeft);Q.value===!0?(p.value=Math.ceil(he+oe.width)<F.scrollWidth-1,b.value=he>0):(p.value=he>0,b.value=e.vertical===!0?Math.ceil(he+oe.height)<F.scrollHeight:Math.ceil(he+oe.width)<F.scrollWidth)}function re(F){y!==null&&clearInterval(y),y=setInterval(()=>{U(F)===!0&&ee()},5)}function pe(){re(le.value===!0?Number.MAX_SAFE_INTEGER:0)}function we(){re(le.value===!0?0:Number.MAX_SAFE_INTEGER)}function ee(){y!==null&&(clearInterval(y),y=null)}function H(F,oe){const he=Array.prototype.filter.call(g.value.children,Le=>Le===oe||Le.matches&&Le.matches(".q-tab.q-focusable")===!0),Ie=he.length;if(Ie===0)return;if(F===36)return A(he[0]),he[0].focus(),!0;if(F===35)return A(he[Ie-1]),he[Ie-1].focus(),!0;const Pe=F===(e.vertical===!0?38:37),Se=F===(e.vertical===!0?40:39),ge=Pe===!0?-1:Se===!0?1:void 0;if(ge!==void 0){const Le=Q.value===!0?-1:1,ze=he.indexOf(oe)+ge*Le;return ze>=0&&ze<Ie&&(A(he[ze]),he[ze].focus({preventScroll:!0})),!0}}const be=computed(()=>le.value===!0?{get:F=>Math.abs(F.scrollLeft),set:(F,oe)=>{F.scrollLeft=-oe}}:e.vertical===!0?{get:F=>F.scrollTop,set:(F,oe)=>{F.scrollTop=oe}}:{get:F=>F.scrollLeft,set:(F,oe)=>{F.scrollLeft=oe}});function U(F){const oe=g.value,{get:he,set:Ie}=be.value;let Pe=!1,Se=he(oe);const ge=F<Se?-1:1;return Se+=ge*5,Se<0?(Pe=!0,Se=0):(ge===-1&&Se<=F||ge===1&&Se>=F)&&(Pe=!0,Se=F),Ie(oe,Se),K(),Pe}function Be(F,oe){for(const he in F)if(F[he]!==oe[he])return!1;return!0}function $e(){let F=null,oe={matchedLen:0,queryDiff:9999,hrefLen:0};const he=C.filter(ge=>ge.routeData!==void 0&&ge.routeData.hasRouterLink.value===!0),{hash:Ie,query:Pe}=o.$route,Se=Object.keys(Pe).length;for(const ge of he){const Le=ge.routeData.exact.value===!0;if(ge.routeData[Le===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:ze,query:et,matched:rt,href:tt}=ge.routeData.resolvedLink.value,ft=Object.keys(et).length;if(Le===!0){if(ze!==Ie||ft!==Se||Be(Pe,et)===!1)continue;F=ge.name.value;break}if(ze!==""&&ze!==Ie||ft!==0&&Be(et,Pe)===!1)continue;const R={matchedLen:rt.length,queryDiff:Se-ft,hrefLen:tt.length-ze.length};if(R.matchedLen>oe.matchedLen){F=ge.name.value,oe=R;continue}else if(R.matchedLen!==oe.matchedLen)continue;if(R.queryDiff<oe.queryDiff)F=ge.name.value,oe=R;else if(R.queryDiff!==oe.queryDiff)continue;R.hrefLen>oe.hrefLen&&(F=ge.name.value,oe=R)}F===null&&C.some(ge=>ge.routeData===void 0&&ge.name.value===m.value)===!0||W({name:F,setCurrent:!0})}function He(F){if(u(),P.value!==!0&&d.value!==null&&F.target&&typeof F.target.closest=="function"){const oe=F.target.closest(".q-tab");oe&&d.value.contains(oe)===!0&&(P.value=!0,f.value===!0&&A(oe))}}function Ae(){c(()=>{P.value=!1},30)}function Fe(){Je.avoidRouteWatcher===!1?s($e):v()}function Ne(){if(B===void 0){const F=watch(()=>o.$route.fullPath,Fe);B=()=>{F(),B=void 0}}}function nt(F){C.push(F),I.value++,$(),F.routeData===void 0||o.$route===void 0?s(()=>{if(f.value===!0){const oe=m.value,he=oe!=null&&oe!==""?C.find(Ie=>Ie.name.value===oe):null;he&&A(he.rootRef.value)}}):(Ne(),F.routeData.hasRouterLink.value===!0&&Fe())}function dt(F){C.splice(C.indexOf(F),1),I.value--,$(),B!==void 0&&F.routeData!==void 0&&(C.every(oe=>oe.routeData===void 0)===!0&&B(),Fe())}const Je={currentModel:m,tabProps:S,hasFocus:P,hasActiveTab:V,registerTab:nt,unregisterTab:dt,verifyRouteModel:Fe,updateModel:W,onKbdNavigate:H,avoidRouteWatcher:!1};provide(tabsKey,Je);function je(){E!==null&&clearTimeout(E),ee(),B!==void 0&&B()}let Ve;return onBeforeUnmount(je),onDeactivated(()=>{Ve=B!==void 0,je()}),onActivated(()=>{Ve===!0&&Ne(),$()}),()=>h("div",{ref:d,class:G.value,role:"tablist",onFocusin:He,onFocusout:Ae},[h(QResizeObserver,{onResize:O}),h("div",{ref:g,class:T.value,onScroll:K},hSlot(i.default)),h(__nuxt_component_0$1,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(p.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||t.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:pe,onTouchstartPassive:pe,onMouseupPassive:ee,onMouseleavePassive:ee,onTouchendPassive:ee}),h(__nuxt_component_0$1,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(b.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||t.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:we,onTouchstartPassive:we,onMouseupPassive:ee,onMouseleavePassive:ee,onTouchendPassive:ee})])}});let id$2=0;const useTabEmits=["click","keydown"],useTabProps={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${id$2++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function useTab(e,i,r,o){const t=inject(tabsKey,emptyRenderFn);if(t===emptyRenderFn)return console.error("QTab/QRouteTab component needs to be child of QTabs"),emptyRenderFn;const{proxy:n}=getCurrentInstance(),l=ref(null),a=ref(null),c=ref(null),u=computed(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),s=computed(()=>t.currentModel.value===e.name),v=computed(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(s.value===!0?" q-tab--active"+(t.tabProps.value.activeClass?" "+t.tabProps.value.activeClass:"")+(t.tabProps.value.activeColor?` text-${t.tabProps.value.activeColor}`:"")+(t.tabProps.value.activeBgColor?` bg-${t.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&t.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||t.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(o!==void 0?o.linkClass.value:"")),d=computed(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(t.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),g=computed(()=>e.disable===!0||t.hasFocus.value===!0||s.value===!1&&t.hasActiveTab.value===!0?-1:e.tabindex||0);function m(C,I){if(I!==!0&&l.value!==null&&l.value.focus(),e.disable===!0){o!==void 0&&o.hasRouterLink.value===!0&&stopAndPrevent(C);return}if(o===void 0){t.updateModel({name:e.name}),r("click",C);return}if(o.hasRouterLink.value===!0){const P=(E={})=>{let y;const B=E.to===void 0||isDeepEqual(E.to,e.to)===!0?t.avoidRouteWatcher=uid():null;return o.navigateToRouterLink(C,{...E,returnRouterError:!0}).catch(S=>{y=S}).then(S=>{if(B===t.avoidRouteWatcher&&(t.avoidRouteWatcher=!1,y===void 0&&(S===void 0||S.message.startsWith("Avoided redundant navigation")===!0)&&t.updateModel({name:e.name})),E.returnRouterError===!0)return y!==void 0?Promise.reject(y):S})};r("click",C,P),C.defaultPrevented!==!0&&P();return}r("click",C)}function f(C){isKeyCode(C,[13,32])?m(C,!0):shouldIgnoreKey(C)!==!0&&C.keyCode>=35&&C.keyCode<=40&&C.altKey!==!0&&C.metaKey!==!0&&t.onKbdNavigate(C.keyCode,n.$el)===!0&&stopAndPrevent(C),r("keydown",C)}function p(){const C=t.tabProps.value.narrowIndicator,I=[],P=h("div",{ref:c,class:["q-tab__indicator",t.tabProps.value.indicatorClass]});e.icon!==void 0&&I.push(h(__nuxt_component_0$1,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&I.push(h("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&I.push(e.alertIcon!==void 0?h(__nuxt_component_0$1,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):h("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),C===!0&&I.push(P);const E=[h("div",{class:"q-focus-helper",tabindex:-1,ref:l}),h("div",{class:d.value},hMergeSlot(i.default,I))];return C===!1&&E.push(P),E}const b={name:computed(()=>e.name),rootRef:a,tabIndicatorRef:c,routeData:o};onBeforeUnmount(()=>{t.unregisterTab(b)}),onMounted(()=>{t.registerTab(b)});function k(C,I){const P={ref:a,class:v.value,tabindex:g.value,role:"tab","aria-selected":s.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:m,onKeydown:f,...I};return withDirectives(h(C,P,p()),[[Ripple,u.value]])}return{renderTab:k,$tabs:t}}const __nuxt_component_3$2=createComponent({name:"QTab",props:useTabProps,emits:useTabEmits,setup(e,{slots:i,emit:r}){const{renderTab:o}=useTab(e,i,r);return()=>o("div")}}),__nuxt_component_7$1=createComponent({name:"QTabPanels",props:{...usePanelProps,...useDarkProps},emits:usePanelEmits,setup(e,{slots:i}){const r=getCurrentInstance(),o=useDark(e,r.proxy.$q),{updatePanelsList:t,getPanelContent:n,panelDirectives:l}=usePanel(),a=computed(()=>"q-tab-panels q-panel-parent"+(o.value===!0?" q-tab-panels--dark q-dark":""));return()=>(t(i),hDir("div",{class:a.value},n(),"pan",e.swipeable,()=>l.value))}}),__nuxt_component_3$1=createComponent({name:"QTabPanel",props:usePanelChildProps,setup(e,{slots:i}){return()=>h("div",{class:"q-tab-panel",role:"tabpanel"},hSlot(i.default))}}),QField=createComponent({name:"QField",inheritAttrs:!1,props:useFieldProps,emits:useFieldEmits,setup(){return useField(useFieldState())}}),QFile=createComponent({name:"QFile",inheritAttrs:!1,props:{...useFieldProps,...useFormProps,...useFileProps,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...useFieldEmits,...useFileEmits],setup(e,{slots:i,emit:r,attrs:o}){const{proxy:t}=getCurrentInstance(),n=useFieldState(),l=ref(null),a=ref(!1),c=useFormInputNameAttr(e),{pickFiles:u,onDragover:s,onDragleave:v,processFiles:d,getDndNode:g}=useFile({editable:n.editable,dnd:a,getFileInput:G,addFilesToQueue:T}),m=useFileFormDomProps(e),f=computed(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),p=computed(()=>fieldValueIsFilled(f.value)),b=computed(()=>f.value.map(W=>W.name).join(", ")),k=computed(()=>humanStorageSize(f.value.reduce((W,$)=>W+$.size,0))),C=computed(()=>({totalSize:k.value,filesNumber:f.value.length,maxFiles:e.maxFiles})),I=computed(()=>({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:c.value,...o,id:n.targetUid.value,disabled:n.editable.value!==!0})),P=computed(()=>"q-file q-field--auto-height"+(a.value===!0?" q-file--dnd":"")),E=computed(()=>e.multiple===!0&&e.append===!0);function y(W){const $=f.value.slice();$.splice(W,1),S($)}function B(W){const $=f.value.indexOf(W);$>-1&&y($)}function S(W){r("update:modelValue",e.multiple===!0?W:W[0])}function V(W){W.keyCode===13&&prevent(W)}function D(W){(W.keyCode===13||W.keyCode===32)&&u(W)}function G(){return l.value}function T(W,$){const O=d(W,$,f.value,E.value),L=G();L!=null&&(L.value=""),O!==void 0&&((e.multiple===!0?e.modelValue&&O.every(A=>f.value.includes(A)):e.modelValue===O[0])||S(E.value===!0?f.value.concat(O):O))}function q(){return[h("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function Q(){if(i.file!==void 0)return f.value.length===0?q():f.value.map(($,O)=>i.file({index:O,file:$,ref:this}));if(i.selected!==void 0)return f.value.length===0?q():i.selected({files:f.value,ref:this});if(e.useChips===!0)return f.value.length===0?q():f.value.map(($,O)=>h(__nuxt_component_4$3,{key:"file-"+O,removable:n.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{y(O)}},()=>h("span",{class:"ellipsis",textContent:$.name})));const W=e.displayValue!==void 0?e.displayValue:b.value;return W.length!==0?[h("div",{class:e.inputClass,style:e.inputStyle,textContent:W})]:q()}function le(){const W={ref:l,...I.value,...m.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:T};return e.multiple===!0&&(W.multiple=!0),h("input",W)}return Object.assign(n,{fieldClass:P,emitValue:S,hasValue:p,inputRef:l,innerValue:f,floatingLabel:computed(()=>p.value===!0||fieldValueIsFilled(e.displayValue)),computedCounter:computed(()=>{if(e.counterLabel!==void 0)return e.counterLabel(C.value);const W=e.maxFiles;return`${f.value.length}${W!==void 0?" / "+W:""} (${k.value})`}),getControlChild:()=>g("file"),getControl:()=>{const W={ref:n.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return n.editable.value===!0&&Object.assign(W,{onDragover:s,onDragleave:v,onKeydown:V,onKeyup:D}),h("div",W,[le()].concat(Q()))}}),Object.assign(t,{removeAtIndex:y,removeFile:B,getNativeElement:()=>l.value}),injectProp(t,"nativeEl",()=>l.value),useField(n)}}),defaultSizes={xs:2,sm:4,md:6,lg:10,xl:14};function width(e,i,r){return{transform:i===!0?`translateX(${r.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}const QLinearProgress=createComponent({name:"QLinearProgress",props:{...useDarkProps,...useSizeProps,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:i}){const{proxy:r}=getCurrentInstance(),o=useDark(e,r.$q),t=useSize(e,defaultSizes),n=computed(()=>e.indeterminate===!0||e.query===!0),l=computed(()=>e.reverse!==e.query),a=computed(()=>({...t.value!==null?t.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),c=computed(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),u=computed(()=>width(e.buffer!==void 0?e.buffer:1,l.value,r.$q)),s=computed(()=>`with${e.instantFeedback===!0?"out":""}-transition`),v=computed(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${s.value} q-linear-progress__track--${o.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),d=computed(()=>width(n.value===!0?1:e.value,l.value,r.$q)),g=computed(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${s.value} q-linear-progress__model--${n.value===!0?"in":""}determinate`),m=computed(()=>({width:`${e.value*100}%`})),f=computed(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${s.value}`);return()=>{const p=[h("div",{class:v.value,style:u.value}),h("div",{class:g.value,style:d.value})];return e.stripe===!0&&n.value===!1&&p.push(h("div",{class:f.value,style:m.value})),h("div",{class:c.value,style:a.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},hMergeSlot(i.default,p))}}}),separatorValues=["horizontal","vertical","cell","none"],__nuxt_component_4$1=createComponent({name:"QMarkupTable",props:{...useDarkProps,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:e=>separatorValues.includes(e)}},setup(e,{slots:i}){const r=getCurrentInstance(),o=useDark(e,r.proxy.$q),t=computed(()=>`q-markup-table q-table__container q-table__card q-table--${e.separator}-separator`+(o.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(e.dense===!0?" q-table--dense":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")+(e.square===!0?" q-table--square":"")+(e.wrapCells===!1?" q-table--no-wrap":""));return()=>h("div",{class:t.value},[h("table",{class:"q-table"},hSlot(i.default))])}}),__nuxt_component_10=createComponent({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:i}){const{proxy:{$q:r}}=getCurrentInstance(),o=inject(layoutKey,emptyRenderFn);if(o===emptyRenderFn)return console.error("QPage needs to be a deep child of QLayout"),emptyRenderFn;if(inject(pageContainerKey,emptyRenderFn)===emptyRenderFn)return console.error("QPage needs to be child of QPageContainer"),emptyRenderFn;const n=computed(()=>{const a=(o.header.space===!0?o.header.size:0)+(o.footer.space===!0?o.footer.size:0);if(typeof e.styleFn=="function"){const c=o.isContainer.value===!0?o.containerHeight.value:r.screen.height;return e.styleFn(a,c)}return{minHeight:o.isContainer.value===!0?o.containerHeight.value-a+"px":r.screen.height===0?a!==0?`calc(100vh - ${a}px)`:"100vh":r.screen.height-a+"px"}}),l=computed(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>h("main",{class:l.value,style:n.value},hSlot(i.default))}}),usePageStickyProps={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},expand:Boolean};function usePageSticky(){const{props:e,proxy:{$q:i}}=getCurrentInstance(),r=inject(layoutKey,emptyRenderFn);if(r===emptyRenderFn)return console.error("QPageSticky needs to be child of QLayout"),emptyRenderFn;const o=computed(()=>{const v=e.position;return{top:v.indexOf("top")>-1,right:v.indexOf("right")>-1,bottom:v.indexOf("bottom")>-1,left:v.indexOf("left")>-1,vertical:v==="top"||v==="bottom",horizontal:v==="left"||v==="right"}}),t=computed(()=>r.header.offset),n=computed(()=>r.right.offset),l=computed(()=>r.footer.offset),a=computed(()=>r.left.offset),c=computed(()=>{let v=0,d=0;const g=o.value,m=i.lang.rtl===!0?-1:1;g.top===!0&&t.value!==0?d=`${t.value}px`:g.bottom===!0&&l.value!==0&&(d=`${-l.value}px`),g.left===!0&&a.value!==0?v=`${m*a.value}px`:g.right===!0&&n.value!==0&&(v=`${-m*n.value}px`);const f={transform:`translate(${v}, ${d})`};return e.offset&&(f.margin=`${e.offset[1]}px ${e.offset[0]}px`),g.vertical===!0?(a.value!==0&&(f[i.lang.rtl===!0?"right":"left"]=`${a.value}px`),n.value!==0&&(f[i.lang.rtl===!0?"left":"right"]=`${n.value}px`)):g.horizontal===!0&&(t.value!==0&&(f.top=`${t.value}px`),l.value!==0&&(f.bottom=`${l.value}px`)),f}),u=computed(()=>`q-page-sticky row flex-center fixed-${e.position} q-page-sticky--${e.expand===!0?"expand":"shrink"}`);function s(v){const d=hSlot(v.default);return h("div",{class:u.value,style:c.value},e.expand===!0?d:[h("div",d)])}return{$layout:r,getStickyContent:s}}const __nuxt_component_9=createComponent({name:"QPageSticky",props:usePageStickyProps,setup(e,{slots:i}){const{getStickyContent:r}=usePageSticky();return()=>r(i)}}),__nuxt_component_4=createComponent({name:"QPopupProxy",props:{...useAnchorProps,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:i,emit:r,attrs:o}){const{proxy:t}=getCurrentInstance(),{$q:n}=t,l=ref(!1),a=ref(null),c=computed(()=>parseInt(e.breakpoint,10)),{canShow:u}=useAnchor({showing:l});function s(){return n.screen.width<c.value||n.screen.height<c.value?"dialog":"menu"}const v=ref(s()),d=computed(()=>v.value==="menu"?{maxHeight:"99vh"}:{});watch(()=>s(),f=>{l.value!==!0&&(v.value=f)});function g(f){l.value=!0,r("show",f)}function m(f){l.value=!1,v.value=s(),r("hide",f)}return Object.assign(t,{show(f){u(f)===!0&&a.value.show(f)},hide(f){a.value.hide(f)},toggle(f){a.value.toggle(f)}}),injectProp(t,"currentComponent",()=>({type:v.value,ref:a.value})),()=>{const f={ref:a,...d.value,...o,onShow:g,onHide:m};let p;return v.value==="dialog"?p=__nuxt_component_8:(p=__nuxt_component_6,Object.assign(f,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),h(p,f,i.default)}}}),aggBucketSize=1e3,scrollToEdges=["start","center","end","start-force","center-force","end-force"],filterProto=Array.prototype.filter;function sumFn(e,i){return e+i}function getScrollDetails(e,i,r,o,t,n,l,a){const c=e===window?document.scrollingElement||document.documentElement:e,u=t===!0?"offsetWidth":"offsetHeight",s={scrollStart:0,scrollViewSize:-l-a,scrollMaxSize:0,offsetStart:-l,offsetEnd:-a};if(t===!0?(e===window?(s.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,s.scrollViewSize+=document.documentElement.clientWidth):(s.scrollStart=c.scrollLeft,s.scrollViewSize+=c.clientWidth),s.scrollMaxSize=c.scrollWidth,n===!0&&(s.scrollStart=0-s.scrollStart)):(e===window?(s.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,s.scrollViewSize+=document.documentElement.clientHeight):(s.scrollStart=c.scrollTop,s.scrollViewSize+=c.clientHeight),s.scrollMaxSize=c.scrollHeight),r!==null)for(let v=r.previousElementSibling;v!==null;v=v.previousElementSibling)v.classList.contains("q-virtual-scroll--skip")===!1&&(s.offsetStart+=v[u]);if(o!==null)for(let v=o.nextElementSibling;v!==null;v=v.nextElementSibling)v.classList.contains("q-virtual-scroll--skip")===!1&&(s.offsetEnd+=v[u]);if(i!==e){const v=c.getBoundingClientRect(),d=i.getBoundingClientRect();t===!0?(s.offsetStart+=d.left-v.left,s.offsetEnd-=d.width):(s.offsetStart+=d.top-v.top,s.offsetEnd-=d.height),e!==window&&(s.offsetStart+=s.scrollStart),s.offsetEnd+=s.scrollMaxSize-s.offsetStart}return s}function setScroll(e,i,r,o){i==="end"&&(i=(e===window?document.body:e)[r===!0?"scrollWidth":"scrollHeight"]),e===window?r===!0?(o===!0&&(i=0-i),window.scrollTo(i,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,i):r===!0?(o===!0&&(i=0-i),e.scrollLeft=i):e.scrollTop=i}function sumSize(e,i,r,o){if(r>=o)return 0;const t=i.length,n=Math.floor(r/aggBucketSize),l=Math.floor((o-1)/aggBucketSize)+1;let a=e.slice(n,l).reduce(sumFn,0);return r%aggBucketSize!==0&&(a-=i.slice(n*aggBucketSize,r).reduce(sumFn,0)),o%aggBucketSize!==0&&o!==t&&(a-=i.slice(o,l*aggBucketSize).reduce(sumFn,0)),a}const commonVirtScrollProps={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},commonVirtPropsList=Object.keys(commonVirtScrollProps),useVirtualScrollProps={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...commonVirtScrollProps};function useVirtualScroll({virtualScrollLength:e,getVirtualScrollTarget:i,getVirtualScrollEl:r,virtualScrollItemSizeComputed:o}){const t=getCurrentInstance(),{props:n,emit:l,proxy:a}=t,{$q:c}=a;let u,s,v,d=[],g;const m=ref(0),f=ref(0),p=ref({}),b=ref(null),k=ref(null),C=ref(null),I=ref({from:0,to:0}),P=computed(()=>n.tableColspan!==void 0?n.tableColspan:100);o===void 0&&(o=computed(()=>n.virtualScrollItemSize));const E=computed(()=>o.value+";"+n.virtualScrollHorizontal),y=computed(()=>E.value+";"+n.virtualScrollSliceRatioBefore+";"+n.virtualScrollSliceRatioAfter);watch(y,()=>{le()}),watch(E,B);function B(){Q(s,!0)}function S(A){Q(A===void 0?s:A)}function V(A,K){const re=i();if(re==null||re.nodeType===8)return;const pe=getScrollDetails(re,r(),b.value,k.value,n.virtualScrollHorizontal,c.lang.rtl,n.virtualScrollStickySizeStart,n.virtualScrollStickySizeEnd);v!==pe.scrollViewSize&&le(pe.scrollViewSize),G(re,pe,Math.min(e.value-1,Math.max(0,parseInt(A,10)||0)),0,scrollToEdges.indexOf(K)>-1?K:s>-1&&A>s?"end":"start")}function D(){const A=i();if(A==null||A.nodeType===8)return;const K=getScrollDetails(A,r(),b.value,k.value,n.virtualScrollHorizontal,c.lang.rtl,n.virtualScrollStickySizeStart,n.virtualScrollStickySizeEnd),re=e.value-1,pe=K.scrollMaxSize-K.offsetStart-K.offsetEnd-f.value;if(u===K.scrollStart)return;if(K.scrollMaxSize<=0){G(A,K,0,0);return}v!==K.scrollViewSize&&le(K.scrollViewSize),T(I.value.from);const we=Math.floor(K.scrollMaxSize-Math.max(K.scrollViewSize,K.offsetEnd)-Math.min(g[re],K.scrollViewSize/2));if(we>0&&Math.ceil(K.scrollStart)>=we){G(A,K,re,K.scrollMaxSize-K.offsetEnd-d.reduce(sumFn,0));return}let ee=0,H=K.scrollStart-K.offsetStart,be=H;if(H<=pe&&H+K.scrollViewSize>=m.value)H-=m.value,ee=I.value.from,be=H;else for(let U=0;H>=d[U]&&ee<re;U++)H-=d[U],ee+=aggBucketSize;for(;H>0&&ee<re;)H-=g[ee],H>-K.scrollViewSize?(ee++,be=H):be=g[ee]+H;G(A,K,ee,be)}function G(A,K,re,pe,we){const ee=typeof we=="string"&&we.indexOf("-force")>-1,H=ee===!0?we.replace("-force",""):we,be=H!==void 0?H:"start";let U=Math.max(0,re-p.value[be]),Be=U+p.value.total;Be>e.value&&(Be=e.value,U=Math.max(0,Be-p.value.total)),u=K.scrollStart;const $e=U!==I.value.from||Be!==I.value.to;if($e===!1&&H===void 0){$(re);return}const{activeElement:He}=document,Ae=C.value;$e===!0&&Ae!==null&&Ae!==He&&Ae.contains(He)===!0&&(Ae.addEventListener("focusout",q),setTimeout(()=>{Ae!==null&&Ae.removeEventListener("focusout",q)}));const Fe=H!==void 0?g.slice(U,re).reduce(sumFn,0):0;if($e===!0){const Ne=Be>=I.value.from&&U<=I.value.to?I.value.to:Be;I.value={from:U,to:Ne},m.value=sumSize(d,g,0,U),f.value=sumSize(d,g,Be,e.value),requestAnimationFrame(()=>{I.value.to!==Be&&u===K.scrollStart&&(I.value={from:I.value.from,to:Be},f.value=sumSize(d,g,Be,e.value))})}requestAnimationFrame(()=>{if(u!==K.scrollStart)return;$e===!0&&T(U);const Ne=g.slice(U,re).reduce(sumFn,0),nt=Ne+K.offsetStart+m.value,dt=nt+g[re];let Je=nt+pe;if(H!==void 0){const je=Ne-Fe,Ve=K.scrollStart+je;Je=ee!==!0&&Ve<nt&&dt<Ve+K.scrollViewSize?Ve:H==="end"?dt-K.scrollViewSize:nt-(H==="start"?0:Math.round((K.scrollViewSize-g[re])/2))}u=Je,setScroll(A,Je,n.virtualScrollHorizontal,c.lang.rtl),$(re)})}function T(A){const K=C.value;if(K){const re=filterProto.call(K.children,U=>U.classList&&U.classList.contains("q-virtual-scroll--skip")===!1),pe=re.length,we=n.virtualScrollHorizontal===!0?U=>U.getBoundingClientRect().width:U=>U.offsetHeight;let ee=A,H,be;for(let U=0;U<pe;){for(H=we(re[U]),U++;U<pe&&re[U].classList.contains("q-virtual-scroll--with-prev")===!0;)H+=we(re[U]),U++;be=H-g[ee],be!==0&&(g[ee]+=be,d[Math.floor(ee/aggBucketSize)]+=be),ee++}}}function q(){C.value!==null&&C.value!==void 0&&C.value.focus()}function Q(A,K){const re=1*o.value;(K===!0||Array.isArray(g)===!1)&&(g=[]);const pe=g.length;g.length=e.value;for(let ee=e.value-1;ee>=pe;ee--)g[ee]=re;const we=Math.floor((e.value-1)/aggBucketSize);d=[];for(let ee=0;ee<=we;ee++){let H=0;const be=Math.min((ee+1)*aggBucketSize,e.value);for(let U=ee*aggBucketSize;U<be;U++)H+=g[U];d.push(H)}s=-1,u=void 0,m.value=sumSize(d,g,0,I.value.from),f.value=sumSize(d,g,I.value.to,e.value),A>=0?(T(I.value.from),nextTick(()=>{V(A)})):O()}function le(A){if(A===void 0&&typeof window<"u"){const H=i();H!=null&&H.nodeType!==8&&(A=getScrollDetails(H,r(),b.value,k.value,n.virtualScrollHorizontal,c.lang.rtl,n.virtualScrollStickySizeStart,n.virtualScrollStickySizeEnd).scrollViewSize)}v=A;const K=parseFloat(n.virtualScrollSliceRatioBefore)||0,re=parseFloat(n.virtualScrollSliceRatioAfter)||0,pe=1+K+re,we=A===void 0||A<=0?1:Math.ceil(A/o.value),ee=Math.max(1,we,Math.ceil((n.virtualScrollSliceSize>0?n.virtualScrollSliceSize:10)/pe));p.value={total:Math.ceil(ee*pe),start:Math.ceil(ee*K),center:Math.ceil(ee*(.5+K)),end:Math.ceil(ee*(1+K)),view:we}}function W(A,K){const re=n.virtualScrollHorizontal===!0?"width":"height",pe={["--q-virtual-scroll-item-"+re]:o.value+"px"};return[A==="tbody"?h(A,{class:"q-virtual-scroll__padding",key:"before",ref:b},[h("tr",[h("td",{style:{[re]:`${m.value}px`,...pe},colspan:P.value})])]):h(A,{class:"q-virtual-scroll__padding",key:"before",ref:b,style:{[re]:`${m.value}px`,...pe}}),h(A,{class:"q-virtual-scroll__content",key:"content",ref:C,tabindex:-1},K.flat()),A==="tbody"?h(A,{class:"q-virtual-scroll__padding",key:"after",ref:k},[h("tr",[h("td",{style:{[re]:`${f.value}px`,...pe},colspan:P.value})])]):h(A,{class:"q-virtual-scroll__padding",key:"after",ref:k,style:{[re]:`${f.value}px`,...pe}})]}function $(A){s!==A&&(n.onVirtualScroll!==void 0&&l("virtualScroll",{index:A,from:I.value.from,to:I.value.to-1,direction:A<s?"decrease":"increase",ref:a}),s=A)}le();const O=debounce(D,c.platform.is.ios===!0?120:35);onBeforeMount(()=>{le()});let L=!1;return onDeactivated(()=>{L=!0}),onActivated(()=>{if(L!==!0)return;const A=i();u!==void 0&&A!==void 0&&A!==null&&A.nodeType!==8?setScroll(A,u,n.virtualScrollHorizontal,c.lang.rtl):V(s)}),Object.assign(a,{scrollTo:V,reset:B,refresh:S}),{virtualScrollSliceRange:I,virtualScrollSliceSizeComputed:p,setVirtualScrollSize:le,onVirtualScrollEvt:O,localResetVirtualScroll:Q,padVirtualScroll:W,scrollTo:V,reset:B,refresh:S}}const validateNewValueMode=e=>["add","add-unique","toggle"].includes(e),reEscapeList=".*+?^${}()|[]\\",fieldPropsList=Object.keys(useFieldProps),QSelect=createComponent({name:"QSelect",inheritAttrs:!1,props:{...useVirtualScrollProps,...useFormProps,...useFieldProps,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:validateNewValueMode},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...useFieldEmits,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:i,emit:r}){const{proxy:o}=getCurrentInstance(),{$q:t}=o,n=ref(!1),l=ref(!1),a=ref(-1),c=ref(""),u=ref(!1),s=ref(!1);let v=null,d,g,m,f=null,p,b,k,C;const I=ref(null),P=ref(null),E=ref(null),y=ref(null),B=ref(null),S=useFormInputNameAttr(e),V=useKeyComposition(x),D=computed(()=>Array.isArray(e.options)?e.options.length:0),G=computed(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:T,virtualScrollSliceSizeComputed:q,localResetVirtualScroll:Q,padVirtualScroll:le,onVirtualScrollEvt:W,scrollTo:$,setVirtualScrollSize:O}=useVirtualScroll({virtualScrollLength:D,getVirtualScrollTarget:Z,getVirtualScrollEl:te,virtualScrollItemSizeComputed:G}),L=useFieldState(),A=computed(()=>{const w=e.mapOptions===!0&&e.multiple!==!0,X=e.modelValue!==void 0&&(e.modelValue!==null||w===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const J=e.mapOptions===!0&&d!==void 0?d:[],ue=X.map(Te=>tt(Te,J));return e.modelValue===null&&w===!0?ue.filter(Te=>Te!==null):ue}return X}),K=computed(()=>{const w={};return fieldPropsList.forEach(X=>{const J=e[X];J!==void 0&&(w[X]=J)}),w}),re=computed(()=>e.optionsDark===null?L.isDark.value:e.optionsDark),pe=computed(()=>fieldValueIsFilled(A.value)),we=computed(()=>{let w="q-field__input q-placeholder col";return e.hideSelected===!0||A.value.length===0?[w,e.inputClass]:(w+=" q-field__input--padding",e.inputClass===void 0?w:[w,e.inputClass])}),ee=computed(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),H=computed(()=>D.value===0),be=computed(()=>A.value.map(w=>F.value(w)).join(", ")),U=computed(()=>e.displayValue!==void 0?e.displayValue:be.value),Be=computed(()=>e.optionsHtml===!0?()=>!0:w=>w!=null&&w.html===!0),$e=computed(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||A.value.some(Be.value))),He=computed(()=>L.focused.value===!0?e.tabindex:-1),Ae=computed(()=>{const w={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":n.value===!0?"true":"false","aria-controls":`${L.targetUid.value}_lb`};return a.value>=0&&(w["aria-activedescendant"]=`${L.targetUid.value}_${a.value}`),w}),Fe=computed(()=>({id:`${L.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),Ne=computed(()=>A.value.map((w,X)=>({index:X,opt:w,html:Be.value(w),selected:!0,removeAtIndex:ge,toggleOption:ze,tabindex:He.value}))),nt=computed(()=>{if(D.value===0)return[];const{from:w,to:X}=T.value;return e.options.slice(w,X).map((J,ue)=>{const Te=oe.value(J)===!0,xe=w+ue,Ee={clickable:!0,active:!1,activeClass:je.value,manualFocus:!0,focused:!1,disable:Te,tabindex:-1,dense:e.optionsDense,dark:re.value,role:"option",id:`${L.targetUid.value}_${xe}`,onClick:()=>{ze(J)}};return Te!==!0&&(R(J)===!0&&(Ee.active=!0),a.value===xe&&(Ee.focused=!0),Ee["aria-selected"]=Ee.active===!0?"true":"false",t.platform.is.desktop===!0&&(Ee.onMousemove=()=>{n.value===!0&&et(xe)})),{index:xe,opt:J,html:Be.value(J),label:F.value(J),selected:Ee.active,focused:Ee.focused,toggleOption:ze,setOptionIndex:et,itemProps:Ee}})}),dt=computed(()=>e.dropdownIcon!==void 0?e.dropdownIcon:t.iconSet.arrow.dropdown),Je=computed(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),je=computed(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),Ve=computed(()=>ft(e.optionValue,"value")),F=computed(()=>ft(e.optionLabel,"label")),oe=computed(()=>ft(e.optionDisable,"disable")),he=computed(()=>A.value.map(w=>Ve.value(w))),Ie=computed(()=>{const w={onInput:x,onChange:V,onKeydown:se,onKeyup:ke,onKeypress:Y,onFocus:z,onClick(X){g===!0&&stop(X)}};return w.onCompositionstart=w.onCompositionupdate=w.onCompositionend=V,w});watch(A,w=>{d=w,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&L.innerLoading.value!==!0&&(l.value!==!0&&n.value!==!0||pe.value!==!0)&&(m!==!0&&Qe(),(l.value===!0||n.value===!0)&&ne(""))},{immediate:!0}),watch(()=>e.fillInput,Qe),watch(n,it),watch(D,Ue);function Pe(w){return e.emitValue===!0?Ve.value(w):w}function Se(w){if(w>-1&&w<A.value.length)if(e.multiple===!0){const X=e.modelValue.slice();r("remove",{index:w,value:X.splice(w,1)[0]}),r("update:modelValue",X)}else r("update:modelValue",null)}function ge(w){Se(w),L.focus()}function Le(w,X){const J=Pe(w);if(e.multiple!==!0){e.fillInput===!0&&ae(F.value(w),!0,!0),r("update:modelValue",J);return}if(A.value.length===0){r("add",{index:0,value:J}),r("update:modelValue",e.multiple===!0?[J]:J);return}if(X===!0&&R(w)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const ue=e.modelValue.slice();r("add",{index:ue.length,value:J}),ue.push(J),r("update:modelValue",ue)}function ze(w,X){if(L.editable.value!==!0||w===void 0||oe.value(w)===!0)return;const J=Ve.value(w);if(e.multiple!==!0){X!==!0&&(ae(e.fillInput===!0?F.value(w):"",!0,!0),Ge()),P.value!==null&&P.value.focus(),(A.value.length===0||isDeepEqual(Ve.value(A.value[0]),J)!==!0)&&r("update:modelValue",e.emitValue===!0?J:w);return}if((g!==!0||u.value===!0)&&L.focus(),z(),A.value.length===0){const xe=e.emitValue===!0?J:w;r("add",{index:0,value:xe}),r("update:modelValue",e.multiple===!0?[xe]:xe);return}const ue=e.modelValue.slice(),Te=he.value.findIndex(xe=>isDeepEqual(xe,J));if(Te>-1)r("remove",{index:Te,value:ue.splice(Te,1)[0]});else{if(e.maxValues!==void 0&&ue.length>=e.maxValues)return;const xe=e.emitValue===!0?J:w;r("add",{index:ue.length,value:xe}),ue.push(xe)}r("update:modelValue",ue)}function et(w){if(t.platform.is.desktop!==!0)return;const X=w>-1&&w<D.value?w:-1;a.value!==X&&(a.value=X)}function rt(w=1,X){if(n.value===!0){let J=a.value;do J=normalizeToInterval(J+w,-1,D.value-1);while(J!==-1&&J!==a.value&&oe.value(e.options[J])===!0);a.value!==J&&(et(J),$(J),X!==!0&&e.useInput===!0&&e.fillInput===!0&&N(J>=0?F.value(e.options[J]):p))}}function tt(w,X){const J=ue=>isDeepEqual(Ve.value(ue),w);return e.options.find(J)||X.find(J)||w}function ft(w,X){const J=w!==void 0?w:X;return typeof J=="function"?J:ue=>ue!==null&&typeof ue=="object"&&J in ue?ue[J]:ue}function R(w){const X=Ve.value(w);return he.value.find(J=>isDeepEqual(J,X))!==void 0}function z(w){e.useInput===!0&&P.value!==null&&(w===void 0||P.value===w.target&&w.target.value===be.value)&&P.value.select()}function ie(w){isKeyCode(w,27)===!0&&n.value===!0&&(stop(w),Ge(),Qe()),r("keyup",w)}function ke(w){const{value:X}=w.target;if(w.keyCode!==void 0){ie(w);return}if(w.target.value="",v!==null&&(clearTimeout(v),v=null),Qe(),typeof X=="string"&&X.length!==0){const J=X.toLocaleLowerCase(),ue=xe=>{const Ee=e.options.find(De=>xe.value(De).toLocaleLowerCase()===J);return Ee===void 0?!1:(A.value.indexOf(Ee)===-1?ze(Ee):Ge(),!0)},Te=xe=>{ue(Ve)!==!0&&(ue(F)===!0||xe===!0||ne(X,!0,()=>Te(!0)))};Te()}else L.clearValue(w)}function Y(w){r("keypress",w)}function se(w){if(r("keydown",w),shouldIgnoreKey(w)===!0)return;const X=c.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),J=w.shiftKey!==!0&&e.multiple!==!0&&(a.value>-1||X===!0);if(w.keyCode===27){prevent(w);return}if(w.keyCode===9&&J===!1){lt();return}if(w.target===void 0||w.target.id!==L.targetUid.value||L.editable.value!==!0)return;if(w.keyCode===40&&L.innerLoading.value!==!0&&n.value===!1){stopAndPrevent(w),Ke();return}if(w.keyCode===8&&e.hideSelected!==!0&&c.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?Se(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&r("update:modelValue",null);return}(w.keyCode===35||w.keyCode===36)&&(typeof c.value!="string"||c.value.length===0)&&(stopAndPrevent(w),a.value=-1,rt(w.keyCode===36?1:-1,e.multiple)),(w.keyCode===33||w.keyCode===34)&&q.value!==void 0&&(stopAndPrevent(w),a.value=Math.max(-1,Math.min(D.value,a.value+(w.keyCode===33?-1:1)*q.value.view)),rt(w.keyCode===33?1:-1,e.multiple)),(w.keyCode===38||w.keyCode===40)&&(stopAndPrevent(w),rt(w.keyCode===38?-1:1,e.multiple));const ue=D.value;if((k===void 0||C<Date.now())&&(k=""),ue>0&&e.useInput!==!0&&w.key!==void 0&&w.key.length===1&&w.altKey===!1&&w.ctrlKey===!1&&w.metaKey===!1&&(w.keyCode!==32||k.length!==0)){n.value!==!0&&Ke(w);const Te=w.key.toLocaleLowerCase(),xe=k.length===1&&k[0]===Te;C=Date.now()+1500,xe===!1&&(stopAndPrevent(w),k+=Te);const Ee=new RegExp("^"+k.split("").map(Re=>reEscapeList.indexOf(Re)>-1?"\\"+Re:Re).join(".*"),"i");let De=a.value;if(xe===!0||De<0||Ee.test(F.value(e.options[De]))!==!0)do De=normalizeToInterval(De+1,-1,ue-1);while(De!==a.value&&(oe.value(e.options[De])===!0||Ee.test(F.value(e.options[De]))!==!0));a.value!==De&&nextTick(()=>{et(De),$(De),De>=0&&e.useInput===!0&&e.fillInput===!0&&N(F.value(e.options[De]))});return}if(!(w.keyCode!==13&&(w.keyCode!==32||e.useInput===!0||k!=="")&&(w.keyCode!==9||J===!1))){if(w.keyCode!==9&&stopAndPrevent(w),a.value>-1&&a.value<ue){ze(e.options[a.value]);return}if(X===!0){const Te=(xe,Ee)=>{if(Ee){if(validateNewValueMode(Ee)!==!0)return}else Ee=e.newValueMode;if(xe==null)return;ae("",e.multiple!==!0,!0),(Ee==="toggle"?ze:Le)(xe,Ee==="add-unique"),e.multiple!==!0&&(P.value!==null&&P.value.focus(),Ge())};if(e.onNewValue!==void 0?r("newValue",c.value,Te):Te(c.value),e.multiple!==!0)return}n.value===!0?lt():L.innerLoading.value!==!0&&Ke()}}function te(){return g===!0?B.value:E.value!==null&&E.value.contentEl!==null?E.value.contentEl:void 0}function Z(){return te()}function ce(){return e.hideSelected===!0?[]:i["selected-item"]!==void 0?Ne.value.map(w=>i["selected-item"](w)).slice():i.selected!==void 0?[].concat(i.selected()):e.useChips===!0?Ne.value.map((w,X)=>h(__nuxt_component_4$3,{key:"option-"+X,removable:L.editable.value===!0&&oe.value(w.opt)!==!0,dense:!0,textColor:e.color,tabindex:He.value,onRemove(){w.removeAtIndex(X)}},()=>h("span",{class:"ellipsis",[w.html===!0?"innerHTML":"textContent"]:F.value(w.opt)}))):[h("span",{[$e.value===!0?"innerHTML":"textContent"]:U.value})]}function _(){if(H.value===!0)return i["no-option"]!==void 0?i["no-option"]({inputValue:c.value}):void 0;const w=i.option!==void 0?i.option:J=>h(__nuxt_component_3$3,{key:J.index,...J.itemProps},()=>h(__nuxt_component_1$2,()=>h(__nuxt_component_2,()=>h("span",{[J.html===!0?"innerHTML":"textContent"]:J.label}))));let X=le("div",nt.value.map(w));return i["before-options"]!==void 0&&(X=i["before-options"]().concat(X)),hMergeSlot(i["after-options"],X)}function ye(w,X){const J=X===!0?{...Ae.value,...L.splitAttrs.attributes.value}:void 0,ue={ref:X===!0?P:void 0,key:"i_t",class:we.value,style:e.inputStyle,value:c.value!==void 0?c.value:"",type:"search",...J,id:X===!0?L.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":w===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...Ie.value};return w!==!0&&g===!0&&(Array.isArray(ue.class)===!0?ue.class=[...ue.class,"no-pointer-events"]:ue.class+=" no-pointer-events"),h("input",ue)}function x(w){v!==null&&(clearTimeout(v),v=null),!(w&&w.target&&w.target.qComposing===!0)&&(N(w.target.value||""),m=!0,p=c.value,L.focused.value!==!0&&(g!==!0||u.value===!0)&&L.focus(),e.onFilter!==void 0&&(v=setTimeout(()=>{v=null,ne(c.value)},e.inputDebounce)))}function N(w){c.value!==w&&(c.value=w,r("inputValue",w))}function ae(w,X,J){m=J!==!0,e.useInput===!0&&(N(w),(X===!0||J!==!0)&&(p=w),X!==!0&&ne(w))}function ne(w,X,J){if(e.onFilter===void 0||X!==!0&&L.focused.value!==!0)return;L.innerLoading.value===!0?r("filterAbort"):(L.innerLoading.value=!0,s.value=!0),w!==""&&e.multiple!==!0&&A.value.length!==0&&m!==!0&&w===F.value(A.value[0])&&(w="");const ue=setTimeout(()=>{n.value===!0&&(n.value=!1)},10);f!==null&&clearTimeout(f),f=ue,r("filter",w,(Te,xe)=>{(X===!0||L.focused.value===!0)&&f===ue&&(clearTimeout(f),typeof Te=="function"&&Te(),s.value=!1,nextTick(()=>{L.innerLoading.value=!1,L.editable.value===!0&&(X===!0?n.value===!0&&Ge():n.value===!0?it(!0):n.value=!0),typeof xe=="function"&&nextTick(()=>{xe(o)}),typeof J=="function"&&nextTick(()=>{J(o)})}))},()=>{L.focused.value===!0&&f===ue&&(clearTimeout(f),L.innerLoading.value=!1,s.value=!1),n.value===!0&&(n.value=!1)})}function de(){return h(__nuxt_component_6,{ref:E,class:ee.value,style:e.popupContentStyle,modelValue:n.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&H.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:re.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:Je.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...Fe.value,onScrollPassive:W,onBeforeShow:bt,onBeforeHide:fe,onShow:me},_)}function fe(w){Ct(w),lt()}function me(){O()}function Ze(w){stop(w),P.value!==null&&P.value.focus(),u.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function Oe(w){stop(w),nextTick(()=>{u.value=!1})}function ht(){const w=[h(QField,{class:`col-auto ${L.fieldClass.value}`,...K.value,for:L.targetUid.value,dark:re.value,square:!0,loading:s.value,itemAligned:!1,filled:!0,stackLabel:c.value.length!==0,...L.splitAttrs.listeners.value,onFocus:Ze,onBlur:Oe},{...i,rawControl:()=>L.getControl(!0),before:void 0,after:void 0})];return n.value===!0&&w.push(h("div",{ref:B,class:ee.value+" scroll",style:e.popupContentStyle,...Fe.value,onClick:prevent,onScrollPassive:W},_())),h(__nuxt_component_8,{ref:y,modelValue:l.value,position:e.useInput===!0?"top":void 0,transitionShow:b,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:bt,onBeforeHide:st,onHide:ve,onShow:vt},()=>h("div",{class:"q-select__dialog"+(re.value===!0?" q-select__dialog--dark q-dark":"")+(u.value===!0?" q-select__dialog--focused":"")},w))}function st(w){Ct(w),y.value!==null&&y.value.__updateRefocusTarget(L.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),L.focused.value=!1}function ve(w){Ge(),L.focused.value===!1&&r("blur",w),Qe()}function vt(){const w=document.activeElement;(w===null||w.id!==L.targetUid.value)&&P.value!==null&&P.value!==w&&P.value.focus(),O()}function lt(){l.value!==!0&&(a.value=-1,n.value===!0&&(n.value=!1),L.focused.value===!1&&(f!==null&&(clearTimeout(f),f=null),L.innerLoading.value===!0&&(r("filterAbort"),L.innerLoading.value=!1,s.value=!1)))}function Ke(w){L.editable.value===!0&&(g===!0?(L.onControlFocusin(w),l.value=!0,nextTick(()=>{L.focus()})):L.focus(),e.onFilter!==void 0?ne(c.value):(H.value!==!0||i["no-option"]!==void 0)&&(n.value=!0))}function Ge(){l.value=!1,lt()}function Qe(){e.useInput===!0&&ae(e.multiple!==!0&&e.fillInput===!0&&A.value.length!==0&&F.value(A.value[0])||"",!0,!0)}function it(w){let X=-1;if(w===!0){if(A.value.length!==0){const J=Ve.value(A.value[0]);X=e.options.findIndex(ue=>isDeepEqual(Ve.value(ue),J))}Q(X)}et(X)}function Ue(w,X){n.value===!0&&L.innerLoading.value===!1&&(Q(-1,!0),nextTick(()=>{n.value===!0&&L.innerLoading.value===!1&&(w>X?Q():it(!0))}))}function ut(){l.value===!1&&E.value!==null&&E.value.updatePosition()}function bt(w){w!==void 0&&stop(w),r("popupShow",w),L.hasPopupOpen=!0,L.onControlFocusin(w)}function Ct(w){w!==void 0&&stop(w),r("popupHide",w),L.hasPopupOpen=!1,L.onControlFocusout(w)}function Xe(){g=t.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?i["no-option"]!==void 0||e.onFilter!==void 0||H.value===!1:!0),b=t.platform.is.ios===!0&&g===!0&&e.useInput===!0?"fade":e.transitionShow}return onBeforeUpdate(Xe),onUpdated(ut),Xe(),onBeforeUnmount(()=>{v!==null&&clearTimeout(v)}),Object.assign(o,{showPopup:Ke,hidePopup:Ge,removeAtIndex:Se,add:Le,toggleOption:ze,getOptionIndex:()=>a.value,setOptionIndex:et,moveOptionSelection:rt,filter:ne,updateMenuPosition:ut,updateInputValue:ae,isOptionSelected:R,getEmittingOptionValue:Pe,isOptionDisabled:(...w)=>oe.value.apply(null,w)===!0,getOptionValue:(...w)=>Ve.value.apply(null,w),getOptionLabel:(...w)=>F.value.apply(null,w)}),Object.assign(L,{innerValue:A,fieldClass:computed(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:I,targetRef:P,hasValue:pe,showPopup:Ke,floatingLabel:computed(()=>e.hideSelected!==!0&&pe.value===!0||typeof c.value=="number"||c.value.length!==0||fieldValueIsFilled(e.displayValue)),getControlChild:()=>{if(L.editable.value!==!1&&(l.value===!0||H.value!==!0||i["no-option"]!==void 0))return g===!0?ht():de();L.hasPopupOpen===!0&&(L.hasPopupOpen=!1)},controlEvents:{onFocusin(w){L.onControlFocusin(w)},onFocusout(w){L.onControlFocusout(w,()=>{Qe(),lt()})},onClick(w){if(prevent(w),g!==!0&&n.value===!0){lt(),P.value!==null&&P.value.focus();return}Ke(w)}},getControl:w=>{const X=ce(),J=w===!0||l.value!==!0||g!==!0;if(e.useInput===!0)X.push(ye(w,J));else if(L.editable.value===!0){const Te=J===!0?Ae.value:void 0;X.push(h("input",{ref:J===!0?P:void 0,key:"d_t",class:"q-select__focus-target",id:J===!0?L.targetUid.value:void 0,value:U.value,readonly:!0,"data-autofocus":w===!0||e.autofocus===!0||void 0,...Te,onKeydown:se,onKeyup:ie,onKeypress:Y})),J===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&X.push(h("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:ke}))}if(S.value!==void 0&&e.disable!==!0&&he.value.length!==0){const Te=he.value.map(xe=>h("option",{value:xe,selected:!0}));X.push(h("select",{class:"hidden",name:S.value,multiple:e.multiple},Te))}const ue=e.useInput===!0||J!==!0?void 0:L.splitAttrs.attributes.value;return h("div",{class:"q-field__native row items-center",...ue,...L.splitAttrs.listeners.value},X)},getInnerAppend:()=>e.loading!==!0&&s.value!==!0&&e.hideDropdownIcon!==!0?[h(__nuxt_component_0$1,{class:"q-select__dropdown-icon"+(n.value===!0?" rotate-180":""),name:dt.value})]:null}),useField(L)}}),__nuxt_component_0=createComponent({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:i,emit:r}){const o=getCurrentInstance(),{proxy:{$q:t}}=o,n=l=>{r("click",l)};return()=>{if(e.props===void 0)return h("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:n},hSlot(i.default));let l,a;const c=o.vnode.key;if(c){if(l=e.props.colsMap[c],l===void 0)return}else l=e.props.col;if(l.sortable===!0){const s=l.align==="right"?"unshift":"push";a=hUniqueSlot(i.default,[]),a[s](h(__nuxt_component_0$1,{class:l.__iconClass,name:t.iconSet.table.arrowUp}))}else a=hSlot(i.default);const u={class:l.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:l.headerStyle,onClick:s=>{l.sortable===!0&&e.props.sort(l),n(s)}};return h("th",u,a)}}});function getTableMiddle(e,i){return h("div",e,[h("table",{class:"q-table"},i)])}const comps={list:__nuxt_component_6$1,table:__nuxt_component_4$1},typeOptions=["list","table","__qtable"],QVirtualScroll=createComponent({name:"QVirtualScroll",props:{...useVirtualScrollProps,type:{type:String,default:"list",validator:e=>typeOptions.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:{default:void 0}},setup(e,{slots:i,attrs:r}){let o;const t=ref(null),n=computed(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:l,localResetVirtualScroll:a,padVirtualScroll:c,onVirtualScrollEvt:u}=useVirtualScroll({virtualScrollLength:n,getVirtualScrollTarget:m,getVirtualScrollEl:g}),s=computed(()=>{if(n.value===0)return[];const k=(C,I)=>({index:l.value.from+I,item:C});return e.itemsFn===void 0?e.items.slice(l.value.from,l.value.to).map(k):e.itemsFn(l.value.from,l.value.to-l.value.from).map(k)}),v=computed(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),d=computed(()=>e.scrollTarget!==void 0?{}:{tabindex:0});watch(n,()=>{a()}),watch(()=>e.scrollTarget,()=>{p(),f()});function g(){return t.value.$el||t.value}function m(){return o}function f(){o=getScrollTarget(g(),e.scrollTarget),o.addEventListener("scroll",u,listenOpts.passive)}function p(){o!==void 0&&(o.removeEventListener("scroll",u,listenOpts.passive),o=void 0)}function b(){let k=c(e.type==="list"?"div":"tbody",s.value.map(i.default));return i.before!==void 0&&(k=i.before().concat(k)),hMergeSlot(i.after,k)}return onBeforeMount(()=>{a()}),onMounted(()=>{f()}),onActivated(()=>{f()}),onDeactivated(()=>{p()}),onBeforeUnmount(()=>{p()}),()=>{if(i.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?getTableMiddle({ref:t,class:"q-table__middle "+v.value},b()):h(comps[e.type],{...r,ref:t,class:[r.class,v.value],...d.value},b)}}});function sortDate(e,i){return new Date(e)-new Date(i)}const useTableSortProps={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function useTableSort(e,i,r,o){const t=computed(()=>{const{sortBy:a}=i.value;return a&&r.value.find(c=>c.name===a)||null}),n=computed(()=>e.sortMethod!==void 0?e.sortMethod:(a,c,u)=>{const s=r.value.find(g=>g.name===c);if(s===void 0||s.field===void 0)return a;const v=u===!0?-1:1,d=typeof s.field=="function"?g=>s.field(g):g=>g[s.field];return a.sort((g,m)=>{let f=d(g),p=d(m);return f==null?-1*v:p==null?1*v:s.sort!==void 0?s.sort(f,p,g,m)*v:isNumber(f)===!0&&isNumber(p)===!0?(f-p)*v:isDate(f)===!0&&isDate(p)===!0?sortDate(f,p)*v:typeof f=="boolean"&&typeof p=="boolean"?(f-p)*v:([f,p]=[f,p].map(b=>(b+"").toLocaleString().toLowerCase()),f<p?-1*v:f===p?0:v)})});function l(a){let c=e.columnSortOrder;if(isObject(a)===!0)a.sortOrder&&(c=a.sortOrder),a=a.name;else{const v=r.value.find(d=>d.name===a);v!==void 0&&v.sortOrder&&(c=v.sortOrder)}let{sortBy:u,descending:s}=i.value;u!==a?(u=a,s=c==="da"):e.binaryStateSort===!0?s=!s:s===!0?c==="ad"?u=null:s=!1:c==="ad"?s=!0:u=null,o({sortBy:u,descending:s,page:1})}return{columnToSort:t,computedSortMethod:n,sort:l}}const useTableFilterProps={filter:[String,Object],filterMethod:Function};function useTableFilter(e,i){const r=computed(()=>e.filterMethod!==void 0?e.filterMethod:(o,t,n,l)=>{const a=t?t.toLowerCase():"";return o.filter(c=>n.some(u=>{const s=l(u,c)+"";return(s==="undefined"||s==="null"?"":s.toLowerCase()).indexOf(a)!==-1}))});return watch(()=>e.filter,()=>{nextTick(()=>{i({page:1},!0)})},{deep:!0}),{computedFilterMethod:r}}function samePagination(e,i){for(const r in i)if(i[r]!==e[r])return!1;return!0}function fixPagination(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const useTablePaginationProps={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function useTablePaginationState(e,i){const{props:r,emit:o}=e,t=ref(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:r.rowsPerPageOptions.length!==0?r.rowsPerPageOptions[0]:5},r.pagination)),n=computed(()=>{const s=r["onUpdate:pagination"]!==void 0?{...t.value,...r.pagination}:t.value;return fixPagination(s)}),l=computed(()=>n.value.rowsNumber!==void 0);function a(s){c({pagination:s,filter:r.filter})}function c(s={}){nextTick(()=>{o("request",{pagination:s.pagination||n.value,filter:s.filter||r.filter,getCellValue:i})})}function u(s,v){const d=fixPagination({...n.value,...s});if(samePagination(n.value,d)===!0){l.value===!0&&v===!0&&a(d);return}if(l.value===!0){a(d);return}r.pagination!==void 0&&r["onUpdate:pagination"]!==void 0?o("update:pagination",d):t.value=d}return{innerPagination:t,computedPagination:n,isServerSide:l,requestServerInteraction:c,setPagination:u}}function useTablePagination(e,i,r,o,t,n){const{props:l,emit:a,proxy:{$q:c}}=e,u=computed(()=>o.value===!0?r.value.rowsNumber||0:n.value),s=computed(()=>{const{page:I,rowsPerPage:P}=r.value;return(I-1)*P}),v=computed(()=>{const{page:I,rowsPerPage:P}=r.value;return I*P}),d=computed(()=>r.value.page===1),g=computed(()=>r.value.rowsPerPage===0?1:Math.max(1,Math.ceil(u.value/r.value.rowsPerPage))),m=computed(()=>v.value===0?!0:r.value.page>=g.value),f=computed(()=>(l.rowsPerPageOptions.includes(i.value.rowsPerPage)?l.rowsPerPageOptions:[i.value.rowsPerPage].concat(l.rowsPerPageOptions)).map(P=>({label:P===0?c.lang.table.allRows:""+P,value:P})));watch(g,(I,P)=>{if(I===P)return;const E=r.value.page;I&&!E?t({page:1}):I<E&&t({page:I})});function p(){t({page:1})}function b(){const{page:I}=r.value;I>1&&t({page:I-1})}function k(){const{page:I,rowsPerPage:P}=r.value;v.value>0&&I*P<u.value&&t({page:I+1})}function C(){t({page:g.value})}return l["onUpdate:pagination"]!==void 0&&a("update:pagination",{...r.value}),{firstRowIndex:s,lastRowIndex:v,isFirstPage:d,isLastPage:m,pagesNumber:g,computedRowsPerPageOptions:f,computedRowsNumber:u,firstPage:p,prevPage:b,nextPage:k,lastPage:C}}const useTableRowSelectionProps={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},useTableRowSelectionEmits=["update:selected","selection"];function useTableRowSelection(e,i,r,o){const t=computed(()=>{const m={};return e.selected.map(o.value).forEach(f=>{m[f]=!0}),m}),n=computed(()=>e.selection!=="none"),l=computed(()=>e.selection==="single"),a=computed(()=>e.selection==="multiple"),c=computed(()=>r.value.length!==0&&r.value.every(m=>t.value[o.value(m)]===!0)),u=computed(()=>c.value!==!0&&r.value.some(m=>t.value[o.value(m)]===!0)),s=computed(()=>e.selected.length);function v(m){return t.value[m]===!0}function d(){i("update:selected",[])}function g(m,f,p,b){i("selection",{rows:f,added:p,keys:m,evt:b});const k=l.value===!0?p===!0?f:[]:p===!0?e.selected.concat(f):e.selected.filter(C=>m.includes(o.value(C))===!1);i("update:selected",k)}return{hasSelectionMode:n,singleSelection:l,multipleSelection:a,allRowsSelected:c,someRowsSelected:u,rowsSelectedNumber:s,isRowSelected:v,clearSelection:d,updateSelection:g}}function getVal(e){return Array.isArray(e)?e.slice():[]}const useTableRowExpandProps={expanded:Array},useTableRowExpandEmits=["update:expanded"];function useTableRowExpand(e,i){const r=ref(getVal(e.expanded));watch(()=>e.expanded,l=>{r.value=getVal(l)});function o(l){return r.value.includes(l)}function t(l){e.expanded!==void 0?i("update:expanded",l):r.value=l}function n(l,a){const c=r.value.slice(),u=c.indexOf(l);a===!0?u===-1&&(c.push(l),t(c)):u!==-1&&(c.splice(u,1),t(c))}return{isRowExpanded:o,setExpanded:t,updateExpanded:n}}const useTableColumnSelectionProps={visibleColumns:Array};function useTableColumnSelection(e,i,r){const o=computed(()=>{if(e.columns!==void 0)return e.columns;const a=e.rows[0];return a!==void 0?Object.keys(a).map(c=>({name:c,label:c.toUpperCase(),field:c,align:isNumber(a[c])?"right":"left",sortable:!0})):[]}),t=computed(()=>{const{sortBy:a,descending:c}=i.value;return(e.visibleColumns!==void 0?o.value.filter(s=>s.required===!0||e.visibleColumns.includes(s.name)===!0):o.value).map(s=>{const v=s.align||"right",d=`text-${v}`;return{...s,align:v,__iconClass:`q-table__sort-icon q-table__sort-icon--${v}`,__thClass:d+(s.headerClasses!==void 0?" "+s.headerClasses:"")+(s.sortable===!0?" sortable":"")+(s.name===a?` sorted ${c===!0?"sort-desc":""}`:""),__tdStyle:s.style!==void 0?typeof s.style!="function"?()=>s.style:s.style:()=>null,__tdClass:s.classes!==void 0?typeof s.classes!="function"?()=>d+" "+s.classes:g=>d+" "+s.classes(g):()=>d}})}),n=computed(()=>{const a={};return t.value.forEach(c=>{a[c.name]=c}),a}),l=computed(()=>e.tableColspan!==void 0?e.tableColspan:t.value.length+(r.value===!0?1:0));return{colList:o,computedCols:t,computedColsMap:n,computedColspan:l}}const bottomClass="q-table__bottom row items-center",commonVirtPropsObj={};commonVirtPropsList.forEach(e=>{commonVirtPropsObj[e]={}});const __nuxt_component_7=createComponent({name:"QTable",props:{rows:{type:Array,default:()=>[]},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{default:void 0},...commonVirtPropsObj,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...useDarkProps,...useFullscreenProps,...useTableColumnSelectionProps,...useTableFilterProps,...useTablePaginationProps,...useTableRowExpandProps,...useTableRowSelectionProps,...useTableSortProps},emits:["request","virtualScroll",...useFullscreenEmits,...useTableRowExpandEmits,...useTableRowSelectionEmits],setup(e,{slots:i,emit:r}){const o=getCurrentInstance(),{proxy:{$q:t}}=o,n=useDark(e,t),{inFullscreen:l,toggleFullscreen:a}=useFullscreen(),c=computed(()=>typeof e.rowKey=="function"?e.rowKey:x=>x[e.rowKey]),u=ref(null),s=ref(null),v=computed(()=>e.grid!==!0&&e.virtualScroll===!0),d=computed(()=>" q-table__card"+(n.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),g=computed(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":d.value)+(n.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(l.value===!0?" fullscreen scroll":"")),m=computed(()=>g.value+(e.loading===!0?" q-table--loading":""));watch(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+g.value,()=>{v.value===!0&&s.value!==null&&s.value.reset()});const{innerPagination:f,computedPagination:p,isServerSide:b,requestServerInteraction:k,setPagination:C}=useTablePaginationState(o,rt),{computedFilterMethod:I}=useTableFilter(e,C),{isRowExpanded:P,setExpanded:E,updateExpanded:y}=useTableRowExpand(e,r),B=computed(()=>{let x=e.rows;if(b.value===!0||x.length===0)return x;const{sortBy:N,descending:ae}=p.value;return e.filter&&(x=I.value(x,e.filter,A.value,rt)),pe.value!==null&&(x=we.value(e.rows===x?x.slice():x,N,ae)),x}),S=computed(()=>B.value.length),V=computed(()=>{let x=B.value;if(b.value===!0)return x;const{rowsPerPage:N}=p.value;return N!==0&&(H.value===0&&e.rows!==x?x.length>be.value&&(x=x.slice(0,be.value)):x=x.slice(H.value,be.value)),x}),{hasSelectionMode:D,singleSelection:G,multipleSelection:T,allRowsSelected:q,someRowsSelected:Q,rowsSelectedNumber:le,isRowSelected:W,clearSelection:$,updateSelection:O}=useTableRowSelection(e,r,V,c),{colList:L,computedCols:A,computedColsMap:K,computedColspan:re}=useTableColumnSelection(e,p,D),{columnToSort:pe,computedSortMethod:we,sort:ee}=useTableSort(e,p,L,C),{firstRowIndex:H,lastRowIndex:be,isFirstPage:U,isLastPage:Be,pagesNumber:$e,computedRowsPerPageOptions:He,computedRowsNumber:Ae,firstPage:Fe,prevPage:Ne,nextPage:nt,lastPage:dt}=useTablePagination(o,f,p,b,C,S),Je=computed(()=>V.value.length===0),je=computed(()=>{const x={};return commonVirtPropsList.forEach(N=>{x[N]=e[N]}),x.virtualScrollItemSize===void 0&&(x.virtualScrollItemSize=e.dense===!0?28:48),x});function Ve(){v.value===!0&&s.value.reset()}function F(){if(e.grid===!0)return ye();const x=e.hideHeader!==!0?z:null;if(v.value===!0){const ae=i["top-row"],ne=i["bottom-row"],de={default:fe=>Pe(fe.item,i.body,fe.index)};if(ae!==void 0){const fe=h("tbody",ae({cols:A.value}));de.before=x===null?()=>fe:()=>[x()].concat(fe)}else x!==null&&(de.before=x);return ne!==void 0&&(de.after=()=>h("tbody",ne({cols:A.value}))),h(QVirtualScroll,{ref:s,class:e.tableClass,style:e.tableStyle,...je.value,scrollTarget:e.virtualScrollTarget,items:V.value,type:"__qtable",tableColspan:re.value,onVirtualScroll:he},de)}const N=[Se()];return x!==null&&N.unshift(x()),getTableMiddle({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},N)}function oe(x,N){if(s.value!==null){s.value.scrollTo(x,N);return}x=parseInt(x,10);const ae=u.value.querySelector(`tbody tr:nth-of-type(${x+1})`);if(ae!==null){const ne=u.value.querySelector(".q-table__middle.scroll"),de=ae.offsetTop-e.virtualScrollStickySizeStart,fe=de<ne.scrollTop?"decrease":"increase";ne.scrollTop=de,r("virtualScroll",{index:x,from:0,to:f.value.rowsPerPage-1,direction:fe})}}function he(x){r("virtualScroll",x)}function Ie(){return[h(QLinearProgress,{class:"q-table__linear-progress",color:e.color,dark:n.value,indeterminate:!0,trackColor:"transparent"})]}function Pe(x,N,ae){const ne=c.value(x),de=W(ne);if(N!==void 0)return N(ge({key:ne,row:x,pageIndex:ae,__trClass:de?"selected":""}));const fe=i["body-cell"],me=A.value.map(Oe=>{const ht=i[`body-cell-${Oe.name}`],st=ht!==void 0?ht:fe;return st!==void 0?st(Le({key:ne,row:x,pageIndex:ae,col:Oe})):h("td",{class:Oe.__tdClass(x),style:Oe.__tdStyle(x)},rt(Oe,x))});if(D.value===!0){const Oe=i["body-selection"],ht=Oe!==void 0?Oe(ze({key:ne,row:x,pageIndex:ae})):[h(QCheckbox,{modelValue:de,color:e.color,dark:n.value,dense:e.dense,"onUpdate:modelValue":(st,ve)=>{O([ne],[x],st,ve)}})];me.unshift(h("td",{class:"q-table--col-auto-width"},ht))}const Ze={key:ne,class:{selected:de}};return e.onRowClick!==void 0&&(Ze.class["cursor-pointer"]=!0,Ze.onClick=Oe=>{r("RowClick",Oe,x,ae)}),e.onRowDblclick!==void 0&&(Ze.class["cursor-pointer"]=!0,Ze.onDblclick=Oe=>{r("RowDblclick",Oe,x,ae)}),e.onRowContextmenu!==void 0&&(Ze.class["cursor-pointer"]=!0,Ze.onContextmenu=Oe=>{r("RowContextmenu",Oe,x,ae)}),h("tr",Ze,me)}function Se(){const x=i.body,N=i["top-row"],ae=i["bottom-row"];let ne=V.value.map((de,fe)=>Pe(de,x,fe));return N!==void 0&&(ne=N({cols:A.value}).concat(ne)),ae!==void 0&&(ne=ne.concat(ae({cols:A.value}))),h("tbody",ne)}function ge(x){return et(x),x.cols=x.cols.map(N=>injectProp({...N},"value",()=>rt(N,x.row))),x}function Le(x){return et(x),injectProp(x,"value",()=>rt(x.col,x.row)),x}function ze(x){return et(x),x}function et(x){Object.assign(x,{cols:A.value,colsMap:K.value,sort:ee,rowIndex:H.value+x.pageIndex,color:e.color,dark:n.value,dense:e.dense}),D.value===!0&&injectProp(x,"selected",()=>W(x.key),(N,ae)=>{O([x.key],[x.row],N,ae)}),injectProp(x,"expand",()=>P(x.key),N=>{y(x.key,N)})}function rt(x,N){const ae=typeof x.field=="function"?x.field(N):N[x.field];return x.format!==void 0?x.format(ae,N):ae}const tt=computed(()=>({pagination:p.value,pagesNumber:$e.value,isFirstPage:U.value,isLastPage:Be.value,firstPage:Fe,prevPage:Ne,nextPage:nt,lastPage:dt,inFullscreen:l.value,toggleFullscreen:a}));function ft(){const x=i.top,N=i["top-left"],ae=i["top-right"],ne=i["top-selection"],de=D.value===!0&&ne!==void 0&&le.value>0,fe="q-table__top relative-position row items-center";if(x!==void 0)return h("div",{class:fe},[x(tt.value)]);let me;if(de===!0?me=ne(tt.value).slice():(me=[],N!==void 0?me.push(h("div",{class:"q-table__control"},[N(tt.value)])):e.title&&me.push(h("div",{class:"q-table__control"},[h("div",{class:["q-table__title",e.titleClass]},e.title)]))),ae!==void 0&&(me.push(h("div",{class:"q-table__separator col"})),me.push(h("div",{class:"q-table__control"},[ae(tt.value)]))),me.length!==0)return h("div",{class:fe},me)}const R=computed(()=>Q.value===!0?null:q.value);function z(){const x=ie();return e.loading===!0&&i.loading===void 0&&x.push(h("tr",{class:"q-table__progress"},[h("th",{class:"relative-position",colspan:re.value},Ie())])),h("thead",x)}function ie(){const x=i.header,N=i["header-cell"];if(x!==void 0)return x(ke({header:!0})).slice();const ae=A.value.map(ne=>{const de=i[`header-cell-${ne.name}`],fe=de!==void 0?de:N,me=ke({col:ne});return fe!==void 0?fe(me):h(__nuxt_component_0,{key:ne.name,props:me},()=>ne.label)});if(G.value===!0&&e.grid!==!0)ae.unshift(h("th",{class:"q-table--col-auto-width"}," "));else if(T.value===!0){const ne=i["header-selection"],de=ne!==void 0?ne(ke({})):[h(QCheckbox,{color:e.color,modelValue:R.value,dark:n.value,dense:e.dense,"onUpdate:modelValue":Y})];ae.unshift(h("th",{class:"q-table--col-auto-width"},de))}return[h("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},ae)]}function ke(x){return Object.assign(x,{cols:A.value,sort:ee,colsMap:K.value,color:e.color,dark:n.value,dense:e.dense}),T.value===!0&&injectProp(x,"selected",()=>R.value,Y),x}function Y(x){Q.value===!0&&(x=!1),O(V.value.map(c.value),V.value,x)}const se=computed(()=>{const x=[e.iconFirstPage||t.iconSet.table.firstPage,e.iconPrevPage||t.iconSet.table.prevPage,e.iconNextPage||t.iconSet.table.nextPage,e.iconLastPage||t.iconSet.table.lastPage];return t.lang.rtl===!0?x.reverse():x});function te(){if(e.hideBottom===!0)return;if(Je.value===!0){if(e.hideNoData===!0)return;const ae=e.loading===!0?e.loadingLabel||t.lang.table.loading:e.filter?e.noResultsLabel||t.lang.table.noResults:e.noDataLabel||t.lang.table.noData,ne=i["no-data"],de=ne!==void 0?[ne({message:ae,icon:t.iconSet.table.warning,filter:e.filter})]:[h(__nuxt_component_0$1,{class:"q-table__bottom-nodata-icon",name:t.iconSet.table.warning}),ae];return h("div",{class:bottomClass+" q-table__bottom--nodata"},de)}const x=i.bottom;if(x!==void 0)return h("div",{class:bottomClass},[x(tt.value)]);const N=e.hideSelectedBanner!==!0&&D.value===!0&&le.value>0?[h("div",{class:"q-table__control"},[h("div",[(e.selectedRowsLabel||t.lang.table.selectedRecords)(le.value)])])]:[];if(e.hidePagination!==!0)return h("div",{class:bottomClass+" justify-end"},ce(N));if(N.length!==0)return h("div",{class:bottomClass},N)}function Z(x){C({page:1,rowsPerPage:x.value})}function ce(x){let N;const{rowsPerPage:ae}=p.value,ne=e.paginationLabel||t.lang.table.pagination,de=i.pagination,fe=e.rowsPerPageOptions.length>1;if(x.push(h("div",{class:"q-table__separator col"})),fe===!0&&x.push(h("div",{class:"q-table__control"},[h("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||t.lang.table.recordsPerPage]),h(QSelect,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:ae,options:He.value,displayValue:ae===0?t.lang.table.allRows:ae,dark:n.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":Z})])),de!==void 0)N=de(tt.value);else if(N=[h("span",ae!==0?{class:"q-table__bottom-item"}:{},[ae?ne(H.value+1,Math.min(be.value,Ae.value),Ae.value):ne(1,S.value,Ae.value)])],ae!==0&&$e.value>1){const me={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(me.size="sm"),$e.value>2&&N.push(h(__nuxt_component_8$1,{key:"pgFirst",...me,icon:se.value[0],disable:U.value,onClick:Fe})),N.push(h(__nuxt_component_8$1,{key:"pgPrev",...me,icon:se.value[1],disable:U.value,onClick:Ne}),h(__nuxt_component_8$1,{key:"pgNext",...me,icon:se.value[2],disable:Be.value,onClick:nt})),$e.value>2&&N.push(h(__nuxt_component_8$1,{key:"pgLast",...me,icon:se.value[3],disable:Be.value,onClick:dt}))}return x.push(h("div",{class:"q-table__control"},N)),x}function _(){const x=e.gridHeader===!0?[h("table",{class:"q-table"},[z()])]:e.loading===!0&&i.loading===void 0?Ie():void 0;return h("div",{class:"q-table__middle"},x)}function ye(){const x=i.item!==void 0?i.item:N=>{const ae=N.cols.map(de=>h("div",{class:"q-table__grid-item-row"},[h("div",{class:"q-table__grid-item-title"},[de.label]),h("div",{class:"q-table__grid-item-value"},[de.value])]));if(D.value===!0){const de=i["body-selection"],fe=de!==void 0?de(N):[h(QCheckbox,{modelValue:N.selected,color:e.color,dark:n.value,dense:e.dense,"onUpdate:modelValue":(me,Ze)=>{O([N.key],[N.row],me,Ze)}})];ae.unshift(h("div",{class:"q-table__grid-item-row"},fe),h(__nuxt_component_2$1,{dark:n.value}))}const ne={class:["q-table__grid-item-card"+d.value,e.cardClass],style:e.cardStyle};return(e.onRowClick!==void 0||e.onRowDblclick!==void 0)&&(ne.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(ne.onClick=de=>{r("RowClick",de,N.row,N.pageIndex)}),e.onRowDblclick!==void 0&&(ne.onDblclick=de=>{r("RowDblclick",de,N.row,N.pageIndex)})),h("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(N.selected===!0?" q-table__grid-item--selected":"")},[h("div",ne,ae)])};return h("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},V.value.map((N,ae)=>x(ge({key:c.value(N),row:N,pageIndex:ae}))))}return Object.assign(o.proxy,{requestServerInteraction:k,setPagination:C,firstPage:Fe,prevPage:Ne,nextPage:nt,lastPage:dt,isRowSelected:W,clearSelection:$,isRowExpanded:P,setExpanded:E,sort:ee,resetVirtualScroll:Ve,scrollTo:oe,getCellValue:rt}),injectMultipleProps(o.proxy,{filteredSortedRows:()=>B.value,computedRows:()=>V.value,computedRowsNumber:()=>Ae.value}),()=>{const x=[ft()],N={ref:u,class:m.value};return e.grid===!0?x.push(_()):Object.assign(N,{class:[N.class,e.cardClass],style:e.cardStyle}),x.push(F(),te()),e.loading===!0&&i.loading!==void 0&&x.push(i.loading()),h("div",N,x)}}}),__nuxt_component_3=createComponent({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:i}){const r=getCurrentInstance(),o=computed(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return h("td",{class:o.value},hSlot(i.default));const t=r.vnode.key,n=(e.props.colsMap!==void 0?e.props.colsMap[t]:null)||e.props.col;if(n===void 0)return;const{row:l}=e.props;return h("td",{class:o.value+n.__tdClass(l),style:n.__tdStyle(l)},hSlot(i.default))}}}),__nuxt_component_1$1=createComponent({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:i}){const r=computed(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>h("tr",{class:r.value},hSlot(i.default))}});function getDepth(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const i=parseInt(e,10);return isNaN(i)?0:i}const __q_directive_0$1=createDirective({name:"close-popup",beforeMount(e,{value:i}){const r={depth:getDepth(i),handler(o){r.depth!==0&&setTimeout(()=>{const t=getPortalProxy(e);t!==void 0&&closePortals(t,o,r.depth)})},handlerKey(o){isKeyCode(o,13)===!0&&r.handler(o)}};e.__qclosepopup=r,e.addEventListener("click",r.handler),e.addEventListener("keyup",r.handlerKey)},updated(e,{value:i,oldValue:r}){i!==r&&(e.__qclosepopup.depth=getDepth(i))},beforeUnmount(e){const i=e.__qclosepopup;e.removeEventListener("click",i.handler),e.removeEventListener("keyup",i.handlerKey),delete e.__qclosepopup}});function update(e,{value:i,oldValue:r}){if(typeof i!="function"){e.scrollTarget.removeEventListener("scroll",e.scroll,listenOpts.passive);return}e.handler=i,typeof r!="function"&&e.scrollTarget.addEventListener("scroll",e.scroll,listenOpts.passive)}const __q_directive_0=createDirective({name:"scroll",mounted(e,i){const r={scrollTarget:getScrollTarget(e),scroll(){r.handler(getVerticalScrollPosition(r.scrollTarget),getHorizontalScrollPosition(r.scrollTarget))}};update(r,i),e.__qscroll=r},updated(e,i){e.__qscroll!==void 0&&i.oldValue!==i.value&&update(e.__qscroll,i)},beforeUnmount(e){const i=e.__qscroll;i.scrollTarget.removeEventListener("scroll",i.scroll,listenOpts.passive),delete e.__qscroll}}),cache=new WeakMap;/*! @__NO_SIDE_EFFECTS__ */function createClientOnly(e){if(cache.has(e))return cache.get(e);const i={...e};return i.render?i.render=(r,...o)=>{if(r.mounted$){const t=e.render(r,...o);return t.children===null||typeof t.children=="string"?createBaseVNode(t.type,t.props,t.children,t.patchFlag,t.dynamicProps,t.shapeFlag):h(t)}else return h("div",mergeProps(r.$attrs??r._.attrs,{key:"placeholder-key"}))}:i.template&&(i.template=`
      <template v-if="mounted$">${e.template}</template>
      <template v-else><div></div></template>
    `),i.setup=(r,o)=>{var n;const t=ref(!1);return onMounted(()=>{t.value=!0}),Promise.resolve(((n=e.setup)==null?void 0:n.call(e,r,o))||{}).then(l=>typeof l!="function"?{...l,mounted$:t}:(...a)=>{if(t.value){const c=l(...a);return c.children===null||typeof c.children=="string"?createBaseVNode(c.type,c.props,c.children,c.patchFlag,c.dynamicProps,c.shapeFlag):h(c)}else return h("div",mergeProps(o.attrs,{key:"placeholder-key"}))})},cache.set(e,i),i}const _hoisted_1$9={class:"row wrap"},_hoisted_2$9=["src"],_hoisted_3$6=["value"],_hoisted_4$5={class:"text-bold"},_sfc_main$b=defineComponent({__name:"DocumentoVisualizador.client",props:{dadosDocumento:{}},setup(e){const i=e,r=()=>{var t;const o=window.open();o.document.write(`<iframe src="${(t=i.dadosDocumento)==null?void 0:t.dataUrl}" frameborder="0" style="border:0; top:0px; left:0px; bottom:0px; right:0px; width:100%; height:100%;" allowfullscreen></iframe>`),o.document.body.style.margin="0"};return(o,t)=>{const n=__nuxt_component_8$1,l=__nuxt_component_9$1,a=__nuxt_component_8$2;return o.dadosDocumento&&o.dadosDocumento.identificado?(openBlock(),createBlock(l,{key:0,flat:"",square:"",bordered:""},{default:withCtx(()=>[createVNode(a,{class:"bg-grey-3"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$9,[o.dadosDocumento.mime==="application/pdf"?(openBlock(),createBlock(l,{key:0,square:"",class:"miniatura-conteiner q-ma-xs q-pa-xs"},{default:withCtx(()=>[createVNode(n,{class:"botao-abrir",round:"",color:"white","text-color":"grey",icon:unref(mdiOpenInNew),onClick:r},null,8,["icon"]),createBaseVNode("img",{src:o.dadosDocumento.thumbnailDataUrl,alt:"imagem pdf",class:"miniatura"},null,8,_hoisted_2$9)]),_:1})):(openBlock(),createBlock(l,{key:1,square:"",class:"miniatura-conteiner q-ma-xs q-pa-xs"},{default:withCtx(()=>[createBaseVNode("textarea",{rows:"20",readonly:"",value:o.dadosDocumento.texto,class:"caixa-colagem"},null,8,_hoisted_3$6)]),_:1})),createVNode(a,{class:"bg-grey-3"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.dadosDocumento.quadroResumo,(c,u)=>(openBlock(),createElementBlock("div",{key:u,class:"col text-caption"},[createBaseVNode("span",null,toDisplayString(c[0])+" ",1),createBaseVNode("span",_hoisted_4$5,toDisplayString(c[1]),1)]))),128))]),_:1})])]),_:1})]),_:1})):createCommentVNode("",!0)}}}),DocumentoVisualizador_client_vue_vue_type_style_index_0_scoped_b0323dbe_lang="",__nuxt_component_5_client=_export_sfc(_sfc_main$b,[["__scopeId","data-v-b0323dbe"]]),id$1="cnis-store",tipoDocumento$1=j.CNIS,useCnis=defineStore(id$1,()=>{var u;const{$leitor:e}=useNuxtApp(),i=ref(null),r=ref(e?(u=e(tipoDocumento$1))==null?void 0:u.dadosDocumento:void 0),o=computed(()=>{var s;return(s=r.value)==null?void 0:s.nome}),t=computed(()=>{var s;return(s=r.value)==null?void 0:s.identificado}),n=computed(()=>{var s,v;return(v=(s=r.value)==null?void 0:s.dadosEstruturados)==null?void 0:v.segurado}),l=computed(()=>{var s,v,d;return(d=(v=(s=r.value)==null?void 0:s.dadosEstruturados)==null?void 0:v.vinculos)==null?void 0:d.map(g=>{const{seq:m,nit:f,entidade:p,natureza:b,beneficio:k,dataInicial:C,dataFinal:I,salarios:P}=g;return{seq:m,nit:f,entidade:p,natureza:b,beneficio:k,dataInicial:C,dataFinal:I,salarios:P}})});async function a(s){const v=e(tipoDocumento$1);await(v==null?void 0:v.analisar(s)),r.value=v==null?void 0:v.dadosDocumento}function c(){var s;i.value=null,r.value=(s=e(tipoDocumento$1))==null?void 0:s.dadosDocumento}return{arquivo:i,nome:o,identificado:t,dadosDocumento:r,dadosSegurado:n,vinculos:l,analisarDocumento:a,$reset:c}}),id="carta-concessao-store",tipoDocumento=j.CARTA_CONCESSAO,useCarta=defineStore(id,()=>{var m;const{$leitor:e}=useNuxtApp(),i=ref(null),r=ref(e?(m=e(tipoDocumento))==null?void 0:m.dadosDocumento:void 0),o=computed(()=>{var f;return(f=r.value)==null?void 0:f.nome}),t=computed(()=>{var f;return(f=r.value)==null?void 0:f.identificado}),n=computed(()=>{var f,p;return(p=(f=r.value)==null?void 0:f.dadosEstruturados)==null?void 0:p.dadosSegurado}),l=computed(()=>{var f,p,b;return((b=(p=(f=r.value)==null?void 0:f.dadosEstruturados)==null?void 0:p.dadosCalculo)==null?void 0:b.atividadePrincipal)!==void 0}),a=computed(()=>{var f,p,b;return(b=(p=(f=r.value)==null?void 0:f.dadosEstruturados)==null?void 0:p.dadosCalculo)==null?void 0:b.normalPrincipal}),c=computed(()=>{var f,p,b;return(b=(p=(f=r.value)==null?void 0:f.dadosEstruturados)==null?void 0:p.dadosCalculo)==null?void 0:b.atividadePrincipal}),u=computed(()=>{var f,p,b;return(b=(p=(f=r.value)==null?void 0:f.dadosEstruturados)==null?void 0:p.dadosCalculo)==null?void 0:b.atividadesSecundarias}),s=computed(()=>{var f,p,b;return(b=(p=(f=r.value)==null?void 0:f.dadosEstruturados)==null?void 0:p.dadosCalculo)==null?void 0:b.simulacoesDireitoAdquirido}),v=computed(()=>{var C,I,P,E,y,B,S,V,D,G,T,q,Q,le,W,$,O,L,A,K,re,pe,we;if(((P=(I=(C=r.value)==null?void 0:C.dadosEstruturados)==null?void 0:I.dadosCalculo)==null?void 0:P.atividadePrincipal)===void 0)return(S=(B=(y=(E=r.value)==null?void 0:E.dadosEstruturados)==null?void 0:y.dadosCalculo)==null?void 0:B.normalPrincipal)==null?void 0:S.pbc;if(!((T=(G=(D=(V=r.value)==null?void 0:V.dadosEstruturados)==null?void 0:D.dadosCalculo)==null?void 0:G.atividadesSecundarias)!=null&&T.length))return(W=(le=(Q=(q=r.value)==null?void 0:q.dadosEstruturados)==null?void 0:Q.dadosCalculo)==null?void 0:le.normalPrincipal)==null?void 0:W.pbc;const f=new Set,p=(((A=(L=(O=($=r.value)==null?void 0:$.dadosEstruturados)==null?void 0:O.dadosCalculo)==null?void 0:L.atividadePrincipal)==null?void 0:A.pbc)??[]).map(ee=>{var be,U,Be,$e;const H={};return extend(!0,H,ee),H.soma=ee.original,($e=(Be=(U=(be=r.value)==null?void 0:be.dadosEstruturados)==null?void 0:U.dadosCalculo)==null?void 0:Be.atividadesSecundarias)==null||$e.forEach((He,Ae)=>{const Fe=He.pbc.find(Ne=>Ne.competencia.valueOf()===H.competencia.valueOf());if(Fe){const Ne=`secundaria_0${Ae+1}`;f.add(Ne),H[Ne]=Fe.original,H.soma+=Fe.original,H.corrigido+=Fe.corrigido}}),H});f.add("soma");const b=(we=(pe=(re=(K=r.value)==null?void 0:K.dadosEstruturados)==null?void 0:re.dadosCalculo)==null?void 0:pe.atividadePrincipal)==null?void 0:we.divisor,k=p.map(ee=>({seq:ee.seq,valor:ee.corrigido})).sort((ee,H)=>ee.valor-H.valor).map(ee=>ee.seq).slice(b*-1);return p.map(ee=>(Array.from(f).forEach(H=>{ee[H]=ee[H]??0}),ee.desconsiderado=!k.includes(ee.seq),ee))});async function d(f){const p=e(tipoDocumento);await(p==null?void 0:p.analisar(f)),r.value=p==null?void 0:p.dadosDocumento}function g(){var f;i.value=null,r.value=(f=e(tipoDocumento))==null?void 0:f.dadosDocumento}return{arquivo:i,nome:o,identificado:t,dadosDocumento:r,dadosSegurado:n,atividadeNormal:a,atividadePrincipal:c,atividadesSecundarias:u,temAtividadesConcomitantes:l,simulacoes:s,salariosConsolidados:v,analisarDocumento:d,$reset:g}}),__nuxt_component_5_client_wrapped=createClientOnly(__nuxt_component_5_client),_withScopeId$2=e=>(pushScopeId("data-v-7d8b5032"),e=e(),popScopeId(),e),_hoisted_1$8={key:0},_hoisted_2$8={key:1},_hoisted_3$5={class:"row justify-between items-center content-center q-mb-sm"},_hoisted_4$4=_withScopeId$2(()=>createBaseVNode("span",{class:"text-subtitle1 text-bold text-grey-8",style:{"vertical-align":"middle"}},"Área de Transferência",-1)),_hoisted_5$4=_withScopeId$2(()=>createBaseVNode("div",null,"Cole abaixo o conteúdo copiado (Ctrl-C)",-1)),_sfc_main$a=defineComponent({__name:"DocumentoLeitor.client",props:{rotulo:{},tipoDocumento:{}},setup(e){const i=e,{$depurador:r}=useNuxtApp(),o=ref(!1),t=ref(!1),n=ref(!1),l=ref(""),a=ref(""),c=i.tipoDocumento===j.CNIS?useCnis():useCarta(),u=ref(null),s=()=>{var p;c.$reset(),(p=u.value)==null||p.resetValidation(),n.value=!1,l.value="",a.value=""},v=()=>{var p;return(p=u.value)==null?void 0:p.pickFiles()},d=async()=>{const p=await window.navigator.clipboard.readText();await f(p.replace(/\r\n/g,`
`))},g=p=>{if(p[0].failedPropValidation==="accept"){l.value='Somente são permitidos arquivos "pdf" e "txt"',n.value=!0;return}l.value="Arquivo inválido",n.value=!0},m=p=>{const k=p.target.value;t.value=!1,typeof k=="string"&&k.length&&f(k)},f=async p=>{var b,k;if(!p){l.value="Não há dados para leitura",n.value=!0;return}o.value=!0;try{await c.analisarDocumento(p)}catch(C){r.erro(C)}if(o.value=!1,!((b=c.nome)!=null&&b.length)){const C=((k=c.dadosDocumento)==null?void 0:k.tipo)===j.CNIS?"CNIS":"Carta de Concessão";l.value=`O documento deve ser do tipo "${C}"`,n.value=!0;return}a.value=`Documento carregado: ${c.nome}`};return(p,b)=>{const k=__nuxt_component_0$1,C=__nuxt_component_8$1,I=__nuxt_component_2$2,P=__nuxt_component_9$1,E=__nuxt_component_4,y=__nuxt_component_5_client_wrapped,B=__nuxt_component_6$1;return openBlock(),createBlock(B,{class:"column full-width"},{default:withCtx(()=>[unref(c).identificado?(openBlock(),createBlock(I,{key:0,modelValue:unref(c).nome,"onUpdate:modelValue":b[0]||(b[0]=S=>unref(c).nome=S),type:"text",label:"Documento identificado",color:"blue-10","bg-color":"blue-1","label-color":"blue-10","input-class":"text-blue-10 text-bold",readonly:"",outlined:"",square:""},{prepend:withCtx(()=>[createVNode(k,{name:unref(mdiCheckCircle),color:"primary",class:"q-ml-sm"},null,8,["name"])]),append:withCtx(()=>[createVNode(C,{icon:unref(mdiDelete),round:"",color:"grey-3","text-color":"grey-7",title:"limpar",onClick:s},null,8,["icon"])]),_:1},8,["modelValue"])):(openBlock(),createBlock(unref(QFile),{key:1,ref_key:"picker",ref:u,modelValue:unref(c).arquivo,"onUpdate:modelValue":[b[3]||(b[3]=S=>unref(c).arquivo=S),f],class:"col",label:unref(a)||p.rotulo,accept:"application/pdf,text/plain",square:"",outlined:"","no-error-icon":"",error:unref(n),"error-message":unref(l),"hide-bottom-space":!0,loading:unref(o),disable:unref(o),color:unref(c).identificado?"blue-10":"","bg-color":unref(c).identificado?"blue-1":"grey-1","label-color":unref(c).identificado?"blue-10":"",readonly:unref(c).identificado,onRejected:g},{prepend:withCtx(()=>[createVNode(k,{name:unref(mdiFolder),color:"grey-7",onClick:withModifiers(v,["stop","prevent"])},null,8,["name","onClick"])]),append:withCtx(()=>{var S;return[(S=unref(u))!=null&&S.hasError?(openBlock(),createElementBlock("div",_hoisted_1$8,[createVNode(k,{name:unref(mdiAlertCircle),color:"red-8"},null,8,["name"]),createVNode(C,{icon:unref(mdiRefresh),round:"",class:"cursor-pointer q-ml-sm",color:"grey-3","text-color":"grey-7",title:"reiniciar",onClick:s},null,8,["icon"])])):(openBlock(),createElementBlock("div",_hoisted_2$8,[createVNode(C,{icon:unref(mdiTextBoxOutline),round:"",class:"cursor-pointer q-ml-sm",color:"grey-3","text-color":"grey-7",disable:unref(o),title:"abrir caixa de texto"},{default:withCtx(()=>[createVNode(E,{modelValue:unref(t),"onUpdate:modelValue":b[2]||(b[2]=V=>isRef(t)?t.value=V:null),class:"q-pa-md"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_3$5,[createBaseVNode("div",null,[createVNode(k,{name:unref(mdiClipboardOutline),size:"22px",class:"q-mr-sm",color:"grey-8"},null,8,["name"]),_hoisted_4$4]),createVNode(C,{round:"",flat:"",dense:"",size:"sm",icon:unref(mdiClose),color:"grey-8",onClick:b[1]||(b[1]=V=>t.value=!1)},null,8,["icon"])]),createVNode(P,{flat:""},{default:withCtx(()=>[_hoisted_5$4,createBaseVNode("textarea",{class:"caixa-colagem",onInput:m},null,32)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["icon","disable"]),createVNode(C,{icon:unref(mdiClipboardOutline),round:"",class:"cursor-pointer q-ml-sm",color:"grey-3","text-color":"grey-7",disable:unref(o),title:"clique para colar da área de transferência",onClick:d},null,8,["icon","disable"])]))]}),_:1},8,["modelValue","label","error","error-message","loading","disable","color","bg-color","label-color","readonly"])),createVNode(y,{"dados-documento":unref(c).dadosDocumento},null,8,["dados-documento"])]),_:1})}}}),DocumentoLeitor_client_vue_vue_type_style_index_0_scoped_7d8b5032_lang="",__nuxt_component_0_client=_export_sfc(_sfc_main$a,[["__scopeId","data-v-7d8b5032"]]);function formatarSequencial(e,i=3){return("0".repeat(i)+e).slice(-i)}function formatarData(e){return e.toLocaleDateString()}function formatarCompetencia(e){return e.toLocaleDateString().split("/").slice(1).join("/")}function formatarNumero(e,i){return isNaN(e)||!e||e===0?"-":Intl.NumberFormat("pt-BR",{minimumFractionDigits:i||2}).format(e)}function formatarPercentual(e,i){return Intl.NumberFormat("pt-BR",{minimumFractionDigits:i||2}).format(e*100)+"%"}function fomatarTempoDeContribuicao(e){const i=e.anos===0?null:`${e.anos} ${e.anos===1?"ano":"anos"}`,r=e.meses===0?null:`${e.meses} ${e.meses===1?"mês":"meses"}`,o=e.dias===0?null:`${e.dias} ${e.dias===1?"dia":"dias"}`,t=[i,r,o].filter(n=>n!==null).join(", ");return t.substring(0,t.lastIndexOf(", "))+" e "+t.substring(t.lastIndexOf(", ")+1)}const _hoisted_1$7=createBaseVNode("div",{class:"text-blue-10 text-weight bold"},"Dados do Benefício",-1),_hoisted_2$7={class:"text-bold"},_sfc_main$9=defineComponent({__name:"CartaDadosBeneficio",setup(e){const i=useCarta(),r=()=>{var o,t,n,l,a,c,u,s,v,d,g,m,f;return[{rotulo:"Segurado(a)",valor:(o=i.dadosSegurado)==null?void 0:o.nome},{rotulo:"NIT",valor:(t=i.dadosSegurado)==null?void 0:t.nit},{rotulo:"NB",valor:(n=i.dadosSegurado)==null?void 0:n.nb},{rotulo:"Benefício",valor:((l=i.dadosSegurado)==null?void 0:l.especie)+" - "+((a=i.dadosSegurado)==null?void 0:a.descricao)},{rotulo:"DIB",valor:formatarData((c=i.dadosSegurado)==null?void 0:c.dib)},{rotulo:"DER",valor:formatarData((u=i.dadosSegurado)==null?void 0:u.der)},{rotulo:"DDB",valor:formatarData((s=i.dadosSegurado)==null?void 0:s.ddb)},{rotulo:"Salário-de-benefício",valor:formatarNumero(((v=i.dadosSegurado)==null?void 0:v.somaSalariosBeneficio)??((d=i.atividadeNormal)==null?void 0:d.salarioBeneficio)??0)},{rotulo:"Coeficiente",valor:formatarPercentual((g=i.dadosSegurado)==null?void 0:g.coeficiente)},{rotulo:"RMI",valor:formatarNumero(((m=i.dadosSegurado)==null?void 0:m.rmi)??((f=i.dadosSegurado)==null?void 0:f.rmiAlt))}]};return(o,t)=>{const n=__nuxt_component_1$3,l=__nuxt_component_3$4,a=__nuxt_component_2$1,c=__nuxt_component_8$2,u=__nuxt_component_9$1;return unref(i).identificado?(openBlock(),createBlock(u,{key:0,square:"",flat:"",bordered:""},{default:withCtx(()=>[createVNode(l,{class:"bg-blue-1"},{default:withCtx(()=>[createVNode(n,null,{default:withCtx(()=>[_hoisted_1$7]),_:1})]),_:1}),createVNode(a),createVNode(c,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(r(),(s,v)=>(openBlock(),createElementBlock("div",{key:`parametro-carta-${v}`},[createBaseVNode("span",null,toDisplayString(s.rotulo)+": ",1),createBaseVNode("span",_hoisted_2$7,toDisplayString(s.valor),1)]))),128))]),_:1})]),_:1})):createCommentVNode("",!0)}}}),_hoisted_1$6={class:"bg-grey-5"},_hoisted_2$6=["title"],_hoisted_3$4={class:"text-right"},_hoisted_4$3={class:"text-center"},_hoisted_5$3={class:"text-right"},_hoisted_6$3={class:"text-right"},_hoisted_7$3={class:"text-right"},_hoisted_8$3={key:1},_sfc_main$8=defineComponent({__name:"CartaTabelaSalarios",props:{salarios:{default:()=>[]}},setup(e){const i=e,r=computed(()=>Object.keys(i.salarios[0]).filter(c=>/^secundaria_[\d]+$/.test(c)).sort()),o=computed(()=>{if(!r.value.length)return[];const a=r.value;return a.length&&a.push("soma"),a}),t=computed(()=>r.value.length?["Seq.","Competência","Principal",...r.value.map(c=>`Secundária ${Number(c.split("_")[1])}`),"Soma","Índice","Total Corrigido"]:["Seq.","Competência","Valor Original","Índice","Valor Corrigido"]),n=a=>a.desconsiderado?"bg-grey-5":a.limitadoTeto?"bg-orange-3":"",l=a=>a.desconsiderado?"desconsiderado":a.limitadoTeto?"limitado ao teto":"";return(a,c)=>{const u=__nuxt_component_4$1;return a.salarios.length?(openBlock(),createBlock(u,{key:0,dense:"",bordered:"",square:"",flat:"",separator:"cell"},{default:withCtx(()=>[createBaseVNode("thead",null,[createBaseVNode("tr",_hoisted_1$6,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(t),(s,v)=>(openBlock(),createElementBlock("th",{key:`cabecalho-${v}`,class:"text-center"},toDisplayString(s),1))),128))])]),createBaseVNode("tbody",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.salarios,s=>(openBlock(),createElementBlock("tr",{key:`salario-seq-${s.seq}`,class:normalizeClass(n(s)),title:l(s)},[createBaseVNode("td",_hoisted_3$4,toDisplayString(unref(formatarSequencial)(s.seq)),1),createBaseVNode("td",_hoisted_4$3,toDisplayString(unref(formatarCompetencia)(s.competencia)),1),createBaseVNode("td",_hoisted_5$3,toDisplayString(unref(formatarNumero)(s.original)),1),unref(o).length?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(unref(o),(v,d)=>(openBlock(),createElementBlock("td",{key:`adicional-${s.seq}-${d}`,class:"text-right"},toDisplayString(unref(formatarNumero)(s[v])),1))),128)):createCommentVNode("",!0),createBaseVNode("td",_hoisted_6$3,toDisplayString(unref(formatarNumero)(s.indice,4)),1),createBaseVNode("td",_hoisted_7$3,toDisplayString(unref(formatarNumero)(s.corrigido)),1)],10,_hoisted_2$6))),128))])]),_:1})):(openBlock(),createElementBlock("div",_hoisted_8$3,"Dados não carregados"))}}}),CartaTabelaSalarios_vue_vue_type_style_index_0_scoped_89ffb877_lang="",__nuxt_component_1=_export_sfc(_sfc_main$8,[["__scopeId","data-v-89ffb877"]]),_withScopeId$1=e=>(pushScopeId("data-v-f5de5bc0"),e=e(),popScopeId(),e),_hoisted_1$5={class:"col"},_hoisted_2$5={class:"text-h6 text-weight-medium q-mb-sm"},_hoisted_3$3={class:"text-bold"},_hoisted_4$2={class:"col legenda-conteiner"},_hoisted_5$2={key:0,class:"legenda"},_hoisted_6$2=_withScopeId$1(()=>createBaseVNode("div",{class:"row justify-between items-center"},[createBaseVNode("div",{class:"row items-center justify-start"},[createBaseVNode("div",{class:"item-legenda-quadrado bg-grey-5 q-mx-sm"}),createBaseVNode("div",null,"Desconsiderado")]),createBaseVNode("div",{class:"row items-center justify-start q-mr-sm"},[createBaseVNode("div",{class:"item-legenda-quadrado bg-orange-3 q-mx-sm"}),createBaseVNode("div",null,"Limitado ao teto")])],-1)),_hoisted_7$2=[_hoisted_6$2],_hoisted_8$2={key:1},_sfc_main$7=defineComponent({__name:"CartaDadosPbc",props:{dados:{default:()=>({})},salarios:{default:()=>[]},titulo:{default:"Atividade Principal"},incluirLegenda:{type:Boolean,default:!1}},setup(e){const i=e,r=computed(()=>Object.keys(i.dados).length?[i.dados.pedagio?{rotulo:"Pedágio",valor:fomatarTempoDeContribuicao(i.dados.pedagio)}:null,i.dados.fatorPrevidenciario?{rotulo:"Fator Previdenciário (FP)",valor:formatarNumero(i.dados.fatorPrevidenciario,4)}:null,i.dados.tempoContribuicao?{rotulo:"Tempo de contribuição",valor:fomatarTempoDeContribuicao(i.dados.tempoContribuicao)}:null,i.dados.grupos?{rotulo:"Tempo de contribuição",valor:`${i.dados.grupos} grupos de 12 contribuições`}:null,i.dados.mesesAposPublicacaoLei?{rotulo:"Número de meses após a publicação da lei",valor:i.dados.mesesAposPublicacaoLei}:null,{rotulo:"Soma salários",valor:formatarNumero(i.dados.dividendo,2)??"-"},{rotulo:"Salários considerados",valor:i.dados.divisor??"-"},{rotulo:"Média",valor:formatarNumero(i.dados.media,2)??"-"},{rotulo:"Salário-de-benefício (média com FP)",valor:formatarNumero(i.dados.salarioBeneficio,2)??"-"},i.dados.portariaCorrecao?{rotulo:"Atualização",valor:`Portaria nº ${i.dados.portariaCorrecao}`}:null].filter(o=>o!==null):[]);return(o,t)=>{const n=__nuxt_component_8$2,l=__nuxt_component_1,a=__nuxt_component_9$1;return openBlock(),createBlock(a,{flat:"",square:""},{default:withCtx(()=>[createVNode(n,{class:"row q-ml-sm q-mr-sm"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$5,[createBaseVNode("div",_hoisted_2$5,toDisplayString(o.titulo),1),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(r),(c,u)=>(openBlock(),createElementBlock("div",{key:`dados-calculo-${u}`},[createBaseVNode("span",null,toDisplayString(c==null?void 0:c.rotulo)+":  ",1),createBaseVNode("span",_hoisted_3$3,toDisplayString(c==null?void 0:c.valor),1)]))),128))]),createBaseVNode("div",_hoisted_4$2,[o.incluirLegenda?(openBlock(),createElementBlock("div",_hoisted_5$2,_hoisted_7$2)):createCommentVNode("",!0)])]),_:1}),createVNode(n,null,{default:withCtx(()=>{var c,u;return[o.salarios.length||(u=(c=o.dados)==null?void 0:c.pbc)!=null&&u.length?(openBlock(),createBlock(l,{key:0,salarios:o.salarios.length?o.salarios:o.dados.pbc},null,8,["salarios"])):(openBlock(),createElementBlock("div",_hoisted_8$2,"Dados não carregados"))]}),_:1})]),_:1})}}}),CartaDadosPbc_vue_vue_type_style_index_0_scoped_f5de5bc0_lang="",__nuxt_component_5=_export_sfc(_sfc_main$7,[["__scopeId","data-v-f5de5bc0"]]),_hoisted_1$4=createBaseVNode("div",{class:"text-blue-10 text-weight bold"},"Dados do Cálculo",-1),_hoisted_2$4={key:0},_sfc_main$6=defineComponent({__name:"CartaDadosCalculo",setup(e){const i=useCarta(),r=ref("consolidacao"),o=computed(()=>{if(!i.atividadesSecundarias||!i.atividadesSecundarias.length||!i.salariosConsolidados)return null;const t=i.atividadesSecundarias.map((n,l)=>({label:`Secundária ${l+1}`,value:`secundaria-${l+1}`}));return t.unshift({label:"Principal",value:"principal"}),t.unshift({label:"Consolidação",value:"consolidacao"}),t});return(t,n)=>{const l=__nuxt_component_1$3,a=__nuxt_component_3$4,c=__nuxt_component_2$1,u=__nuxt_component_3$2,s=__nuxt_component_4$2,v=__nuxt_component_5,d=__nuxt_component_3$1,g=__nuxt_component_7$1,m=__nuxt_component_9$1;return unref(i).identificado?(openBlock(),createBlock(m,{key:0,square:"",flat:"",bordered:""},{default:withCtx(()=>{var f;return[createVNode(a,{class:"bg-blue-1"},{default:withCtx(()=>[createVNode(l,null,{default:withCtx(()=>[_hoisted_1$4]),_:1})]),_:1}),createVNode(c),unref(o)?(openBlock(),createElementBlock("div",_hoisted_2$4,[createVNode(s,{modelValue:unref(r),"onUpdate:modelValue":n[0]||(n[0]=p=>isRef(r)?r.value=p:null),"inline-label":"","active-color":"primary","indicator-color":"primary","no-caps":"","outside-arrows":"",shrink:"","left-icon":unref(mdiChevronLeft),"right-icon":unref(mdiChevronRight)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(o),p=>(openBlock(),createBlock(u,{key:`tab-${p.value}`,name:p.value,label:p.label,ripple:!1},null,8,["name","label"]))),128))]),_:1},8,["modelValue","left-icon","right-icon"]),createVNode(c),createVNode(g,{modelValue:unref(r),"onUpdate:modelValue":n[1]||(n[1]=p=>isRef(r)?r.value=p:null)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(o),(p,b)=>(openBlock(),createBlock(d,{key:`panel-${p.value}`,name:p.value},{default:withCtx(()=>[b===0?(openBlock(),createBlock(v,{key:0,salarios:unref(i).salariosConsolidados,titulo:"Salários Consolidados","incluir-legenda":!0},null,8,["salarios"])):b===1?(openBlock(),createBlock(v,{key:1,dados:unref(i).atividadePrincipal,titulo:"Atividade Principal","incluir-legenda":!0},null,8,["dados"])):(openBlock(),createBlock(v,{key:2,dados:unref(i).atividadesSecundarias[b-2],titulo:"Atividade Secundária"},null,8,["dados"]))]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])])):(openBlock(),createBlock(v,{key:1,dados:(f=unref(i))==null?void 0:f.atividadeNormal,titulo:"Período Básico de Cálculo","incluir-legenda":!0},null,8,["dados"]))]}),_:1})):createCommentVNode("",!0)}}}),_hoisted_1$3=createBaseVNode("div",{class:"text-blue-10 text-weight bold"},"Dados do(a) Segurado(a)",-1),_hoisted_2$3={class:"text-bold"},_sfc_main$5=defineComponent({__name:"CnisDadosSegurado",setup(e){const i=useCnis(),r=computed(()=>{var o,t,n,l,a;return[{rotulo:"Nome",valor:(o=i.dadosSegurado)==null?void 0:o.nome},{rotulo:"Nome da mãe",valor:(t=i.dadosSegurado)==null?void 0:t.mae},{rotulo:"CPF",valor:(n=i.dadosSegurado)==null?void 0:n.cpf},{rotulo:"NIT",valor:(l=i.dadosSegurado)==null?void 0:l.nit},{rotulo:"Data de nascimento",valor:formatarData((a=i.dadosSegurado)==null?void 0:a.nascimento)}]});return(o,t)=>{const n=__nuxt_component_1$3,l=__nuxt_component_3$4,a=__nuxt_component_2$1,c=__nuxt_component_8$2,u=__nuxt_component_9$1;return unref(i).identificado?(openBlock(),createBlock(u,{key:0,square:"",flat:"",bordered:""},{default:withCtx(()=>[createVNode(l,{class:"bg-blue-1"},{default:withCtx(()=>[createVNode(n,null,{default:withCtx(()=>[_hoisted_1$3]),_:1})]),_:1}),createVNode(a),createVNode(c,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(r),(s,v)=>(openBlock(),createElementBlock("div",{key:`parametro-carta-${v}`},[createBaseVNode("span",null,toDisplayString(s.rotulo)+": ",1),createBaseVNode("span",_hoisted_2$3,toDisplayString(s.valor),1)]))),128))]),_:1})]),_:1})):createCommentVNode("",!0)}}}),_hoisted_1$2={class:"bg-grey-5 q-pa-xs text-center",style:{width:"50px"}},_hoisted_2$2={class:"bg-grey-2 q-pa-xs text-center text-weight-bold",style:{"min-width":"60px"}},_hoisted_3$2={class:"bg-blue-2 q-pa-xs text-right text-weight-bold",style:{"min-width":"100px"}},_sfc_main$4=defineComponent({__name:"CnisDadosSalarios",props:{salarios:{default:()=>[]}},setup(e){const i=e,r=computed(()=>i.salarios.length.toString().length);return(o,t)=>{const n=__nuxt_component_8$2,l=__nuxt_component_9$1;return openBlock(),createBlock(l,{flat:"",square:""},{default:withCtx(()=>[createVNode(n,{class:"row wrap text-caption"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.salarios,(a,c)=>(openBlock(),createElementBlock("div",{key:`salario-${c}`,class:"row q-ma-xs justify-between bg-grey-3 text-weight-bold",style:{border:"1px solid #bdbdbd"}},[createBaseVNode("div",_hoisted_1$2,toDisplayString(`[${unref(formatarSequencial)(c+1,unref(r))}]`),1),createBaseVNode("div",_hoisted_2$2,toDisplayString(unref(formatarCompetencia)(a.competencia)),1),createBaseVNode("div",_hoisted_3$2,toDisplayString(unref(formatarNumero)(a.valor)),1)]))),128))]),_:1})]),_:1})}}}),_hoisted_1$1=createBaseVNode("div",{class:"text-subtitle1 text-weight-bold text-grey-9"},"Dados do Vínculo",-1),_hoisted_2$1=createBaseVNode("thead",null,[createBaseVNode("tr",null,[createBaseVNode("th",{class:"text-center"},"Seq."),createBaseVNode("th",{class:"text-center"},"Início"),createBaseVNode("th",{class:"text-center"},"Término"),createBaseVNode("th",{class:"text-center"},"Entidade"),createBaseVNode("th",{class:"text-center"},"Natureza")])],-1),_hoisted_3$1={class:"text-center"},_hoisted_4$1={class:"text-center"},_hoisted_5$1={class:"text-center"},_hoisted_6$1={class:"text-center"},_hoisted_7$1={class:"text-center"},_hoisted_8$1=createBaseVNode("div",{class:"text-subtitle1 text-weight-bold text-grey-9"},"Salários",-1),_sfc_main$3=defineComponent({__name:"CnisDetalhesVinculo",props:{title:{default:""},vinculo:{default:()=>({})}},setup(e){const i=ref(!1);return(r,o)=>{const t=__nuxt_component_8$1,n=__nuxt_component_1$3,l=__nuxt_component_2$3,a=__nuxt_component_3$4,c=__nuxt_component_4$1,u=__nuxt_component_9$1,s=__nuxt_component_8$2,v=_sfc_main$4,d=__nuxt_component_8,g=__q_directive_0$1;return openBlock(),createElementBlock(Fragment,null,[createVNode(t,{size:"sm",round:"",flat:"",dense:"",icon:unref(mdiOpenInNew),class:"q-ml-sm",title:r.title,onClick:o[0]||(o[0]=m=>i.value=!0)},null,8,["icon","title"]),createVNode(d,{modelValue:unref(i),"onUpdate:modelValue":o[1]||(o[1]=m=>isRef(i)?i.value=m:null)},{default:withCtx(()=>[createVNode(u,{style:{width:"800px","max-width":"90vw"}},{default:withCtx(()=>[createVNode(a,{class:"bg-grey-5"},{default:withCtx(()=>[createVNode(n,null,{default:withCtx(()=>[createTextVNode(" Detalhes Vínculo CNIS ")]),_:1}),createVNode(l),withDirectives(createVNode(t,{round:"",dense:"",flat:"",icon:unref(mdiClose)},null,8,["icon"]),[[g]])]),_:1}),createVNode(s,null,{default:withCtx(()=>[_hoisted_1$1,createVNode(u,null,{default:withCtx(()=>[createVNode(c,{flat:"",square:"",bordered:""},{default:withCtx(()=>[_hoisted_2$1,createBaseVNode("tbody",null,[createBaseVNode("tr",null,[createBaseVNode("td",_hoisted_3$1,toDisplayString(r.vinculo.seq),1),createBaseVNode("td",_hoisted_4$1,toDisplayString(("formatarData"in r?r.formatarData:unref(formatarData))(r.vinculo.dataInicial)),1),createBaseVNode("td",_hoisted_5$1,toDisplayString(r.vinculo.dataFinal?("formatarData"in r?r.formatarData:unref(formatarData))(r.vinculo.dataFinal):"-"),1),createBaseVNode("td",_hoisted_6$1,toDisplayString(r.vinculo.entidade),1),createBaseVNode("td",_hoisted_7$1,toDisplayString(r.vinculo.natureza===r.vinculo.entidade?"-":r.vinculo.natureza),1)])])]),_:1})]),_:1})]),_:1}),r.vinculo.salarios.length?(openBlock(),createBlock(s,{key:0,style:{"max-height":"70vh"},class:"scroll"},{default:withCtx(()=>{var m;return[_hoisted_8$1,createVNode(v,{salarios:(m=r.vinculo)==null?void 0:m.salarios},null,8,["salarios"])]}),_:1})):createCommentVNode("",!0)]),_:1})]),_:1},8,["modelValue"])],64)}}}),_sfc_main$2=defineComponent({__name:"CnisDadosVinculos",setup(e){const i=useCnis(),r=ref(null),o=l=>{r.value=r.value===l?null:l},t=l=>(l==null?void 0:l.length)===0?"Não há salários para este vínculo":`Ver ${l.length} salário${l.length>1?"s":""}`,n=[{name:"seq",label:"Seq.",field:"seq",required:!0,align:"right",sortable:!1,style:"width: 20px",headerStyle:"width: 20px",format:l=>formatarSequencial(l)},{name:"nit",label:"NIT",field:"nit",required:!1,align:"center",sortable:!1,style:"width: 50px",headerStyle:"width: 50px",format:l=>l||"-"},{name:"dataInicial",label:"Início",field:"dataInicial",required:!0,align:"center",sortable:!1,style:"width: 80px",headerStyle:"width: 80px",format:l=>formatarData(l)},{name:"dataFinal",label:"Término",field:"dataFinal",required:!0,align:"center",sortable:!1,style:"width: 80px",headerStyle:"width: 80px",format:l=>formatarData(l)},{name:"entidade",label:"Entidade",field:"entidade",required:!0,align:"left",sortable:!1,format:l=>l||"-"},{name:"natureza",label:"Natureza",field:"natureza",required:!0,align:"left",sortable:!1,format:(l,a)=>l===a.entidade?"-":l||"-"}];return(l,a)=>{const c=__nuxt_component_0,u=__nuxt_component_1$1,s=__nuxt_component_8$1,v=__nuxt_component_3,d=__nuxt_component_4$3,g=_sfc_main$3,m=_sfc_main$4,f=__nuxt_component_7,p=__nuxt_component_8$2,b=__nuxt_component_9$1;return unref(i).identificado?(openBlock(),createBlock(b,{key:0,square:"",flat:"",bordered:""},{default:withCtx(()=>[createVNode(p,null,{default:withCtx(()=>[unref(i).vinculos?(openBlock(),createBlock(f,{key:0,title:"Vínculos Previdenciários",rows:unref(i).vinculos,columns:n,"row-key":"seq",flat:"",square:"",bordered:"","title-class":"text-h6 text-weight-medium","icon-first-page":unref(mdiChevronDoubleLeft),"icon-last-page":unref(mdiChevronDoubleRight),"icon-next-page":unref(mdiChevronRight),"icon-prev-page":unref(mdiChevronLeft),"hide-pagination":!0,pagination:{rowsPerPage:0}},{header:withCtx(k=>[createVNode(u,{props:k},{default:withCtx(()=>[createVNode(c,{"auto-width":""}),(openBlock(!0),createElementBlock(Fragment,null,renderList(k.cols,C=>(openBlock(),createBlock(c,{key:C.name,props:k},{default:withCtx(()=>[createTextVNode(toDisplayString(C.label),1)]),_:2},1032,["props"]))),128)),createVNode(c,{style:{width:"30px"}},{default:withCtx(()=>[createTextVNode(" Salários ")]),_:1})]),_:2},1032,["props"])]),body:withCtx(k=>[createVNode(u,{props:k,class:normalizeClass(k.row.beneficio?"bg-grey-5":"")},{default:withCtx(()=>[createVNode(v,{"auto-width":"",class:"text-right"},{default:withCtx(()=>[withDirectives(createVNode(s,{size:"sm",round:"",flat:"",dense:"",icon:k.row.seq===unref(r)?unref(mdiChevronUp):unref(mdiChevronDown),title:t(k.row.salarios),class:"q-mr-sm cursor-pointer",color:"grey-7",onClick:C=>o(k.row.seq)},null,8,["icon","title","onClick"]),[[vShow,k.row.salarios.length>0]])]),_:2},1024),(openBlock(!0),createElementBlock(Fragment,null,renderList(k.cols,C=>(openBlock(),createBlock(v,{key:C.name,props:k},{default:withCtx(()=>[createTextVNode(toDisplayString(C.value),1)]),_:2},1032,["props"]))),128)),createVNode(v,{class:"text-right"},{default:withCtx(()=>[createVNode(d,{dense:"",dark:"",square:"",disable:k.row.salarios.length===0,color:"grey-7"},{default:withCtx(()=>[createTextVNode(toDisplayString(k.row.salarios.length),1)]),_:2},1032,["disable"]),createVNode(g,{vinculo:k.row,title:"Ver detalhes"},null,8,["vinculo"])]),_:2},1024)]),_:2},1032,["props","class"]),withDirectives(createVNode(u,{props:k},{default:withCtx(()=>[createVNode(v,{colspan:"100%"},{default:withCtx(()=>[createVNode(m,{salarios:k.row.salarios},null,8,["salarios"])]),_:2},1024)]),_:2},1032,["props"]),[[vShow,k.row.seq===unref(r)]])]),_:1},8,["rows","icon-first-page","icon-last-page","icon-next-page","icon-prev-page"])):createCommentVNode("",!0)]),_:1})]),_:1})):createCommentVNode("",!0)}}});function _typeof(e){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof(e)}function _defineProperty(e,i,r){return i in e?Object.defineProperty(e,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[i]=r,e}function ownKeys(e,i){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);i&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function _objectSpread2(e){for(var i=1;i<arguments.length;i++){var r=arguments[i]!=null?arguments[i]:{};i%2?ownKeys(Object(r),!0).forEach(function(o){_defineProperty(e,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))})}return e}function _newArrowCheck(e,i){if(e!==i)throw new TypeError("Cannot instantiate an arrow function")}function _slicedToArray(e,i){return _arrayWithHoles(e)||_iterableToArrayLimit(e,i)||_unsupportedIterableToArray(e,i)||_nonIterableRest()}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArray(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function _iterableToArrayLimit(e,i){if(typeof Symbol<"u"&&Symbol.iterator in Object(e)){var r=[],o=!0,t=!1,n=void 0;try{for(var l,a=e[Symbol.iterator]();!(o=(l=a.next()).done)&&(r.push(l.value),!i||r.length!==i);o=!0);}catch(c){t=!0,n=c}finally{try{o||a.return==null||a.return()}finally{if(t)throw n}}return r}}function _unsupportedIterableToArray(e,i){if(e){if(typeof e=="string")return _arrayLikeToArray(e,i);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,i):void 0}}function _arrayLikeToArray(e,i){(i==null||i>e.length)&&(i=e.length);for(var r=0,o=new Array(i);r<i;r++)o[r]=e[r];return o}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _createForOfIteratorHelper(e,i){var r;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||i&&e&&typeof e.length=="number"){r&&(e=r);var o=0,t=function(){};return{s:t,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(c){throw c},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var n,l=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var c=r.next();return l=c.done,c},e:function(c){a=!0,n=c},f:function(){try{l||r.return==null||r.return()}finally{if(a)throw n}}}}function defaults(e){e.defaults={attributes:[["allowColumnReordering",!0],["allowColumnResize",!0],["allowColumnResizeFromCell",!1],["allowFreezingRows",!1],["allowFreezingColumns",!1],["allowMovingSelection",!0],["allowRowHeaderResize",!0],["allowRowReordering",!1],["allowRowResize",!0],["allowRowResizeFromCell",!1],["allowSorting",!0],["allowGroupingRows",!0],["allowGroupingColumns",!0],["animationDurationShowContextMenu",50],["animationDurationHideContextMenu",50],["autoGenerateSchema",!1],["autoResizeColumns",!1],["autoResizeRows",!1],["autoScrollOnMousemove",!1],["autoScrollMargin",5],["allowShrinkingSelection",!1],["blanksText","(Blanks)"],["borderDragBehavior","none"],["borderResizeZone",10],["clearCellsWhenShrinkingSelection",!1],["clearSettingsOptionText","Clear saved settings"],["columnHeaderClickBehavior","sort"],["columnSelectorHiddenText","&nbsp;&nbsp;&nbsp;"],["columnSelectorText","Add/Remove columns"],["columnSelectorVisibleText","✓"],["contextHoverScrollAmount",2],["contextHoverScrollRateMs",5],["copyHeadersOnSelectAll",!0],["copyText","Copy"],["debug",!1],["editable",!0],["ellipsisText","..."],["filterOptionText","Filter %s"],["filterTextPrefix","(filtered) "],["filterFrozenRows",!0],["globalRowResize",!1],["hideColumnText","Hide %s"],["showUnhideColumnsIndicator",!1],["showUnhideRowsIndicator",!1],["showHideRow","Hide row %s"],["showHideRows","Hide rows %s"],["hoverMode","cell"],["keepFocusOnMouseOut",!1],["maxAutoCompleteItems",200],["multiLine",!1],["name",""],["pageUpDownOverlap",1],["pasteText","Paste"],["persistantSelectionMode",!1],["removeFilterOptionText","Remove filter on %s"],["reorderDeadZone",3],["resizeAfterDragged",!1],["resizeScrollZone",20],["rowGrabZoneSize",5],["columnGrabZoneSize",30],["saveAppearance",!0],["scrollAnimationPPSThreshold",.75],["scrollPointerLock",!1],["scrollRepeatRate",75],["selectionFollowsActiveCell",!1],["selectionHandleBehavior","none"],["selectionMode","cell"],["selectionScrollIncrement",20],["selectionScrollZone",20],["showClearSettingsOption",!0],["showColumnHeaders",!0],["showColumnSelector",!0],["showCopy",!1],["showFilter",!0],["showFilterInCell",!1],["showNewRow",!1],["showOrderByOption",!0],["showOrderByOptionTextAsc","Order by %s ascending"],["showOrderByOptionTextDesc","Order by %s descending"],["showGroupColumns","Group columns %s"],["showGroupRows","Group rows %s"],["showRemoveGroupColumns","Remove group %s"],["showRemoveGroupRows","Remove group %s"],["showRemoveAllGroupColumns","Remove all column groups"],["showRemoveAllGroupRows","Remove all row groups"],["showExpandAllGroupColumns","Expand all column groups"],["showExpandAllGroupRows","Expand all row groups"],["showCollapseAllGroupColumns","Collapse all column groups"],["showCollapseAllGroupRows","Collapse all row groups"],["columnGroupIndicatorPosition","right"],["rowGroupIndicatorPosition","bottom"],["showPaste",!1],["showPerformance",!1],["showRowHeaders",!0],["showRowNumbers",!0],["showRowNumberGaps",!0],["singleSelectionMode",!1],["snapToRow",!1],["sortFrozenRows",!0],["touchContextMenuTimeMs",800],["touchDeadZone",3],["touchEasingMethod","easeOutQuad"],["touchReleaseAcceleration",1e3],["touchReleaseAnimationDurationMs",2e3],["touchScrollZone",20],["touchSelectHandleZone",20],["touchZoomSensitivity",.005],["touchZoomMin",.5],["touchZoomMax",1.75],["maxPixelRatio",2],["tree",!1],["treeHorizontalScroll",!1],["rowTree",[]],["rowTreeColIndex",0],["columnTree",[]],["columnTreeRowStartIndex",0],["columnTreeRowEndIndex",0]],styles:[["activeCellBackgroundColor","rgba(255, 255, 255, 1)"],["activeCellBorderColor","rgba(110, 168, 255, 1)"],["activeCellBorderWidth",1],["activeCellColor","rgba(0, 0, 0, 1)"],["activeCellFont","16px sans-serif"],["activeCellHoverBackgroundColor","rgba(255, 255, 255, 1)"],["activeCellHorizontalAlignment","left"],["activeCellHoverColor","rgba(0, 0, 0, 1)"],["activeCellOverlayBorderColor","rgba(66, 133, 244, 1)"],["activeCellOverlayBorderWidth",1],["activeCellPaddingBottom",5],["activeCellPaddingLeft",5],["activeCellPaddingRight",5],["activeCellPaddingTop",5],["activeCellSelectedBackgroundColor","rgba(236, 243, 255, 1)"],["activeCellSelectedColor","rgba(0, 0, 0, 1)"],["activeCellVerticalAlignment","center"],["activeColumnHeaderCellBackgroundColor","rgba(225, 225, 225, 1)"],["activeColumnHeaderCellColor","rgba(0, 0, 0, 1)"],["activeRowHeaderCellBackgroundColor","rgba(225, 225, 225, 1)"],["activeRowHeaderCellColor","rgba(0, 0, 0, 1)"],["autocompleteBottomMargin",60],["autosizeHeaderCellPadding",8],["autosizePadding",5],["buttonActiveBackgroundColor","rgba(255, 255, 255, 1)"],["buttonActiveBorderColor","rgba(110, 168, 255, 1)"],["buttonArrowColor","rgba(50, 50, 50, 1)"],["buttonArrowDownHTML","&#x25BC;"],["buttonZIndex",1e4],["buttonBackgroundColor","rgba(255, 255, 255, 1)"],["buttonBorderColor","rgba(172, 172, 172, 1)"],["buttonHoverBackgroundColor","rgba(240, 240, 240, 1)"],["buttonMenuWindowMargin",30],["buttonPadding","3px"],["cellAutoResizePadding",13],["cellBackgroundColor","rgba(255, 255, 255, 1)"],["cellBorderColor","rgba(195, 199, 202, 1)"],["cellBorderWidth",1],["cellColor","rgba(0, 0, 0, 1)"],["cellFont","16px sans-serif"],["cellGridHeight",250],["cellHeight",24],["cellHeightWithChildGrid",150],["cellHorizontalAlignment","left"],["cellHoverBackgroundColor","rgba(255, 255, 255, 1)"],["cellHoverColor","rgba(0, 0, 0, 1)"],["cellPaddingBottom",5],["cellPaddingLeft",5],["cellPaddingRight",5],["cellPaddingTop",5],["cellSelectedBackgroundColor","rgba(236, 243, 255, 1)"],["cellSelectedColor","rgba(0, 0, 0, 1)"],["cellTreeIconBorderColor","rgba(162, 174, 207, 1)"],["cellTreeIconFillColor","rgba(240, 240, 240, 1)"],["cellTreeIconHoverFillColor","rgba(198, 217, 233, 1)"],["cellTreeIconLineColor","rgba(43, 53, 81, 1)"],["cellTreeIconLineWidth",1.5],["cellTreeIconMarginLeft",0],["cellTreeIconMarginRight",5],["cellTreeIconMarginTop",6],["cellTreeIconWidth",13],["cellVerticalAlignment","center"],["cellWidth",250],["cellWidthWithChildGrid",250],["cellWhiteSpace","nowrap"],["cellLineHeight",1],["cellLineSpacing",3],["childContextMenuArrowColor","rgba(43, 48, 43, 1)"],["childContextMenuArrowHTML","&#x25BA;"],["childContextMenuMarginLeft",-11],["childContextMenuMarginTop",-6],["columnGroupRowHeight",25],["columnHeaderCellBackgroundColor","rgba(240, 240, 240, 1)"],["columnHeaderCellBorderColor","rgba(172, 172, 172, 1)"],["columnHeaderCellBorderWidth",1],["columnHeaderCellCapBackgroundColor","rgba(240, 240, 240, 1)"],["columnHeaderCellCapBorderColor","rgba(172, 172, 172, 1)"],["columnHeaderCellCapBorderWidth",1],["columnHeaderCellColor","rgba(50, 50, 50, 1)"],["columnHeaderCellFont","16px sans-serif"],["columnHeaderCellHeight",25],["columnHeaderCellHorizontalAlignment","left"],["columnHeaderCellHoverBackgroundColor","rgba(235, 235, 235, 1)"],["columnHeaderCellHoverColor","rgba(0, 0, 0, 1)"],["columnHeaderCellPaddingBottom",5],["columnHeaderCellPaddingLeft",5],["columnHeaderCellPaddingRight",5],["columnHeaderCellPaddingTop",5],["columnHeaderCellVerticalAlignment","center"],["columnHeaderOrderByArrowBorderColor","rgba(195, 199, 202, 1)"],["columnHeaderOrderByArrowBorderWidth",1],["columnHeaderOrderByArrowColor","rgba(155, 155, 155, 1)"],["columnHeaderOrderByArrowHeight",8],["columnHeaderOrderByArrowMarginLeft",0],["columnHeaderOrderByArrowMarginRight",5],["columnHeaderOrderByArrowMarginTop",6],["columnHeaderOrderByArrowWidth",13],["contextFilterButtonBorder","solid 1px rgba(158, 163, 169, 1)"],["contextFilterButtonBorderRadius","3px"],["contextFilterButtonHTML","&#x25BC;"],["contextFilterInputBackground","rgba(255,255,255,1)"],["contextFilterInputBorder","solid 1px rgba(158, 163, 169, 1)"],["contextFilterInputBorderRadius","0"],["contextFilterInputColor","rgba(0,0,0,1)"],["contextFilterInputFontFamily","sans-serif"],["contextFilterInputFontSize","14px"],["contextFilterInvalidRegExpBackground","rgba(180, 6, 1, 1)"],["contextFilterInvalidRegExpColor","rgba(255, 255, 255, 1)"],["contextMenuArrowColor","rgba(43, 48, 43, 1)"],["contextMenuArrowDownHTML","&#x25BC;"],["contextMenuArrowUpHTML","&#x25B2;"],["contextMenuBackground","rgba(240, 240, 240, 1)"],["contextMenuBorder","solid 1px rgba(158, 163, 169, 1)"],["contextMenuBorderRadius","3px"],["contextMenuChildArrowFontSize","12px"],["contextMenuColor","rgba(43, 48, 43, 1)"],["contextMenuCursor","default"],["contextMenuFilterButtonFontFamily","sans-serif"],["contextMenuFilterButtonFontSize","10px"],["contextMenuFilterInvalidExpresion","rgba(237, 155, 156, 1)"],["contextMenuFontFamily","sans-serif"],["contextMenuFontSize","16px"],["contextMenuHoverBackground","rgba(182, 205, 250, 1)"],["contextMenuHoverColor","rgba(43, 48, 153, 1)"],["contextMenuItemBorderRadius","3px"],["contextMenuItemMargin","2px"],["contextMenuLabelDisplay","inline-block"],["contextMenuLabelMargin","0 3px 0 0"],["contextMenuLabelMaxWidth","700px"],["contextMenuLabelMinWidth","75px"],["contextMenuMarginLeft",3],["contextMenuMarginTop",-3],["contextMenuOpacity","0.98"],["contextMenuPadding","2px"],["contextMenuWindowMargin",30],["contextMenuZIndex",1e4],["cornerCellBackgroundColor","rgba(240, 240, 240, 1)"],["cornerCellBorderColor","rgba(202, 202, 202, 1)"],["debugBackgroundColor","rgba(0, 0, 0, .0)"],["debugColor","rgba(255, 15, 24, 1)"],["debugEntitiesColor","rgba(76, 231, 239, 1.00)"],["debugFont","11px sans-serif"],["debugPerfChartBackground","rgba(29, 25, 26, 1.00)"],["debugPerfChartTextColor","rgba(255, 255, 255, 0.8)"],["debugPerformanceColor","rgba(252, 255, 37, 1.00)"],["debugScrollHeightColor","rgba(248, 33, 103, 1.00)"],["debugScrollWidthColor","rgba(66, 255, 27, 1.00)"],["debugTouchPPSXColor","rgba(246, 102, 24, 1.00)"],["debugTouchPPSYColor","rgba(186, 0, 255, 1.00)"],["display","inline-block"],["editCellBackgroundColor","white"],["editCellBorder","solid 1px rgba(110, 168, 255, 1)"],["editCellBoxShadow","0 2px 5px rgba(0,0,0,0.4)"],["editCellColor","black"],["editCellFontFamily","sans-serif"],["editCellFontSize","16px"],["editCellPaddingLeft",4],["editCellZIndex",1e4],["filterButtonActiveBackgroundColor","rgba(225, 225, 225, 1)"],["filterButtonArrowBorderColor","rgba(195, 199, 202, 1)"],["filterButtonArrowBorderWidth",1],["filterButtonArrowClickRadius",5],["filterButtonArrowColor","rgba(50, 50, 50, 1)"],["filterButtonArrowHeight",5],["filterButtonArrowWidth",8],["filterButtonBackgroundColor","rgba(240, 240, 240, 1)"],["filterButtonBorderColor","rgba(172, 172, 172, 1)"],["filterButtonBorderRadius",3],["filterButtonHeight",20],["filterButtonHoverBackgroundColor","rgba(235, 235, 235, 1)"],["filterButtonMenuOffsetTop",10],["filterButtonWidth",20],["frozenMarkerHoverColor","rgba(165, 198, 254, 1)"],["frozenMarkerHoverBorderColor","rgba(165, 198, 254, 1)"],["frozenMarkerActiveColor","rgba(165, 198, 254, 0.2)"],["frozenMarkerActiveBorderColor","rgba(165, 198, 254, 0.5)"],["frozenMarkerActiveHeaderColor","rgba(165, 198, 254, 1)"],["frozenMarkerColor","rgba(221, 221, 221, 1)"],["frozenMarkerBorderColor","rgba(221, 221, 221, 1)"],["frozenMarkerBorderWidth",1],["frozenMarkerHeaderColor","rgba(188, 188, 188, 1)"],["frozenMarkerWidth",4],["groupingAreaBackgroundColor","rgba(240, 240, 240, 1)"],["gridBackgroundColor","rgba(240, 240, 240, 1)"],["gridBorderCollapse","collapse"],["gridBorderColor","rgba(202, 202, 202, 1)"],["gridBorderWidth",1],["groupIndicatorColor","rgba(155, 155, 155, 1)"],["groupIndicatorBackgroundColor","rgba(255, 255, 255, 1)"],["height","auto"],["maxHeight","inherit"],["maxWidth","inherit"],["minColumnWidth",45],["minHeight","inherit"],["minRowHeight",24],["minWidth","inherit"],["mobileContextMenuMargin",10],["mobileEditInputHeight",30],["mobileEditFontFamily","sans-serif"],["mobileEditFontSize","16px"],["moveOverlayBorderWidth",1],["moveOverlayBorderColor","rgba(66, 133, 244, 1)"],["moveOverlayBorderSegments","12, 7"],["name","default"],["overflowY","auto"],["overflowX","auto"],["reorderMarkerBackgroundColor","rgba(0, 0, 0, 0.1)"],["reorderMarkerBorderColor","rgba(0, 0, 0, 0.2)"],["reorderMarkerBorderWidth",1.25],["reorderMarkerIndexBorderColor","rgba(66, 133, 244, 1)"],["reorderMarkerIndexBorderWidth",2.75],["resizeMarkerColor","rgba(0, 0, 0, 0.2)"],["resizeMarkerSize",2],["rowGroupColumnWidth",25],["rowHeaderCellBackgroundColor","rgba(240, 240, 240, 1)"],["rowHeaderCellBorderColor","rgba(200, 200, 200, 1)"],["rowHeaderCellBorderWidth",1],["rowHeaderCellColor","rgba(50, 50, 50, 1)"],["rowHeaderCellFont","16px sans-serif"],["rowHeaderCellHeight",25],["rowHeaderCellHorizontalAlignment","left"],["rowHeaderCellHoverBackgroundColor","rgba(235, 235, 235, 1)"],["rowHeaderCellHoverColor","rgba(0, 0, 0, 1)"],["rowHeaderCellPaddingBottom",5],["rowHeaderCellPaddingLeft",5],["rowHeaderCellPaddingRight",5],["rowHeaderCellPaddingTop",5],["rowHeaderCellRowNumberGapHeight",5],["rowHeaderCellRowNumberGapColor","rgba(50, 50, 50, 1)"],["rowHeaderCellSelectedBackgroundColor","rgba(217, 217, 217, 1)"],["rowHeaderCellSelectedColor","rgba(50, 50, 50, 1)"],["rowHeaderCellVerticalAlignment","center"],["rowHeaderCellWidth",57],["scrollBarActiveColor","rgba(125, 125, 125, 1)"],["scrollBarBackgroundColor","rgba(240, 240, 240, 1)"],["scrollBarBorderColor","rgba(202, 202, 202, 1)"],["scrollBarBorderWidth",.5],["scrollBarBoxBorderRadius",4.125],["scrollBarBoxColor","rgba(192, 192, 192, 1)"],["scrollBarBoxMargin",2],["scrollBarBoxMinSize",15],["scrollBarBoxWidth",8],["scrollBarCornerBackgroundColor","rgba(240, 240, 240, 1)"],["scrollBarCornerBorderColor","rgba(202, 202, 202, 1)"],["scrollBarWidth",11],["selectionHandleBorderColor","rgba(255, 255, 255, 1)"],["selectionHandleBorderWidth",1.5],["selectionHandleColor","rgba(66, 133, 244, 1)"],["selectionHandleSize",8],["selectionHandleType","square"],["fillOverlayBorderColor","rgba(127, 127, 127, 1)"],["fillOverlayBorderWidth",2],["selectionOverlayBorderColor","rgba(66, 133, 244, 1)"],["selectionOverlayBorderWidth",1],["treeArrowBorderColor","rgba(195, 199, 202, 1)"],["treeArrowBorderWidth",1],["treeArrowClickRadius",5],["treeArrowColor","rgba(155, 155, 155, 1)"],["treeArrowHeight",8],["treeArrowMarginLeft",0],["treeArrowMarginRight",5],["treeArrowMarginTop",6],["treeArrowWidth",13],["treeGridHeight",250],["unhideIndicatorColor","rgba(0, 0, 0, 1)"],["unhideIndicatorBackgroundColor","rgba(255, 255, 255, 1)"],["unhideIndicatorBorderColor","rgba(174, 193, 232, 1)"],["unhideIndicatorSize",16],["width","auto"]]}}function component(){var e,i={};return i.dehyphenateProperty=function(r){r=r.replace("--cdg-","");var o,t="";return Array.prototype.forEach.call(r,function(n){if(o)return o=!1,void(t+=n.toUpperCase());n!=="-"?t+=n:o=!0}),t},i.hyphenateProperty=function(r,o){var t="";return Array.prototype.forEach.call(r,function(n){n!==n.toUpperCase()?t+=n:t+="-"+n.toLowerCase()}),(o?"--cdg-":"")+t},i.applyComponentStyle=function(r,o){if(o.isComponent){var t=window.getComputedStyle(o.tagName==="CANVAS-DATAGRID"?o:o.canvas,null),n={};o.computedStyle=t,defaults(n),n.defaults.styles.forEach(function(l){var a;(a=t.getPropertyValue(i.hyphenateProperty(l[0],!0)))===""&&(a=t.getPropertyValue(i.hyphenateProperty(l[0],!1))),a!==""&&typeof a=="string"&&o.setStyleProperty(l[0],e[_typeof(l[1])](a.replace(/^\s+/,"").replace(/\s+$/,""),l[1]),!0)}),!r&&o.dispatchEvent&&(requestAnimationFrame(function(){o.resize(!0)}),o.dispatchEvent("stylechanged",o.style))}},e={data:function(r){try{return JSON.parse(r)}catch{throw new Error("Cannot read JSON data in canvas-datagrid data.")}},schema:function(r){try{return JSON.parse(r)}catch{throw new Error("Cannot read JSON data in canvas-datagrid schema attribute.")}},number:function(r,o){var t=parseInt(r,10);return isNaN(t)?o:t},boolean:function(r){return/true/i.test(r)},string:function(r){return r}},i.getObservableAttributes=function(){var r={},o=["data","schema","style","className","name"];return defaults(r),r.defaults.attributes.forEach(function(t){o.push(t[0].toLowerCase())}),o},i.disconnectedCallback=function(){this.connected=!1},i.connectedCallback=function(){var r=this;r.parentDOMNode.innerHTML="",r.parentDOMNode.appendChild(r.canvas),r.connected=!0,i.observe(r),i.applyComponentStyle(!0,r),r.resize(!0)},i.adoptedCallback=function(){this.resize()},i.attributeChangedCallback=function(r,o,t){var n,l,a=this;if(r!=="style"){if(r==="data")return a.dataType==="application/x-canvas-datagrid"&&(a.dataType="application/json+x-canvas-datagrid"),void(a.data=t);if(r!=="schema")if(r!=="name"){if(r!=="class"&&r!=="className"){var c,u,s;if(c="attributes",u=r,defaults(s={}),l=s.defaults[c].filter(function(v){return v[0].toLowerCase()===u.toLowerCase()||i.hyphenateProperty(v[0])===u.toLowerCase()||i.hyphenateProperty(v[0],!0)===u.toLowerCase()})[0],l)return n=e[_typeof(l[1])],void(a.attributes[l[0]]=n(t));/^on/.test(r)&&a.addEventListener("on"+r,Function("e",t))}}else a.name=t;else a.schema=e.schema(t)}else i.applyComponentStyle(!1,a)},i.observe=function(r){var o;window.MutationObserver&&(r.applyComponentStyle=function(){i.applyComponentStyle(!1,r),r.resize()},(o=new window.MutationObserver(function(t){var n,l;Array.prototype.forEach.call(t,function(a){a.attributeName!=="class"&&a.attributeName!=="style"&&a.target.nodeName!=="STYLE"?a.target.parentNode&&a.target.parentNode.nodeName==="STYLE"?l=!0:a.target===r&&(a.addedNodes.length>0||a.type==="characterData")&&(n=!0):l=!0}),l&&r.applyComponentStyle(!1,r),n&&(r.dataType==="application/x-canvas-datagrid"&&(r.dataType="application/json+x-canvas-datagrid"),r.data=r.innerHTML)})).observe(r,{characterData:!0,childList:!0,attributes:!0,subtree:!0}),Array.prototype.forEach.call(document.querySelectorAll("style"),function(t){o.observe(t,{characterData:!0,childList:!0,attributes:!0,subtree:!0})}))},i}var _this=void 0,SelectionType={UnselectedCells:0,Cells:1,Rows:2,Columns:3},swapProps=function(e,i,r){_newArrowCheck(this,_this);var o=e[i];e[i]=e[r],e[r]=o}.bind(void 0),normalizeSelection=function(e){if(_newArrowCheck(this,_this),!e)return e;switch(e.type){case SelectionType.UnselectedCells:case SelectionType.Cells:typeof e.endRow!="number"?e.endRow=e.startRow:e.endRow<e.startRow&&swapProps(e,"startRow","endRow"),typeof e.endColumn!="number"?e.endColumn=e.startColumn:e.endColumn<e.startColumn&&swapProps(e,"startColumn","endColumn");break;case SelectionType.Rows:typeof e.endRow!="number"?e.endRow=e.startRow:e.endRow<e.startRow&&swapProps(e,"startRow","endRow");break;case SelectionType.Columns:typeof e.endColumn!="number"?e.endColumn=e.startColumn:e.endColumn<e.startColumn&&swapProps(e,"startColumn","endColumn")}return e}.bind(void 0);(function(e){var i=this;if(_newArrowCheck(this,_this),typeof e=="string"){var r=e.indexOf(":");if(!(r<0)){var o=e.slice(0,r),t=e.slice(r+1).split(/[,:;-]+/).map(function(n){return _newArrowCheck(this,i),parseInt(n,10)}.bind(this));switch(o){case"cell":case"cells":case"-cell":case"-cells":return normalizeSelection({type:SelectionType[o[0]==="-"?"UnselectedCells":"Cells"],startRow:t[0],startColumn:t[1],endRow:t[2],endColumn:t[3]});case"row":case"rows":return normalizeSelection({type:SelectionType.Rows,startRow:t[0],endRow:t[1]});case"col":case"cols":return normalizeSelection({type:SelectionType.Columns,startColumn:t[0],endColumn:t[1]})}}}}).bind(void 0);var isSameCellsBlock=function(e,i){return _newArrowCheck(this,_this),e.startRow===i.startRow&&e.endRow===i.endRow&&e.startColumn===i.startColumn&&e.endColumn===i.endColumn}.bind(void 0),mergeCellsIntoRowsOrColumns=function(e,i){return _newArrowCheck(this,_this),i.type===SelectionType.Rows?e.startRow>=i.startRow&&e.endRow<=i.endRow?i:void 0:e.startColumn>=i.startColumn&&e.endColumn<=i.endColumn?i:void 0}.bind(void 0),mergeSelections=function(e,i){if(_newArrowCheck(this,_this),e.type!==i.type)return i.type<=SelectionType.Cells&&e.type>SelectionType.Cells?mergeCellsIntoRowsOrColumns(i,e):e.type<=SelectionType.Cells&&i.type>SelectionType.Cells?mergeCellsIntoRowsOrColumns(e,i):void 0;var r=e.type===SelectionType.Columns||e.startRow===i.startRow&&e.endRow===i.endRow,o=e.type===SelectionType.Rows||e.startColumn===i.startColumn&&e.endColumn===i.endColumn;if(r)return o?e:i.startColumn>e.endColumn+1||i.endColumn<e.startColumn-1?void 0:Object.assign({},e,{startColumn:Math.min(e.startColumn,i.startColumn),endColumn:Math.max(e.endColumn,i.endColumn)});if(o)return i.startRow>e.endRow+1||i.endRow<e.startRow-1?void 0:Object.assign({},e,{startRow:Math.min(e.startRow,i.startRow),endRow:Math.max(e.endRow,i.endRow)});if(e.type===SelectionType.Cells||e.type===SelectionType.UnselectedCells){var t=_getIntersection(e,i);if(t){if(isSameCellsBlock(t,e))return i;if(isSameCellsBlock(t,i))return e}}}.bind(void 0),removePartOfRowsSelection=function(e,i){if(_newArrowCheck(this,_this),!(i.endRow<e.startRow||i.startRow>e.endRow))return i.startRow<=e.startRow?i.endRow>=e.endRow?[]:[Object.assign({},e,{startRow:i.endRow+1})]:i.endRow>=e.endRow?[Object.assign({},e,{endRow:i.startRow-1})]:[Object.assign({},e,{endRow:i.startRow-1}),Object.assign({},e,{startRow:i.endRow+1})]}.bind(void 0),removePartOfColumnsSelection=function(e,i){if(_newArrowCheck(this,_this),!(i.endColumn<e.startColumn||i.startColumn>e.endColumn))return i.startColumn<=e.startColumn?i.endColumn>=e.endColumn?[]:[Object.assign({},e,{startColumn:i.endColumn+1})]:i.endColumn>=e.endColumn?[Object.assign({},e,{endColumn:i.startColumn-1})]:[Object.assign({},e,{endColumn:i.startColumn-1}),Object.assign({},e,{startColumn:i.endColumn+1})]}.bind(void 0),removePartOfCellsSelection=function(e,i){_newArrowCheck(this,_this);var r=_getIntersection(e,i);if(r){if(isSameCellsBlock(e,r))return[];var o=[],t=e.startRow,n=e.endRow,l=e.endColumn;return r.startRow>e.startRow&&(o.push(Object.assign({},e,{endRow:r.startRow-1})),t=r.startRow),r.endColumn<e.endColumn&&(o.push(Object.assign({},e,{startRow:t,startColumn:r.endColumn+1})),l=r.endColumn),r.endRow<e.endRow&&(o.push(Object.assign({},e,{endColumn:l,startRow:r.endRow+1})),n=r.endRow),r.startColumn>e.startColumn&&o.push(Object.assign({},e,{startRow:t,endRow:n,endColumn:r.startColumn-1})),o}}.bind(void 0),_getIntersection=function(e,i){if(_newArrowCheck(this,_this),e.type>i.type)return _getIntersection(i,e);if(e.type<=SelectionType.Cells){if(i.type<=SelectionType.Cells){var r=Math.max(e.startColumn,i.startColumn),o=Math.min(e.endColumn,i.endColumn);if(r>o)return;var t=Math.max(e.startRow,i.startRow),n=Math.min(e.endRow,i.endRow);return t>n?void 0:{type:SelectionType.Cells,startRow:t,startColumn:r,endRow:n,endColumn:o}}if(i.type===SelectionType.Rows){var l=Math.max(e.startRow,i.startRow),a=Math.min(e.endRow,i.endRow);return l>a?void 0:{type:SelectionType.Cells,startRow:l,startColumn:e.startColumn,endRow:a,endColumn:e.endColumn}}var c=Math.max(e.startColumn,i.startColumn),u=Math.min(e.endColumn,i.endColumn);return c>u?void 0:{type:SelectionType.Cells,startColumn:c,startRow:e.startRow,endColumn:u,endRow:e.endRow}}if(e.type===SelectionType.Rows){if(i.type===SelectionType.Rows){var s=Math.max(e.startRow,i.startRow),v=Math.min(e.endRow,i.endRow);return s>v?void 0:{type:SelectionType.Rows,startRow:s,endRow:v}}return{type:SelectionType.Cells,startRow:e.startRow,startColumn:i.startColumn,endRow:e.endRow,endColumn:i.endColumn}}var d=Math.max(e.startColumn,i.startColumn),g=Math.min(e.endColumn,i.endColumn);return d>g?void 0:{type:SelectionType.Columns,startColumn:d,endColumn:g}}.bind(void 0),_addIntoSelections=function(e,i,r){if(_newArrowCheck(this,_this),!i||typeof i.type!="number")return!1;if(i.type===SelectionType.Cells){for(var o=0;o<e.length;o++){var t=e[o];if(t.type!==SelectionType.UnselectedCells){if(t.type===SelectionType.Cells){var n=removePartOfCellsSelection(i,t);if(Array.isArray(n)){for(var l=!1,a=0;a<n.length;a++)_addIntoSelections(e,n[a],r)&&(l=!0);return l&&cleanupSelections(e),l}}}else{var c=removePartOfCellsSelection(t,i);c&&(e.splice.apply(e,[o,1].concat(_toConsumableArray(c))),o+=c.length-1)}}if(r){var u,s,v=i.startRow===0&&i.endRow+1>=r.rows,d=i.startColumn===0&&i.endColumn+1>=r.columns;if(v&&(u=_addIntoSelections(e,{type:SelectionType.Columns,startColumn:i.startColumn,endColumn:i.endColumn},r)),d&&(s=_addIntoSelections(e,{type:SelectionType.Rows,startRow:i.startRow,endRow:i.endRow},r)),v||d)return u||s}return e.push(i),cleanupSelections(e),!0}var g=i.type===SelectionType.Rows;if(g||i.type===SelectionType.Columns){for(var m=0;m<e.length;m++){var f=e[m];if(f.type!==SelectionType.UnselectedCells){if(f.type===i.type){var p=mergeSelections(f,i);if(p){for(var b=m+1;b<e.length;b++)if(e[b].type===i.type){var k=mergeSelections(e[b],p);k&&(e.splice(b,1),b--,p=k)}return e[m]=p,cleanupSelections(e),!0}}}else{var C=removePartOfCellsSelection(f,g?{startRow:i.startRow,endRow:i.endRow,startColumn:0,endColumn:f.endColumn}:{startColumn:i.startColumn,endColumn:i.endColumn,startRow:0,endRow:f.endRow});C&&(e.splice.apply(e,[m,1].concat(_toConsumableArray(C))),m+=C.length-1)}}return e.push(i),cleanupSelections(e),!0}return!1}.bind(void 0),_removeFromSelections=function(e,i,r){if(_newArrowCheck(this,_this),!i||typeof i.type!="number")return!1;if(i.type===SelectionType.Cells){for(var o=0;o<e.length;o++){var t=e[o];if(t.type===SelectionType.UnselectedCells){var n=removePartOfCellsSelection(i,t);if(Array.isArray(n)){for(var l=!1,a=0;a<n.length;a++)_removeFromSelections(e,n[a],r)&&(l=!0);return l&&cleanupSelections(e),l}}if(t.type===SelectionType.Cells){var c=removePartOfCellsSelection(t,i);c&&(e.splice.apply(e,[o,1].concat(_toConsumableArray(c))),o+=c.length-1)}}if(r){var u,s,v=i.startRow===0&&i.endRow+1>=r.rows,d=i.startColumn===0&&i.endColumn+1>=r.columns;if(v&&(u=_removeFromSelections(e,{type:SelectionType.Columns,startColumn:i.startColumn,endColumn:i.endColumn},r)),d&&(s=_removeFromSelections(e,{type:SelectionType.Rows,startRow:i.startRow,endRow:i.endRow},r)),v||d)return u||s}return i.type=SelectionType.UnselectedCells,e.unshift(i),cleanupSelections(e),!0}var g=i.type===SelectionType.Rows;if(g||i.type===SelectionType.Columns){for(var m=!1,f=0;f<e.length;f++){var p=e[f];if(p.type!==SelectionType.Cells)if(p.type!==SelectionType.UnselectedCells)if(p.type===i.type){var b=g?removePartOfRowsSelection(p,i):removePartOfColumnsSelection(p,i);if(!b)continue;m=!0,e.splice.apply(e,[f,1].concat(_toConsumableArray(b))),f+=b.length-1}else{m=!0;var k=void 0;k=p.type===SelectionType.Rows?{type:SelectionType.UnselectedCells,startColumn:i.startColumn,endColumn:i.endColumn,startRow:p.startRow,endRow:p.endRow}:{type:SelectionType.UnselectedCells,startRow:i.startRow,endRow:i.endRow,startColumn:p.startColumn,endColumn:p.endColumn},e.unshift(k)}else g?p.startRow>=i.startRow&&p.endRow<=i.endRow&&(e.splice(f,1),f--):p.startColumn>=i.startColumn&&p.endColumn<=i.endColumn&&(e.splice(f,1),f--);else{var C=removePartOfCellsSelection(p,g?{startRow:i.startRow,endRow:i.endRow,startColumn:0,endColumn:p.endColumn}:{startColumn:i.startColumn,endColumn:i.endColumn,startRow:0,endRow:p.endRow});C&&(e.splice.apply(e,[f,1].concat(_toConsumableArray(C))),f+=C.length-1)}}return m&&cleanupSelections(e),m}return!1}.bind(void 0),cleanupSelections=function(e){var i=this;_newArrowCheck(this,_this);for(var r=[],o=[],t=0;t<e.length;t++){var n=e[t];n.type===SelectionType.UnselectedCells?r.push(n):o.push(n)}r=r.filter(function(f){_newArrowCheck(this,i);for(var p=0;p<o.length;p++)if(_getIntersection(f,o[p]))return!0;return!1}.bind(this));for(var l=!1;!l;){l=!0;for(var a=0;a<o.length;a++){for(var c=o[a],u=a+1;u<o.length;u++){var s=o[u],v=mergeSelections(c,s);if(v){o[a]=v,o.splice(u,1),l=!1;break}}if(!l)break}}for(var d=0,g=0;g<r.length;g++)e[d++]=r[g];for(var m=0;m<o.length;m++)e[d++]=o[m];e.splice(d,e.length-d)}.bind(void 0),isRowSelected=function(e,i){_newArrowCheck(this,_this);for(var r=0;r<e.length;r++){var o=e[r];switch(o.type){case SelectionType.UnselectedCells:if(i>=o.startRow&&i<=o.endRow)return!1;break;case SelectionType.Rows:if(i>=o.startRow&&i<=o.endRow)return!0}}return!1}.bind(void 0),isColumnSelected=function(e,i){_newArrowCheck(this,_this);for(var r=0;r<e.length;r++){var o=e[r];switch(o.type){case SelectionType.UnselectedCells:if(i>=o.startColumn&&i<=o.endColumn)return!1;break;case SelectionType.Columns:if(i>=o.startColumn&&i<=o.endColumn)return!0}}return!1}.bind(void 0),isCellSelected=function(e,i,r){_newArrowCheck(this,_this);for(var o=0;o<e.length;o++){var t=e[o];switch(t.type){case SelectionType.UnselectedCells:case SelectionType.Cells:if(r>=t.startColumn&&r<=t.endColumn&&i>=t.startRow&&i<=t.endRow)return t.type===SelectionType.Cells;break;case SelectionType.Rows:if(i>=t.startRow&&i<=t.endRow)return!0;break;case SelectionType.Columns:if(r>=t.startColumn&&r<=t.endColumn)return!0}}return!1}.bind(void 0),areAllCellsSelected=function(e,i){_newArrowCheck(this,_this);for(var r=i.startRow,o=i.startColumn,t=i.endRow,n=i.endColumn,l=0,a=e.length;l<a;l++){var c=e[l];if(c)switch(c.type){case SelectionType.UnselectedCells:case SelectionType.Cells:var u=o>=c.startColumn&&r>=c.startRow,s=n<=c.endColumn&&t<=c.endRow;if(u||s){if(u&&s)return c.type===SelectionType.Cells;if(u&&o<=c.endColumn&&r<=c.endRow||s&&n>=c.startColumn&&t>=c.startRow)return!1}break;case SelectionType.Rows:if(r>=c.startRow){if(t<=c.endRow)return!0;if(r<=c.endRow)return!1}else if(t>=c.startRow)return!1;break;case SelectionType.Columns:if(o>=c.startColumn){if(n<=c.endColumn)return!0;if(o<=c.endColumn)return!1}else if(n>=c.startColumn)return!1}}return!1}.bind(void 0),getSelectionStateFromCells=function(e,i){var r=this;if(_newArrowCheck(this,_this),!Array.isArray(e)||e.length===0||(e=e.filter(function(m){return _newArrowCheck(this,r),(typeof m.startRow!="number"||!(m.endRow<i.startRow||m.startRow>i.endRow))&&(typeof m.startColumn!="number"||!(m.endColumn<i.startColumn||m.startColumn>i.endColumn))&&m}.bind(this)),e.length===0))return!1;if(areAllCellsSelected(e,i))return!0;for(var o=i.endColumn-i.startColumn+1,t=new Array(i.endRow-i.startRow+1).fill(null).map(function(){return _newArrowCheck(this,r),new Array(o)}.bind(this)),n=Object.assign({type:SelectionType.Cells},i),l=e.length-1;l>=0;l--){var a=e[l],c=_getIntersection(n,a);if(c)for(var u=a.type!==SelectionType.UnselectedCells,s=c.startRow;s<=c.endRow;s++)for(var v=t[s-i.startRow],d=c.startColumn-i.startColumn,g=c.endColumn-i.startColumn;d<=g;d++)v[d]=u}return t}.bind(void 0);(function(e,i){var r=this;if(_newArrowCheck(this,_this),!Array.isArray(e)||e.length===0)return[];if(e=e.map(function(m){return _newArrowCheck(this,r),typeof m.startRow=="number"&&(m.endRow<i.startRow||m.startRow>i.endRow)||typeof m.startColumn=="number"&&(m.endColumn<i.startColumn||m.startColumn>i.endColumn)?null:m}.bind(this)),e.length===0)return[];for(var o=i.endColumn-i.startColumn+1,t=new Array(i.endRow-i.startRow+1).fill(null).map(function(){return _newArrowCheck(this,r),new Array(o)}.bind(this)),n=Object.assign({type:SelectionType.Cells},i),l=e.length-1;l>=0;l--){var a=e[l];if(a){var c=_getIntersection(n,a);if(c)for(var u=a.type!==SelectionType.UnselectedCells,s=c.startRow;s<=c.endRow;s++)for(var v=t[s-i.startRow],d=c.startColumn-i.startColumn,g=c.endColumn-i.startColumn;d<=g;d++)v[d]=u?l+1:0}}return t}).bind(void 0);var getSelectedContiguousColumns=function(e,i){if(_newArrowCheck(this,_this),e&&e.length!==0){for(var r,o=e.length-1;o>=0;o--){var t=e[o];switch(t.type){case SelectionType.Columns:if(r){var n=mergeSelections(r,t);if(n){r=n;break}}r=t;break;case SelectionType.Rows:case SelectionType.Cells:if(!i)return;break;case SelectionType.UnselectedCells:if(!r||_getIntersection(t,r))return}}return r?[r.startColumn,r.endColumn]:void 0}}.bind(void 0),getSelectedContiguousRows=function(e,i){if(_newArrowCheck(this,_this),e&&e.length!==0){for(var r,o=e.length-1;o>=0;o--){var t=e[o];switch(t.type){case SelectionType.Rows:if(r){var n=mergeSelections(r,t);if(n){r=n;break}}r=t;break;case SelectionType.Columns:case SelectionType.Cells:if(!i)return;break;case SelectionType.UnselectedCells:if(!r||_getIntersection(t,r))return}}return r?[r.startRow,r.endRow]:void 0}}.bind(void 0),areSelectionsComplex=function(e){var i=this;if(_newArrowCheck(this,_this),!e||e.length<=1)return!1;var r=e[0].type;return r===SelectionType.UnselectedCells||e.findIndex(function(o){return _newArrowCheck(this,i),o.type!==r}.bind(this))>=0}.bind(void 0),areSelectionsNeat=function(e){if(_newArrowCheck(this,_this),!e)return!1;if(e.length===1)return!0;var i=e[0],r=i.type;if(r===SelectionType.UnselectedCells)return!0;for(var o=0;o<e.length;o++){var t=e[o];if(r!==t.type)return!1;if(r===SelectionType.Cells){if(t.startColumn===i.startColumn&&t.endColumn===i.endColumn||t.startRow===i.startRow&&t.endRow===i.endRow)continue;return!1}}return!0}.bind(void 0),moveSelections=function(e,i,r){_newArrowCheck(this,_this);for(var o=0;o<e.length;o++){var t=e[o];switch(t.type){case SelectionType.Cells:case SelectionType.UnselectedCells:t.startRow+=r,t.endRow+=r,t.startColumn+=i,t.endColumn+=i;break;case SelectionType.Rows:t.startRow+=r,t.endRow+=r;break;case SelectionType.Columns:t.startColumn+=i,t.endColumn+=i}}}.bind(void 0),cloneSelections=function(e){_newArrowCheck(this,_this);for(var i=[],r=0;r<e.length;r++){var o=e[r];o&&i.push(Object.assign({},o))}return i}.bind(void 0),getSelectionBounds=function(e){_newArrowCheck(this,_this);for(var i=1/0,r=-1/0,o=1/0,t=-1/0,n=0;n<e.length;n++){var l=e[n];l.type!==SelectionType.UnselectedCells&&(typeof l.startColumn!="number"?o=0:l.startColumn<o&&(o=l.startColumn),typeof l.endColumn!="number"?t=1/0:l.endColumn>t&&(t=l.endColumn),typeof l.startRow!="number"?i=0:l.startRow<i&&(i=l.startRow),typeof l.endRow!="number"?r=1/0:l.endRow>r&&(r=l.endRow))}return{top:i,left:o,bottom:r,right:t}}.bind(void 0),shrinkOrExpandSelections=function(e,i,r,o){var t=this;_newArrowCheck(this,_this);var n=i.rowIndex,l=i.columnIndex;if(n<0||l<0)return!1;var a={ArrowLeft:{x:1,y:0,isLeft:!0},ArrowUp:{x:0,y:1,isUp:!0},ArrowRight:{x:-1,y:0,isRight:!0},ArrowDown:{x:0,y:-1,isDown:!0}}[r.key];if(!a)return!1;for(var c=n+a.y,u=l+a.x,s=[],v=0;v<e.length;v++){var d=e[v];switch(d.type){case SelectionType.Cells:case SelectionType.UnselectedCells:if(!(c!==d.startRow&&c!==d.endRow||u!==d.startColumn&&u!==d.endColumn)){if(d.type===SelectionType.UnselectedCells)return!1;s.push(d)}break;case SelectionType.Rows:c!==d.startRow&&c!==d.endRow||s.push(d);break;case SelectionType.Columns:u!==d.startColumn&&u!==d.endColumn||s.push(d)}}if(s.length!==1)return!1;var g=s[0],m=g.startRow===c,f=g.endRow===c,p=g.startColumn===u,b=g.endColumn===u,k=o?o.rows-1:1/0,C=o?o.columns-1:1/0,I=function(){return _newArrowCheck(this,t),cleanupSelections(e),!0}.bind(this);if(m){if(a.isUp)return g.startRow!==0&&(g.startRow--,I());if(a.isDown&&g.startRow<g.endRow)return g.startRow++,I()}if(f){if(a.isDown)return!(g.endRow>=k)&&(g.endRow++,I());if(a.isUp&&g.startRow<g.endRow)return g.endRow--,I()}if(p){if(a.isLeft)return g.startColumn!==0&&(g.startColumn--,I());if(a.isRight&&g.startColumn<g.endColumn)return g.startColumn++,I()}if(b){if(a.isRight)return!(g.endColumn>=C)&&(g.endColumn++,I());if(a.isLeft&&g.startColumn<g.endColumn)return g.endColumn--,I()}return!1}.bind(void 0);function draw(e){var i=[],r=!1,o=0,t=300,n=[],l=[],a=[];function c(y,B,S,V){S=S||1;var D,G=[];for(D=y;D<=B;D+=S)G[D]=V===void 0?D:typeof V=="function"?V(D):V;return G}function u(y){var B,S=y.innerHTML||y.formattedValue,V=S.toString()+y.rowIndex.toString()+y.columnIndex.toString(),D=Math.round(y.x+e.canvasOffsetLeft),G=Math.round(y.y+e.canvasOffsetTop);if(e.htmlImageCache[V]){if(B=e.htmlImageCache[V].img,e.htmlImageCache[V].height===y.height&&e.htmlImageCache[V].width===y.width)return B.complete?e.ctx.drawImage(B,D,G):void 0;e.htmlImageCache[V]=void 0}else r=!1;B=new Image(y.width,y.height),e.htmlImageCache[V]={img:B,width:y.width,height:y.height},B.onload=function(){var T;e.ctx.drawImage(B,D,G),T=!0,Object.keys(e.htmlImageCache).forEach(function(q){e.htmlImageCache[q].img.complete||(T=!1)}),T&&!r&&(r=!0,e.draw())},B.src="data:image/svg+xml;base64,"+btoa('<svg xmlns="http://www.w3.org/2000/svg" width="'+y.width+'" height="'+y.height+`">
<foreignObject class="node" x="0" y="0" width="100%" height="100%">
<body xmlns="http://www.w3.org/1999/xhtml" style="margin:0;padding:0;">
`+S+`
</body></foreignObject>
</svg>
`)}function s(y,B){if(!(y.length<4)){e.ctx.beginPath(),e.ctx.moveTo(y[0]+e.canvasOffsetLeft,y[1]+e.canvasOffsetTop);for(var S=2;S<y.length;S+=2){var V=y[S]+e.canvasOffsetLeft,D=y[S+1]+e.canvasOffsetTop;e.ctx.lineTo(V,D)}B?e.ctx.fill():e.ctx.stroke()}}function v(y,B,S,V){f(y,B,S,S),p(y,B,S,S);var D=y+.5*S,G=B+.5*S;s([y+.2*S,G,y+.78*S,G]),V&&s([D,B+.22*S,D,B+.8*S])}function d(y,B,S,V,D){var G,T,q,Q,le=.2*S,W=.3*S,$=S-2*le,O=S-2*W,L=.5*$;switch(V){case"r":Q=[y,B,y+S,B,y+S,B+S,y,B+S],q=[G=y+W,T=B+le,G,T+$,G+O,T+L];break;case"l":Q=[y+S,B,y,B,y,B+S,y+S,B+S],q=[G=y+S-W,T=B+le,G,T+$,G-O,T+L];break;case"t":Q=[y,B+S,y,B,y+S,B,y+S,B+S],q=[G=y+le,T=B+S-W,G+$,T,G+L,T-O];break;case"b":Q=[y,B,y,B+S,y+S,B+S,y+S,B],q=[G=y+le,T=B+W,G+$,T,G+L,T+O]}if(D){e.ctx.strokeStyle=e.style.unhideIndicatorBorderColor,e.ctx.lineWidth=2,s(Q),e.ctx.fillStyle=e.style.unhideIndicatorBackgroundColor;var A=V==="r"||V==="b"?1:0;V==="l"||V==="r"?f(y-A,B,S+A,S):f(y,B-A,S,S+A)}e.ctx.fillStyle=e.style.unhideIndicatorColor,s(q,!0)}function g(y,B,S){var V=S?B.parentCount:0,D=e.style.cellTreeIconWidth*e.scale,G=e.style.cellTreeIconMarginTop*e.scale,T=e.style.cellTreeIconMarginRight*e.scale,q=e.style.cellTreeIconMarginLeft*e.scale+V*(D+y.paddingLeft),Q=y.x+y.paddingLeft+e.canvasOffsetLeft+q,le=y.y+e.canvasOffsetTop+G;if(B.icon){e.ctx.beginPath();var W=e.ctx.fillStyle,$=e.ctx.strokeStyle;y.hovered&&e.hovers.onCellTreeIcon?e.ctx.fillStyle=e.style.cellTreeIconHoverFillColor:e.ctx.fillStyle=e.style.cellTreeIconFillColor,e.ctx.fillRect(Q,le,D,D),e.ctx.strokeStyle=e.style.cellTreeIconBorderColor,e.ctx.rect(Q,le,D,D),e.ctx.stroke(),e.ctx.beginPath(),B.expand?(e.ctx.moveTo(Q+3,le+.5*D),e.ctx.lineTo(Q+D-3,le+.5*D)):(e.ctx.moveTo(Q+2,le+.5*D),e.ctx.lineTo(Q+D-2,le+.5*D),e.ctx.moveTo(Q+.5*D,le+2),e.ctx.lineTo(Q+.5*D,le+D-2)),e.ctx.lineWidth=e.style.cellTreeIconLineWidth,e.ctx.strokeStyle=e.style.cellTreeIconLineColor,e.ctx.stroke(),e.ctx.strokeStyle=$,e.ctx.fillStyle=W}return q+D+T}function m(y,B,S,V,D){var G=(y+=e.canvasOffsetLeft)+S,T=(B+=e.canvasOffsetTop)+V;e.ctx.beginPath(),e.ctx.moveTo(y+D,B),e.ctx.lineTo(G-D,B),e.ctx.quadraticCurveTo(G,B,G,B+D),e.ctx.lineTo(G,B+V-D),e.ctx.quadraticCurveTo(G,T,G-D,T),e.ctx.lineTo(y+D,T),e.ctx.quadraticCurveTo(y,T,y,T-D),e.ctx.lineTo(y,B+D),e.ctx.quadraticCurveTo(y,B,y+D,B)}function f(y,B,S,V){y+=e.canvasOffsetLeft,B+=e.canvasOffsetTop,e.ctx.fillRect(y,B,S,V)}function p(y,B,S,V){y+=e.canvasOffsetLeft,B+=e.canvasOffsetTop,e.ctx.strokeRect(y,B,S,V)}function b(y,B,S){B+=e.canvasOffsetLeft,S+=e.canvasOffsetTop,e.ctx.fillText(y,B,S)}function k(y){e.ctx.beginPath(),y===0&&(e.ctx.moveTo(e.lastFrozenColumnPixel,e.lastFrozenRowPixel),e.ctx.lineTo(e.lastFrozenColumnPixel,e.height),e.ctx.lineTo(e.width,e.height),e.ctx.lineTo(e.width,e.lastFrozenRowPixel)),y===1&&(e.ctx.moveTo(0,e.lastFrozenRowPixel),e.ctx.lineTo(0,e.height),e.ctx.lineTo(e.width,e.height),e.ctx.lineTo(e.width,e.lastFrozenRowPixel)),y===2&&(e.ctx.moveTo(e.lastFrozenColumnPixel,0),e.ctx.lineTo(e.width,0),e.ctx.lineTo(e.width,e.height),e.ctx.lineTo(e.lastFrozenColumnPixel,e.height)),e.ctx.clip()}function C(y,B,S){if(e.style.selectionHandleType==="circle")return function(V,D,G){V+=e.canvasOffsetLeft,D+=e.canvasOffsetTop,e.ctx.beginPath(),e.ctx.arc(V,D,G,0,2*Math.PI),e.ctx.fill()}(y,B,.5*S);f(y-.5*S,B-.5*S,S,S)}function I(y,B,S){if(e.style.selectionHandleType==="circle")return function(V,D,G){V+=e.canvasOffsetLeft,D+=e.canvasOffsetTop,e.ctx.beginPath(),e.ctx.arc(V,D,G,0,2*Math.PI),e.ctx.stroke()}(y,B,.5*S);p(y-.5*S,B-.5*S,S,S)}function P(y,B){e.ctx.beginPath(),{t:function(){e.ctx.moveTo(y.x+e.canvasOffsetLeft,y.y+e.canvasOffsetTop),e.ctx.lineTo(y.x+e.canvasOffsetLeft+y.width,y.y+e.canvasOffsetTop)},r:function(){e.ctx.moveTo(y.x+e.canvasOffsetLeft+y.width,y.y+e.canvasOffsetTop),e.ctx.lineTo(y.x+e.canvasOffsetLeft+y.width,y.y+e.canvasOffsetTop+y.height)},b:function(){e.ctx.moveTo(y.x+e.canvasOffsetLeft,y.y+e.canvasOffsetTop+y.height),e.ctx.lineTo(y.x+e.canvasOffsetLeft+y.width,y.y+e.canvasOffsetTop+y.height)},l:function(){e.ctx.moveTo(y.x+e.canvasOffsetLeft,y.y+e.canvasOffsetTop),e.ctx.lineTo(y.x+e.canvasOffsetLeft,y.y+e.canvasOffsetTop+y.height)}}[B](),e.ctx.stroke()}function E(){for(var y=this,B=0,S=e.getSchema(),V=0,D=Math.min(e.frozenColumn,S.length),G=e.getCollapsedColumnGroups();V<D;)S[V].hidden||G.findIndex(function(T){return _newArrowCheck(this,y),V>=T.from&&V<=T.to}.bind(this))>=0||(B+=e.getColumnWidth(V)),V+=1;return B}e.htmlImageCache={},e.draw=function(y){var B=this;if(!e.dispatchEvent("beforedraw",{})&&(e.isChildGrid||e.height&&e.width)){if(e.isChildGrid&&y)requestAnimationFrame(e.parentGrid.draw);else if(e.intf.visible!==!1){var S,V,D,G,T,q,Q,le,W,$,O,L,A,K,re,pe,we,ee,H,be,U,Be=e.viewData||[],$e=e.style.gridBorderCollapse==="collapse",He=[],Ae=[],Fe=[],Ne=[],nt=Be.length,dt=e.currentCell||{},Je=e.getColumnHeaderCellHeight(),je=e.getRowHeaderCellWidth(),Ve=e.getRowGroupAreaWidth(),F=e.getColumnGroupAreaHeight(),oe={},he={},Ie={},Pe=e.getCollapsedColumnGroups(),Se=e.getCollapsedRowGroups(),ge=e.style.cellHeight,Le=0,ze=e.hiddenRowRanges.map(function(R){return _newArrowCheck(this,B),{from:R[0],plus:R[1]-R[0]+1}}.bind(this)).sort(function(R,z){return _newArrowCheck(this,B),R.from-z.from}.bind(this));o+=1,V=performance.now(),e.visibleRowHeights=[],Be.length>e.orders.rows.length&&e.createRowOrders(),e.ctx.save(),function(){e.visibleRows=[],K=e.getSchema(),e.visibleCells=[],e.visibleGroups=[],e.visibleUnhideIndicators=[],e.canvasOffsetTop=e.isChildGrid?e.parentNode.offsetTop:.5,e.canvasOffsetLeft=e.isChildGrid?e.parentNode.offsetLeft:-.5,L=e.height,A=e.width;var R=ze[0];R&&R.from===0&&(Le=R.plus,ze.shift())}(),m(0,0,A,L,0),e.ctx.clip(),e.ctx.fillStyle=e.style.gridBackgroundColor,f(0,0,A,L),e.ctx.translate(Ve,F),function(){var R=Math.min(Be.length,e.frozenRow);for($=-e.scrollBox.scrollLeft+e.scrollPixelLeft+e.style.cellBorderWidth,W=Je,re=0;re<R&&ft(e.orders.rows[re],re);re+=1);e.attributes.allowFreezingRows&&(W>Je&&(W+=e.style.frozenMarkerWidth),W+=e.style.frozenMarkerBorderWidth-.4999999999),e.lastFrozenRowPixel=W}(),function(){e.ctx.save(),e.frozenRow>0&&(m(0,e.lastFrozenRowPixel,e.width,e.height-e.lastFrozenRowPixel,0),e.ctx.clip());var R,z,ie,ke=K.length;for($=-e.scrollBox.scrollLeft+e.scrollPixelLeft+e.style.cellBorderWidth,e.attributes.snapToRow||(W+=-e.scrollBox.scrollTop+e.scrollPixelTop+e.style.cellBorderWidth),re=e.frozenRow+e.scrollIndexTop;re<nt&&(z=e.orders.rows[re],e.scrollIndexBottom=re,e.scrollPixelBottom=W,e.cellTree.rows.length>0&&Object.keys(e.cellTree.rows[z]).length>0&&e.cellTree.rows[z].hide||ft(z,re));re+=1);if(e.attributes.showNewRow){for(e.attributes.showRowHeaders&&($+=je),Q=ge=e.style.cellHeight,q=!1,R=e.scrollIndexLeft;R<ke&&(et(R)||(ie=e.orders.columns[R],$+=tt(e.newRow,Be.length,Be.length)(K[ie],ie,R)),!($>e.width+e.scrollBox.scrollLeft));R+=1);Ne.push([e.newRow,Be.length,Be.length,W,Q])}e.ctx.restore()}(),function(){if(we){e.ctx.save();var R=e.activeCell.columnIndex+1>e.frozenColumn||e.activeCell.rowIndex+1>e.frozenRow;m(R?e.lastFrozenColumnPixel:0,R?e.lastFrozenRowPixel:0,R?e.width-e.lastFrozenColumnPixel:e.width,R?e.height-e.lastFrozenRowPixel:e.height,0),e.ctx.clip(),e.attributes.selectionMode==="row"?e.activeCell&&e.activeCell.rowIndex===we.rowIndex&&(e.ctx.lineWidth=e.style.activeCellOverlayBorderWidth,e.ctx.strokeStyle=e.style.activeCellOverlayBorderColor,p(1,we.y,e.getHeaderWidth()+je,e.visibleRowHeights[we.rowIndex])):(e.ctx.lineWidth=e.style.activeCellOverlayBorderWidth,e.ctx.strokeStyle=e.style.activeCellOverlayBorderColor,p(we.x,we.y,we.width,we.height)),e.ctx.restore()}}(),function(){var R,z,ie,ke,Y,se,te=K.length;function Z(ce,_){for(_=Math.min(_,te),ie=ce;ie<_&&(z=e.orders.columns[ie],(Y=K[z]).hidden||et(ie)||(R={title:Y.title,name:Y.name,width:Y.width||e.style.cellWidth,style:"columnHeaderCell",type:"string",index:ie,order:z},ke={columnHeaderCell:Y.title||Y.name},!(($+=tt(ke,-1,-1)(R,z,ie))>e.width+e.scrollBox.scrollLeft)));ie+=1);}Ne.forEach(function(ce,_){W=ce[3],ge=ce[4],_===e.frozenRow&&(e.ctx.save(),m(0,e.lastFrozenRowPixel,e.width,e.height-e.lastFrozenRowPixel,0),e.ctx.clip()),function(ye,x,N){if(e.attributes.showRowHeaders){var ae;$=0,ae=e.viewData&&x<e.viewData.length?e.getBoundRowIndexFromViewRowIndex(x)+1:e.originalData?e.originalData.length+1:N+1;var ne=e.hasActiveFilters()||e.hasCollapsedRowGroup()?ae:x+1,de={rowHeaderCell:ne+=Le},fe={name:"rowHeaderCell",width:e.sizes.columns[-1]||e.style.rowHeaderCellWidth,style:"rowHeaderCell",type:"string",data:ne,index:-1};if(q=e.openChildren[x],tt(de,N,x)(fe,-1,-1),ze[0]&&ne>=ze[0].from){var me=ze.shift().plus;Le+=me}}}(ce[0],ce[1],ce[2])}),e.ctx.restore(),e.attributes.showColumnHeaders&&($=-e.scrollBox.scrollLeft+e.scrollPixelLeft+e.style.columnHeaderCellBorderWidth,e.attributes.showRowHeaders&&($+=je),W=0,ge=e.getColumnHeaderCellHeight(),Z(e.scrollIndexLeft,te),se=$,$=e.style.columnHeaderCellBorderWidth,e.attributes.showRowHeaders&&($+=je),Z(0,e.frozenColumn),($=se)<A&&(O={name:"",width:e.style.scrollBarWidth,style:"columnHeaderCellCap",isColumnHeaderCell:!0,isColumnHeaderCellCap:!0,type:"string",index:K.length},tt({endCap:""},-1,-1)(O,-1,-1)),e.attributes.showRowHeaders&&(le={cornerCell:""},$=0,O={name:"cornerCell",width:e.style.rowHeaderCellWidth,style:"cornerCell",type:"string",index:-1},tt(le,-1,-1)(O,-1,-1)))}(),function(){var R=e.lastFrozenRowPixel-e.style.frozenMarkerWidth,z=e.lastFrozenColumnPixel-e.style.frozenMarkerWidth,ie=e.currentCell&&e.currentCell.style==="frozen-row-marker",ke=e.currentCell&&e.currentCell.style==="frozen-column-marker",Y=e.getRowHeaderCellWidth();if(e.ctx.lineWidth=e.style.frozenMarkerBorderWidth,e.attributes.allowFreezingColumns&&((!e.freezeMarkerPosition||e.freezeMarkerPosition&&e.dragMode==="frozen-row-marker")&&(z>e.style.rowHeaderCellWidth&&(e.ctx.fillStyle=e.style.frozenMarkerColor,e.ctx.strokeStyle=e.style.frozenMarkerBorderColor,f(z,0,e.style.frozenMarkerWidth,e.height),p(z,0,e.style.frozenMarkerWidth,e.height)),e.ctx.fillStyle=ke?e.style.frozenMarkerHoverColor:e.style.frozenMarkerHeaderColor,e.ctx.strokeStyle=ke?e.style.frozenMarkerHoverBorderColor:e.style.frozenMarkerHeaderColor,f(z,0,e.style.frozenMarkerWidth,e.style.columnHeaderCellHeight),p(z,0,e.style.frozenMarkerWidth,e.style.columnHeaderCellHeight)),(!e.dragStartObject||e.dragStartObject&&e.dragStartObject.style!=="rowHeaderCell")&&e.visibleCells.unshift({x:z,y:0,height:e.height,width:e.style.frozenMarkerWidth,style:"frozen-column-marker"})),e.attributes.allowFreezingRows){(!e.freezeMarkerPosition||e.freezeMarkerPosition&&e.dragMode==="frozen-column-marker")&&(R>Y&&(e.ctx.fillStyle=e.style.frozenMarkerColor,e.ctx.strokeStyle=e.style.frozenMarkerBorderColor,f(0,R,e.width,e.style.frozenMarkerWidth),p(0,R,e.width,e.style.frozenMarkerWidth)),e.ctx.fillStyle=ie?e.style.frozenMarkerHoverColor:e.style.frozenMarkerHeaderColor,e.ctx.strokeStyle=ie?e.style.frozenMarkerHoverBorderColor:e.style.frozenMarkerHeaderColor,f(0,R,Y,e.style.frozenMarkerWidth),p(0,R,Y,e.style.frozenMarkerWidth));var se=e.style.frozenMarkerWidth+e.style.frozenMarkerBorderWidth;(!e.dragStartObject||e.dragStartObject&&e.dragStartObject.style!=="columnHeaderCell")&&e.visibleCells.unshift({x:0,y:R,height:se,width:e.width,style:"frozen-row-marker"}),he={y:R,h:se}}if(e.freezeMarkerPosition)if(e.ctx.fillStyle=e.style.frozenMarkerActiveColor,e.ctx.strokeStyle=e.style.frozenMarkerActiveBorderColor,e.dragMode==="frozen-column-marker"){var te=e.freezeMarkerPosition.x,Z=e.getCellAt(te,0);if(e.freezeMarkerPosition.isGrab&&(te=z),te>Y){var ce=Z.x-e.style.frozenMarkerWidth-e.style.frozenMarkerBorderWidth;te>ce+Z.width/2&&(ce+=Z.width),e.ctx.fillStyle=e.style.frozenMarkerColor,e.ctx.strokeStyle=e.style.frozenMarkerBorderColor,f(ce,0,e.style.frozenMarkerWidth,e.height),p(ce,0,e.style.frozenMarkerWidth,e.height),e.ctx.fillStyle=e.style.frozenMarkerHeaderColor,e.ctx.strokeStyle=e.style.frozenMarkerHeaderColor,f(ce,0,e.style.frozenMarkerWidth,e.style.columnHeaderCellHeight),p(ce,0,e.style.frozenMarkerWidth,e.style.columnHeaderCellHeight)}e.ctx.fillStyle=e.style.frozenMarkerActiveHeaderColor,e.ctx.strokeStyle=e.style.frozenMarkerActiveBorderColor,f(te,0,e.style.frozenMarkerWidth,e.style.columnHeaderCellHeight),p(te,0,e.style.frozenMarkerWidth,e.style.columnHeaderCellHeight),e.ctx.fillStyle=e.style.frozenMarkerActiveColor,f(te,0,e.style.frozenMarkerWidth,e.height),p(te,0,e.style.frozenMarkerWidth,e.height)}else{var _=e.freezeMarkerPosition.y,ye=e.getCellAt(0,_);if(e.freezeMarkerPosition.isGrab&&(_=R),_>e.style.columnHeaderCellHeight){var x=ye.y-e.style.frozenMarkerWidth-e.style.frozenMarkerBorderWidth;_>x+ye.height/2&&(x+=ye.height),e.ctx.fillStyle=e.style.frozenMarkerColor,e.ctx.strokeStyle=e.style.frozenMarkerBorderColor,f(0,x,e.width,e.style.frozenMarkerWidth),p(0,x,e.width,e.style.frozenMarkerWidth),e.ctx.fillStyle=e.style.frozenMarkerHeaderColor,e.ctx.strokeStyle=e.style.frozenMarkerHeaderColor,f(0,x,Y,e.style.frozenMarkerWidth),p(0,x,Y,e.style.frozenMarkerWidth)}e.ctx.fillStyle=e.style.frozenMarkerActiveHeaderColor,e.ctx.strokeStyle=e.style.frozenMarkerActiveBorderColor,f(0,_,Y,e.style.frozenMarkerWidth),p(0,_,Y,e.style.frozenMarkerWidth),e.ctx.fillStyle=e.style.frozenMarkerActiveColor,f(0,_,e.width,e.style.frozenMarkerWidth),p(0,_,e.width,e.style.frozenMarkerWidth)}}(),(e.mobile||e.attributes.allowMovingSelection)&&e.attributes.editable&&(e.ctx.lineWidth=e.style.selectionHandleBorderWidth,e.ctx.strokeStyle=e.style.selectionHandleBorderColor,e.ctx.fillStyle=e.style.selectionHandleColor,Fe.forEach(function(R){(function(Y,se){var te=e.style.selectionHandleSize;({tr:function(){C(Y.x+Y.width,Y.y,te),I(Y.x+Y.width,Y.y,te)},br:function(){C(Y.x+Y.width,Y.y+Y.height,te),I(Y.x+Y.width,Y.y+Y.height,te)},tl:function(){C(Y.x,Y.y,te),I(Y.x,Y.y,te)},bl:function(){C(Y.x,Y.y+Y.height,te),I(Y.x,Y.y+Y.height,te)}})[se]()})(R[0],R[1]);var z=e.attributes.touchSelectHandleZone/2,ie=R[0].x+(R[1]==="tl"||R[1]==="bl"?0:R[0].width)-z,ke=R[0].y+(R[1]==="bl"||R[1]==="br"?R[0].height:0)-z;e.visibleCells.unshift({x:ie,y:ke,height:e.style.selectionHandleSize+z,width:e.style.selectionHandleSize+z,style:"selection-handle-"+R[1]})})),function(){if(e.reorderObject){var R={height:e.reorderObject.height,width:e.reorderObject.width,x:e.reorderObject.x+e.reorderObject.dragOffset.x,y:e.reorderObject.y+e.reorderObject.dragOffset.y},z={width:A,height:L,x:0,y:0};e.ctx.fillStyle=e.style.reorderMarkerBackgroundColor,e.ctx.lineWidth=e.style.reorderMarkerBorderWidth,e.ctx.strokeStyle=e.style.reorderMarkerBorderColor,e.dragMode==="row-reorder"?(R.height=e.getSelectedRowsHeight(),R.width=A,R.x=0,z.width=A,z.height=e.currentCell.height,z.y=e.currentCell.y,f(R.x,R.y,R.width,R.height),p(R.x,R.y,R.width,R.height),e.ctx.lineWidth=e.style.reorderMarkerIndexBorderWidth,e.ctx.strokeStyle=e.style.reorderMarkerIndexBorderColor,!e.isRowSelected(e.reorderTarget.sortRowIndex)&&e.currentCell.rowIndex!==e.reorderObject.rowIndex&&e.currentCell.rowIndex>-1&&e.currentCell.rowIndex<nt&&P(z,e.reorderTarget.sortRowIndex>e.reorderObject.sortRowIndex?"b":"t")):e.dragMode==="column-reorder"&&e.reorderObject&&(R.width=e.getSelectedColumnsWidth(),R.height=L,R.y=0,z.height=L,z.width=e.currentCell.width,z.y=0,z.x=e.currentCell.x,f(R.x,R.y,R.width,R.height),p(R.x,R.y,R.width,R.height),e.ctx.lineWidth=e.style.reorderMarkerIndexBorderWidth,e.ctx.strokeStyle=e.style.reorderMarkerIndexBorderColor,!e.isColumnSelected(e.reorderTarget.sortColumnIndex)&&e.currentCell.sortColumnIndex!==e.reorderObject.sortColumnIndex&&e.reorderTarget.columnIndex!==e.reorderObject.columnIndex&&e.currentCell.sortColumnIndex>-1&&e.currentCell.sortColumnIndex<K.length&&P(z,e.reorderTarget.columnIndex>e.reorderObject.columnIndex?"r":"l"))}}(),e.movingSelection&&(e.ctx.lineWidth=e.style.moveOverlayBorderWidth,e.ctx.strokeStyle=e.style.moveOverlayBorderColor,e.ctx.setLineDash(e.style.moveOverlayBorderSegments),Ae.forEach(function(R){P(R[0],R[1])}),e.ctx.setLineDash([])),function(){if(e.attributes.resizeAfterDragged&&e.draggingItem&&e.pendingDragResize&&(e.dragMode=="ew-resize"||e.dragMode=="ns-resize")){var R=e.dragMode=="ns-resize",z=R?e.style.resizeMarkerSize:e.height,ie=R?e.width:e.style.resizeMarkerSize,ke=e.dragStart.x-(e.resizingStartingWidth-e.style.minColumnWidth),Y=e.dragStart.y-(e.resizingStartingHeight-e.style.minRowHeight),se=R?0:Math.max(e.pendingDragResize.x,ke),te=R?Math.max(e.pendingDragResize.y,Y):0;e.ctx.fillStyle=e.style.resizeMarkerColor,f(se,te,ie,z)}}(),e.ctx.lineWidth=e.style.gridBorderWidth,e.ctx.strokeStyle=e.style.gridBorderColor,p(0,0,e.width,e.height),function(){function R(z){e.fillOverlay.handle||(e.ctx.lineWidth=e.style.selectionOverlayBorderWidth,e.ctx.strokeStyle=e.style.selectionOverlayBorderColor,P(z[0],z[1]))}He.filter(function(z){return z[0].rowIndex<e.frozenRow&&z[0].columnIndex<e.frozenColumn}).forEach(R),e.ctx.save(),k(0),He.filter(function(z){return z[0].rowIndex>=e.frozenRow&&z[0].columnIndex>=e.frozenColumn}).forEach(R),e.ctx.restore(),e.ctx.save(),k(1),He.filter(function(z){return z[0].rowIndex>=e.frozenRow&&z[0].columnIndex<e.frozenColumn}).forEach(R),e.ctx.restore(),e.ctx.save(),k(2),He.filter(function(z){return z[0].rowIndex<e.frozenRow&&z[0].columnIndex>=e.frozenColumn}).forEach(R),e.ctx.restore(),function(){if(!(!e.fillOverlay.handle||!e.fillOverlay.snapTo)){e.ctx.save();var z=e.fillOverlay,ie=z.handle,ke=z.snapTo.x,Y=z.snapTo.y,se=z.snap,te=z.direction==="x"?se?se.x+(z.x<ke?0:se.width):z.x:ie.x,Z=z.direction===void 0||z.direction==="y"?se?se.y+(z.y<Y?0:se.height):z.y:ie.y,ce=Math.max(Math.min(ke,te),z.minX),_=Math.max(Math.min(Y,Z),z.minY),ye=Math.max(ke,te)-ce,x=Math.max(Y,Z)-_;e.ctx.strokeStyle=e.style.fillOverlayBorderColor,e.ctx.lineWidth=e.style.fillOverlayBorderWidth,e.ctx.setLineDash([3,3]),p(ce,_,ye,x),e.ctx.setLineDash([]),e.ctx.restore()}}()}(),H=e.scrollBox.entities,be=2*e.style.scrollBarBoxMargin,e.ctx.strokeStyle=e.style.scrollBarBorderColor,e.ctx.lineWidth=e.style.scrollBarBorderWidth,e.frozenColumn>0?H.horizontalBox.x=je+e.style.scrollBarBoxMargin+e.scrollCache.x[e.frozenColumn-1]+(H.horizontalBar.width-e.scrollCache.x[e.frozenColumn-1]-e.scrollBox.scrollBoxWidth)*(e.scrollBox.scrollLeft/e.scrollBox.scrollWidth):H.horizontalBox.x=je+e.style.scrollBarBoxMargin+(H.horizontalBar.width-e.scrollBox.scrollBoxWidth)*(e.scrollBox.scrollLeft/e.scrollBox.scrollWidth),H.verticalBox.y=Je+e.style.scrollBarBoxMargin+e.scrollCache.y[e.frozenRow]+(H.verticalBar.height-e.scrollBox.scrollBoxHeight-e.scrollCache.y[e.frozenRow])*(e.scrollBox.scrollTop/e.scrollBox.scrollHeight),e.scrollBox.horizontalBarVisible&&(e.ctx.fillStyle=e.style.scrollBarBackgroundColor,f(H.horizontalBar.x,H.horizontalBar.y,H.horizontalBar.width+be,H.horizontalBar.height),p(H.horizontalBar.x,H.horizontalBar.y,H.horizontalBar.width+be,H.horizontalBar.height),e.ctx.fillStyle=e.style.scrollBarBoxColor,e.scrollBox.horizontalBoxVisible&&(/horizontal/.test(dt.context)&&(e.ctx.fillStyle=e.style.scrollBarActiveColor),m(H.horizontalBox.x,H.horizontalBox.y,H.horizontalBox.width,H.horizontalBox.height,e.style.scrollBarBoxBorderRadius),e.ctx.stroke(),e.ctx.fill()),ee=!0,e.visibleCells.unshift(H.horizontalBar),e.visibleCells.unshift(H.horizontalBox)),e.scrollBox.verticalBarVisible&&(e.ctx.fillStyle=e.style.scrollBarBackgroundColor,f(H.verticalBar.x,H.verticalBar.y,H.verticalBar.width,H.verticalBar.height+be),p(H.verticalBar.x,H.verticalBar.y,H.verticalBar.width,H.verticalBar.height+be),e.scrollBox.verticalBoxVisible&&(e.ctx.fillStyle=e.style.scrollBarBoxColor,/vertical/.test(dt.context)&&(e.ctx.fillStyle=e.style.scrollBarActiveColor),m(H.verticalBox.x,H.verticalBox.y,H.verticalBox.width,H.verticalBox.height,e.style.scrollBarBoxBorderRadius),e.ctx.stroke(),e.ctx.fill()),ee=!0,e.visibleCells.unshift(H.verticalBar),e.visibleCells.unshift(H.verticalBox)),ee&&(e.ctx.strokeStyle=e.style.scrollBarCornerBorderColor,e.ctx.fillStyle=e.style.scrollBarCornerBackgroundColor,m(H.corner.x,H.corner.y,H.corner.width,H.corner.height,0),e.ctx.stroke(),e.ctx.fill(),e.visibleCells.unshift(H.corner)),S&&e.resize(!0),function(){var R=Ve,z=F,ie=E(),ke=he.y+he.h-Je,Y=e.attributes.columnGroupIndicatorPosition==="left",se=e.attributes.rowGroupIndicatorPosition==="top",te=e.ctx;te.save(),te.fillStyle=e.style.groupingAreaBackgroundColor,f(0,-z,A,z),f(-R,-z,R,L),te.restore();for(var Z=[],ce=0;ce<e.groupedColumns.length;ce++)for(var _=e.groupedColumns[ce],ye=0;ye<_.length;ye++)Z.push(Object.assign({row:ce},_[ye]));Z.length>0&&function(){for(var de=e.style.columnGroupRowHeight,fe=.5*de,me=.5*(de-fe),Ze=function(ht){var st=this,ve=Z[ht],vt=ve.row,lt=ve.collapsed,Ke=vt*de-z,Ge=Ke+.5*de,Qe=Ke+de-me,it=je-fe-me,Ue=function(xt){return _newArrowCheck(this,st),v(xt,Ke+me,fe,ve.collapsed)}.bind(this),ut=function(xt,kt){return _newArrowCheck(this,st),e.visibleGroups.push({type:"c",collapsed:lt,from:ve.from,to:ve.to,row:vt,x:xt+R,y:Ke+z,x2:kt+R,y2:Qe+z})}.bind(this),bt=ve.from<e.frozenColumn&&ve.to>=e.frozenColumn,Ct=ve.from>=e.frozenColumn;if(lt){var Xe=it+fe;if(ve.from>0){var w=ve.to+1,X=Ie[w];if(X)Xe=X.x+me;else{if(w=ve.from-1,!(X=Ie[w]))return"continue";Xe=X.x+X.w-.5*fe}if(w>=e.frozenColumn&&Xe<ie+je-me)return"continue"}var J=Xe+fe;te.save(),te.strokeStyle=e.style.groupIndicatorColor,te.fillStyle=e.style.groupIndicatorBackgroundColor,Ue(Xe),te.restore(),ut(Xe,J)}var ue=void 0,Te=Ie[ve.from],xe=Ie[ve.to],Ee=!0,De=!0;for(ue=ve.from;!Te&&ue<ve.to;)Te=Ie[++ue],Ee=!1;for(ue=ve.to;!xe&&ue>ve.from;)xe=Ie[--ue],De=!1;if(!Te||!xe)return"continue";var Re=xe.x+xe.w,_e=Te.x;if(bt){var mt=Ie[e.frozenColumn-1];if(mt){var wt=mt.x+mt.w;Y||(wt+=fe),wt>=Re&&(Re=(xe=mt).x+xe.w,De=!1)}}var ct=je+(Ct?ie:0);if(Re+(Y?0:fe)<ct)return"continue";Re-=me,_e+=me,te.save(),te.strokeStyle=e.style.groupIndicatorColor,te.fillStyle=e.style.groupIndicatorBackgroundColor;var pt=[];Y?(_e<(ct+=2*me)&&(_e=ct),ve.from===0&&(_e-=2*me),Re>=_e?(pt.push(_e,Ge,Re,Ge),De&&pt.push(Re,Qe)):Re=_e,Ue(_e-=fe),Re+=me-1):(_e<ct&&(_e=ct),ve.from===0&&(_e-=2*me),De&&(ve.to===e.frozenColumn-1?Re-=fe:Re+=2*me,Ue(Re)),_e>Re?_e=Re:(ve.from===0&&(Ee=!0,_e=it+fe),Ee&&pt.push(_e,Qe),pt.push(_e,Ge,Re,Ge)),_e-=me+1,De&&(Re+=fe)),s(pt),te.restore(),ut(_e,Re)},Oe=0;Oe<Z.length;Oe++)Ze(Oe)}();for(var x=[],N=0;N<e.groupedRows.length;N++)for(var ae=e.groupedRows[N],ne=0;ne<ae.length;ne++)x.push(Object.assign({col:N},ae[ne]));x.length>0&&function(){for(var de=e.style.rowGroupColumnWidth,fe=.5*de,me=.5*(de-fe),Ze=function(ht){var st=this,ve=x[ht],vt=ve.col,lt=ve.collapsed,Ke=vt*de-R,Ge=Ke+.5*de,Qe=Ke+de-me,it=Je-fe-me,Ue=function(xt){return _newArrowCheck(this,st),v(Ke+me,xt,fe,ve.collapsed)}.bind(this),ut=function(xt,kt){return _newArrowCheck(this,st),e.visibleGroups.push({type:"r",collapsed:lt,from:ve.from,to:ve.to,col:vt,x:Ke+R,y:xt+z,x2:Qe+R,y2:kt+z})}.bind(this),bt=ve.from<e.frozenRow&&ve.to>=e.frozenRow,Ct=ve.from>=e.frozenRow;if(lt){var Xe=it+fe;if(ve.from>0){var w=ve.to+1,X=oe[w];if(X)Xe=X.y;else{if(w=ve.from-1,!(X=oe[w]))return"continue";Xe=X.y+X.h-.5*fe}if(w>=e.frozenRow&&Xe<ke+Je-me)return"continue"}var J=Xe+fe;te.save(),te.strokeStyle=e.style.groupIndicatorColor,te.fillStyle=e.style.groupIndicatorBackgroundColor,Ue(Xe),te.restore(),ut(Xe,J)}var ue=void 0,Te=oe[ve.from],xe=oe[ve.to],Ee=!0,De=!0;for(ue=ve.from;!Te&&ue<ve.to;)Te=oe[++ue],Ee=!1;for(ue=ve.to;!xe&&ue>ve.from;)xe=oe[--ue],De=!1;if(!Te||!xe)return"continue";var Re=xe.y+xe.h,_e=Te.y;if(bt){var mt=oe[e.frozenRow-1];if(mt){var wt=mt.y+mt.h;se||(wt+=fe),wt>=Re&&(Re=(xe=mt).y+xe.h,De=!1)}}var ct=Je+(Ct?ke:0);if(Re+(se?0:fe)<ct)return"continue";Re-=me,_e+=me,te.save(),te.strokeStyle=e.style.groupIndicatorColor,te.fillStyle=e.style.groupIndicatorBackgroundColor;var pt=[];se?(_e<(ct+=2*me)&&(_e=ct),ve.from===0&&(_e-=2*me),Re>=_e?(pt.push(Ge,_e,Ge,Re),De&&pt.push(Qe,Re)):Re=_e,Ue(_e-=fe),Re+=me-1):(_e<ct&&(_e=ct),ve.from===0&&(_e-=2*me),De&&(ve.to===e.frozenRow-1&&(Re-=fe),Ue(Re)),_e>Re?_e=Re:(ve.from===0&&(Ee=!0,_e=it+fe),Ee&&pt.push(Qe,_e),pt.push(Ge,_e,Ge,Re),_e-=me+1),De&&(Re+=fe)),s(pt),te.restore(),ut(_e,Re)},Oe=0;Oe<x.length;Oe++)Ze(Oe)}()}(),e.ctx.save(),(e.attributes.showPerformance||e.attributes.debug)&&(i.length===0&&(i=c(0,t,1,0)),i.pop(),i.unshift(performance.now()-V)),e.attributes.debug&&(e.ctx.font=e.style.debugFont,(U={}).perf=(i.reduce(function(R,z){return R+z},0)/Math.min(o,i.length)).toFixed(1),U.perfDelta=i[0].toFixed(1),U.frozenColumnsWidth=E(),U.htmlImages=Object.keys(e.htmlImageCache).length,U.reorderObject="x: "+(e.reorderObject||{columnIndex:0}).columnIndex+", y: "+(e.reorderObject||{rowIndex:0}).rowIndex,U.reorderTarget="x: "+(e.reorderTarget||{columnIndex:0}).columnIndex+", y: "+(e.reorderTarget||{rowIndex:0}).rowIndex,U.scale=e.scale,U.startScale=e.startScale,U.scaleDelta=e.scaleDelta,U.zoomDeltaStart=e.zoomDeltaStart,U.touchLength=e.touchLength,U.touches="y0: "+(e.touchPosition||{y:0}).y+" y1: "+(e.touchPosition1||{y:0}).y,U.scrollBox=e.scrollBox.toString(),U.scrollIndex="x: "+e.scrollIndexLeft+", y: "+e.scrollIndexTop,U.scrollPixel="x: "+e.scrollPixelLeft+", y: "+e.scrollPixelTop,U.canvasOffset="x: "+e.canvasOffsetLeft+", y: "+e.canvasOffsetTop,U.touchDelta="x: "+e.touchDelta.x+", y: "+e.touchDelta.y,U.touchAnimateTo="x: "+e.touchAnimateTo.x+", y: "+e.touchAnimateTo.y,U.scrollAnimation="x: "+e.scrollAnimation.x+", y: "+e.scrollAnimation.y,U.touchPPS="x: "+e.xPPS+", y: "+e.yPPS,U.touchPPST="x: "+e.xPPST+", y: "+e.yPPST,U.touchDuration=e.touchDuration,U.pointerLockPosition=e.pointerLockPosition?e.pointerLockPosition.x+", "+e.pointerLockPosition.y:"",U.size="w: "+e.width+", h: "+e.height,U.mouse="x: "+e.mouse.x+", y: "+e.mouse.y,U.touch=e.touchStart?"x: "+e.touchStart.x+", y: "+e.touchStart.y:"",U.entities=e.visibleCells.length,U.hasFocus=e.hasFocus,U.dragMode=e.dragMode,e.currentCell&&(U.columnIndex=e.currentCell.columnIndex,U.rowIndex=e.currentCell.rowIndex,U.sortColumnIndex=e.currentCell.sortColumnIndex,U.sortRowIndex=e.currentCell.sortRowIndex,U.context=e.currentCell.context,U.dragContext=e.currentCell.dragContext,U.style=e.currentCell.style,U.type=e.currentCell.type),e.ctx.textAlign="right",e.ctx.fillStyle=e.style.debugBackgroundColor,f(0,0,e.width,e.height),Object.keys(U).forEach(function(R,z){var ie=R+": "+U[R];e.ctx.fillStyle=e.style.debugColor,b(ie,A-20,(e.attributes.showPerformance?140:24)+14*z)})),e.ctx.restore(),function(){if(e.attributes.showPerformance){var R=250,z=e.width-R-e.style.scrollBarWidth-2*e.style.scrollBarBorderWidth,ie=Je,ke=100;l.length===0&&(l=c(0,t,1,function(){return[0,0]})),a.length===0&&(a=c(0,t,1,function(){return[0,0]})),n.length===0&&(n=c(0,t,1,0)),e.ctx.lineWidth=.5,e.ctx.textAlign="left",e.ctx.font=e.style.debugFont,e.ctx.fillStyle=e.style.debugPerfChartBackground,f(z,ie,R,ke),[["Scroll Height",l,0,e.scrollBox.scrollHeight,e.style.debugScrollHeightColor,!1],["Scroll Width",l,1,e.scrollBox.scrollWidth,e.style.debugScrollWidthColor,!1],["Performance",i,void 0,200,e.style.debugPerformanceColor,!1],["Entities",n,void 0,1500,e.style.debugEntitiesColor,!1],["TouchPPSX",a,0,1e3,e.style.debugTouchPPSXColor,!0],["TouchPPSY",a,1,1e3,e.style.debugTouchPPSYColor,!0]].forEach(function(se,te){se.push(te),Y.apply(null,se)}),e.ctx.fillStyle=e.style.debugPerfChartBackground,n.pop(),n.unshift(e.visibleCells.length),l.pop(),l.unshift([e.scrollBox.scrollTop,e.scrollBox.scrollLeft]),a.pop(),a.unshift([e.yPPS,e.xPPS])}function Y(se,te,Z,ce,_,ye,x){var N;(function(ae,ne,de,fe,me,Ze,Oe,ht,st){var ve=ae/me.length,vt=ne/Oe;de+=e.canvasOffsetLeft,fe+=e.canvasOffsetTop,e.ctx.beginPath(),e.ctx.moveTo(de,fe+ne),me.forEach(function(lt){var Ke,Ge,Qe=Ze===void 0?lt:lt[Ze];st&&(Qe=Math.abs(Qe)),Ke=de+ve,Ge=fe+ne-Qe*vt,e.ctx.lineTo(Ke,Ge),de+=ve}),e.ctx.moveTo(de+ae,fe+ne),e.ctx.strokeStyle=ht,e.ctx.stroke()})(R,ke,z,ie,te,Z,ce,_,ye),e.ctx.fillStyle=_,f(3+z,ie+9+11*x,8,8),e.ctx.fillStyle=e.style.debugPerfChartTextColor,N=Z!==void 0?te[0][Z]:te[0],b(se+" "+(isNaN(N)?0:N).toFixed(3),14+z,ie+16+11*x)}}(),e.dispatchEvent("afterdraw",{})||e.ctx.restore()}}function et(R){var z=this;return Pe.findIndex(function(ie){return _newArrowCheck(this,z),R>=ie.from&&R<=ie.to}.bind(this))>=0}function rt(R,z,ie,ke){var Y=this;R.selectionBorder="";var se=ke?function(x,N){return _newArrowCheck(this,Y),isCellSelected(e.selections,x-ke.y,N-ke.x)}.bind(this):function(x,N){return _newArrowCheck(this,Y),isCellSelected(e.selections,x,N)}.bind(this),te=Math.max(K.length-1,0),Z=Math.max(Be.length-1,0),ce=R.isRowHeader,_=R.rowIndex,ye=R.columnIndex;!ce&&se(_,ye)&&(se(_-1,ye)&&_!==0||R.isHeader||(z.push([R,"t"]),R[ie+"BorderTop"]=!0,R[ie+"Border"]+="t"),(_>=Z||!se(_+1,ye))&&(z.push([R,"b"]),R[ie+"BorderBottom"]=!0,R[ie+"Border"]+="b"),ye!==0&&se(_,ye-1)||(z.push([R,"l"]),R[ie+"BorderLeft"]=!0,R[ie+"Border"]+="l"),(ye>=te||!se(_,ye+1))&&(z.push([R,"r"]),R[ie+"BorderRight"]=!0,R[ie+"Border"]+="r"))}function tt(R,z,ie){var ke=e.orders.rows[e.activeCell.rowIndex]===z||e.isRowSelected(z);return function(Y,se,te){var Z=this;if(Y.hidden)return 0;var ce,_,ye,x=Y.style||"cell",N=/HeaderCell/.test(x),ae=/cornerCell/.test(x),ne=x==="rowHeaderCell",de=x==="columnHeaderCell",fe=e.filterable.rows.includes(ie)&&e.filterable.columns.includes(se),me=e.style.cellWhiteSpace!=="nowrap",Ze=isCellSelected(e.selections,z,te),Oe=e.hovers.rowIndex===z&&(e.attributes.hoverMode==="row"||e.hovers.columnIndex===te),ht=e.selectedFilterButton.rowIndex==ie&&e.selectedFilterButton.columnIndex==se,st=e.activeCell.rowIndex===z&&e.activeCell.columnIndex===te,ve=x==="columnHeaderCellCap",vt=R?R[Y.name]:void 0,lt=Y.type==="canvas-datagrid",Ke=e.formatters[Y.type||"string"],Ge=0,Qe=0,it=e.sizes.columns[se]||Y.width,Ue={value:vt,row:R,header:Y},ut=!1;if(!(e.orders.columns[e.activeCell.columnIndex]===se||e.isColumnSelected(e.activeCell.viewColumnIndex))&&!ke||te!==-1&&z!==-1||(ut=ne?"activeRowHeaderCell":"activeColumnHeaderCell"),ve&&(it=A-$),it===void 0&&(it=e.style.cellWidth),it*=e.scale,$+it+e.style.cellBorderWidth<0&&($+=it+e.style.cellBorderWidth),st&&x!=="cornerCell"&&(x="activeCell"),e.visibleRows.indexOf(ie)!==-1||N||e.visibleRows.push(ie),ye=e.dispatchEvent("formatcellvalue",Ue),D=$,G=W,x==="cornerCell"?(D=0,G=0):ne?D=0:N&&(G=0),(_={type:lt?"canvas-datagrid-cell":Y.type,style:x,nodeType:"canvas-datagrid-cell",x:D,y:G,fontHeight:(e.style[x+"FontHeight"]||0)*e.scale,horizontalAlignment:e.style[x+"HorizontalAlignment"],verticalAlignment:e.style[x+"VerticalAlignment"],paddingLeft:(e.style[x+"PaddingLeft"]||0)*e.scale,paddingTop:(e.style[x+"PaddingTop"]||0)*e.scale,paddingRight:(e.style[x+"PaddingRight"]||0)*e.scale,paddingBottom:(e.style[x+"PaddingBottom"]||0)*e.scale,whiteSpace:e.style.cellWhiteSpace,lineHeight:e.style.cellLineHeight,lineSpacing:e.style.cellLineSpacing,offsetTop:e.canvasOffsetTop+G,offsetLeft:e.canvasOffsetLeft+D,scrollTop:e.scrollBox.scrollTop,scrollLeft:e.scrollBox.scrollLeft,active:st||ut,hovered:Oe,selected:Ze,width:it,height:ge,offsetWidth:it,offsetHeight:ge,parentNode:e.intf.parentNode,offsetParent:e.intf.parentNode,data:R,isCorner:ae,isHeader:N,isColumnHeader:de,isColumnHeaderCellCap:ve,isRowHeader:ne,isFilterable:fe,openedFilter:ht,rowOpen:q,header:Y,columnIndex:te,rowIndex:z,viewRowIndex:z,viewColumnIndex:te,boundRowIndex:e.getBoundRowIndexFromViewRowIndex(z),boundColumnIndex:e.getBoundColumnIndexFromViewColumnIndex(te),sortColumnIndex:se,sortRowIndex:ie,isGrid:lt,isNormal:!lt&&!ae&&!N,gridId:(e.attributes.name||"")+ie+":"+se,parentGrid:e.intf,innerHTML:"",activeHeader:ut,value:N&&!ne?Y.title||Y.name:vt,isRowTree:z>=0&&te==e.cellTree.rowTreeColIndex&&e.cellTree.rows.length>0&&e.cellTree.rows[z].icon,isColumnTree:te>=0&&e.cellTree.columns[z]&&e.cellTree.columns[z][te].icon}).calculatedLineHeight=_.fontHeight*_.lineHeight+_.lineSpacing,_.paddedWidth=_.width-_.paddingRight-_.paddingLeft,_.paddedHeight=_.height-_.paddingTop-_.paddingBottom,Ue.cell=_,_.userHeight=_.isHeader?e.sizes.rows[-1]:Q,_.userWidth=_.isHeader?e.sizes.columns.cornerCell:e.sizes.columns[se],e.visibleCells.unshift(_),function(M){var Ce=M.boundRowIndex;if(Ce>=-1==0){if(M.rowIndex!==-1)return;Ce=-1}oe[Ce]||(oe[Ce]={y:M.y,h:M.height})}(_),function(M){var Ce=M.columnIndex;Ie[Ce]||(Ie[Ce]={x:M.x,w:M.width})}(_),!e.dispatchEvent("beforerendercell",Ue)){if(e.ctx.fillStyle=e.style[x+"BackgroundColor"],e.ctx.strokeStyle=e.style[x+"BorderColor"],e.ctx.lineWidth=e.style[x+"BorderWidth"],Oe&&(e.ctx.fillStyle=e.style[x+"HoverBackgroundColor"],e.ctx.strokeStyle=e.style[x+"HoverBorderColor"]),Ze&&(e.ctx.fillStyle=e.style[x+"SelectedBackgroundColor"],e.ctx.strokeStyle=e.style[x+"SelectedBorderColor"]),ut&&(e.ctx.fillStyle=e.style[ut+"BackgroundColor"]),e.dispatchEvent("rendercell",Ue),_.isGrid&&(_.height!==Q&&(_.height=Q||e.style.cellHeightWithChildGrid,S=!0),_.width=e.sizes.columns[se]||e.style.cellWidthWithChildGrid),q&&!_.isRowHeader&&(_.height=e.sizes.rows[ie]||e.style.cellHeight),_.isGrid||(f(D,G,_.width,_.height),p(D,G,_.width,_.height)),e.ctx.save(),m(_.x,_.y,_.width,_.height,0),e.ctx.clip(),e.dispatchEvent("afterrendercell",Ue),_.height===ge||q&&!_.isRowHeader||(e.sizes.rows[N?-1:ie]=_.height,S=!0),_.width!==it&&(e.sizes.columns[se]=_.width,S=!0),ne&&e.attributes.tree&&(e.dispatchEvent("rendertreearrow",Ue)||(Qe=function(M,Ce,Me){var qe=e.style.treeArrowMarginTop*e.scale,We=e.style.treeArrowMarginRight*e.scale,Ye=e.style.treeArrowMarginLeft*e.scale,ot=e.style.treeArrowWidth*e.scale,at=e.style.treeArrowHeight*e.scale;return Ce+=e.canvasOffsetLeft,Me+=e.canvasOffsetTop,e.ctx.fillStyle=e.style.treeArrowColor,e.ctx.strokeStyle=e.style.treeArrowBorderColor,e.ctx.beginPath(),Ce+=Ye,Me+=qe,e.openChildren[M.rowIndex]?(e.ctx.moveTo(Ce,Me),e.ctx.lineTo(Ce+ot,Me),e.ctx.lineTo(Ce+.5*ot,Me+at),e.ctx.moveTo(Ce,Me)):(e.ctx.lineTo(Ce,Me),e.ctx.lineTo(Ce+at,Me+.5*ot),e.ctx.lineTo(Ce,Me+ot),e.ctx.lineTo(Ce,Me)),e.ctx.stroke(),e.ctx.fill(),Ye+ot+We}(_,e.style[x+"PaddingLeft"],G))),e.attributes.showRowNumbers&&ne||!ne){if(_.isGrid&&!e.dispatchEvent("beforerendercellgrid",Ue)){if(!e.childGrids[_.gridId]){if((ce=e.cellGridAttributes).name=e.attributes.saveAppearance?_.gridId:void 0,ce.component=!1,ce.parentNode=_,ce.data=vt,Ue.cellGridAttributes=ce,e.dispatchEvent("beforecreatecellgrid",Ue))return;e.childGrids[_.gridId]=e.createGrid(ce),e.sizes.rows[ie]=e.sizes.rows[ie]||e.style.cellGridHeight,S=!0}_.grid=e.childGrids[_.gridId],_.grid.parentNode=_,_.grid.visible=!0,_.grid.draw(),e.dispatchEvent("rendercellgrid",Ue)}else if(!_.isGrid&&(e.childGrids[_.gridId]&&(e.childGrids[_.gridId].parentNode.offsetHeight=0),N&&e.orderBy===Y.name&&(e.dispatchEvent("renderorderbyarrow",Ue)||(Ge=function(M,Ce){var Me=e.style.columnHeaderOrderByArrowMarginTop*e.scale,qe=e.style.columnHeaderOrderByArrowMarginLeft*e.scale,We=e.style.columnHeaderOrderByArrowMarginRight*e.scale,Ye=e.style.columnHeaderOrderByArrowWidth*e.scale,ot=e.style.columnHeaderOrderByArrowHeight*e.scale;return M+=e.canvasOffsetLeft,Ce+=e.canvasOffsetTop,e.ctx.fillStyle=e.style.columnHeaderOrderByArrowColor,e.ctx.strokeStyle=e.style.columnHeaderOrderByArrowBorderColor,e.ctx.beginPath(),M+=qe,Ce+=Me,e.orderDirection==="asc"?(e.ctx.lineTo(M,Ce+ot),e.ctx.lineTo(M+Ye,Ce+ot),e.ctx.lineTo(M+.5*Ye,Ce),e.ctx.lineTo(M,Ce+ot)):(e.ctx.moveTo(M,Ce),e.ctx.lineTo(M+Ye,Ce),e.ctx.lineTo(M+.5*Ye,Ce+ot),e.ctx.moveTo(M,Ce)),e.ctx.stroke(),e.ctx.fill(),qe+Ye+We}(D+e.style[x+"PaddingLeft"],0))),e.ctx.fillStyle=e.style[x+"Color"],Oe&&(e.ctx.fillStyle=e.style[x+"HoverColor"]),Ze&&(e.ctx.fillStyle=e.style[x+"SelectedColor"]),ut&&(e.ctx.fillStyle=e.style[ut+"Color"]),_.treeArrowWidth=Qe,_.orderByArrowWidth=Ge,(ye=ye!==void 0?ye:Ke?Ke(Ue):"")!==void 0||Ke||(ye="",console.warn("canvas-datagrid: Unknown format "+Y.type+" add a cellFormater")),_.formattedValue=(ye??"").toString(),e.columnFilters&&e.columnFilters[ye]!==void 0&&N&&(_.formattedValue=e.attributes.filterTextPrefix+ye),e.ctx.font=e.style[x+"FontHeight"]*e.scale+"px "+e.style[x+"FontName"],e.dispatchEvent("formattext",Ue)||(_.text=function(M,Ce){var Me=this;if(!M.formattedValue)return{lines:[{width:0,value:""}],width:0,height:M.calculatedLineHeight};var qe,We,Ye,ot,at,yt,St=M.formattedValue.split(Ce),ro=M.calculatedLineHeight,_t=[],Qt=e.style.cellWhiteSpace!=="nowrap",lo=e.attributes.autoResizeRows&&Qt,At=e.attributes.ellipsisText,Bt={width:0,value:""},io=Qt?M.paddedHeight:M.calculatedLineHeight;for(_t.push(Bt),Ye=e.ctx.measureText(" "+At).width,qe=0;qe<St.length;qe+=1){var Ft=(We=St[qe])[We.length-1]==="-"?"":Ce,zt=e.ctx.measureText(We+Ft);if(Bt.width+zt.width+Ye<M.paddedWidth)Bt.value+=We+Ft,Bt.width+=zt.width;else if(/\w-\w/.test(We)&&M.paddedWidth<zt.width){var Et=We.split("-");Et=Et.map(function(Jt,ao){return _newArrowCheck(this,Me),ao===Et.length-1?Jt:Jt+"-"}.bind(this)),St.splice.apply(St,[qe,1].concat(_toConsumableArray(Et))),qe-=1}else{if(Bt={width:zt.width,value:We+Ft},qe===0&&(_t=[]).push(Bt),(ro+=M.calculatedLineHeight)>io&&!lo){if(_t.length===0||(yt=_t[_t.length-1]).width<M.paddedWidth&&St.length===1)break;var Xt=at=yt.value+We;if((ot=e.ctx.measureText(at+At).width)>M.paddedWidth)for(var Ot=parseInt(at.length/2),Yt=-1;Ot>0;)at=Xt.substr(0,Ot*Yt+at.length),Yt=(ot=e.ctx.measureText(at+At).width)>M.paddedWidth?-1:1,Ot=parseInt(Ot/2);at+=Xt.length!=at.length?At:"",yt.value=at,yt.width=ot;break}qe>0&&_t.push(Bt)}}return{lines:_t,width:0,height:M.calculatedLineHeight*_t.length}}(_," ")),!e.dispatchEvent("rendertext",Ue))){if(_.innerHTML||Y.type==="html")u(_);else{var bt=0,Ct=!0;if(_.columnIndex==e.cellTree.rowTreeColIndex&&!_.isColumnHeader&&e.cellTree.rows.length>0&&Object.keys(e.cellTree.rows[_.rowIndex]).length>1&&(bt=g(_,e.cellTree.rows[_.rowIndex],!0)),!_.isRowHeader&&_.rowIndex>0&&e.cellTree.columns[_.rowIndex-1]&&e.cellTree.columns[_.rowIndex-1][_.columnIndex].icon){for(var Xe=_.rowIndex-1;Xe>=0&&e.cellTree.columns[Xe]&&e.cellTree.columns[Xe][_.columnIndex].icon;Xe--)if(!e.cellTree.columns[Xe][_.columnIndex].expand){Ct=!1;break}}Ct&&!_.isRowHeader&&e.cellTree.columns[_.rowIndex]&&e.cellTree.columns[_.rowIndex][_.columnIndex].icon&&e.viewData.length>0&&e.viewData[_.rowIndex][_.columnIndex].length>0&&(bt=g(_,e.cellTree.columns[_.rowIndex][_.columnIndex],!1)),Ct&&function(M){var Ce,Me,qe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,We=(M.text.lines.length,M.fontHeight*M.lineHeight),Ye=e.style.cellWhiteSpace!=="nowrap",ot=0;for(Ce=0;Ce<M.text.lines.length;Ce+=1){Me=M.text.lines[Ce];var at=Math.max(.5*(M.height-(Ye?M.text.height:M.calculatedLineHeight)),0)+We,yt=M.paddingLeft+qe+M.treeArrowWidth+M.orderByArrowWidth;M.horizontalAlignment==="right"?yt=M.paddingLeft+qe+M.paddedWidth-Me.width:M.horizontalAlignment==="center"&&(yt=M.paddingLeft+qe+(M.paddedWidth+M.paddingRight)/2-Me.width/2),M.verticalAlignment==="top"?at=M.calculatedLineHeight:M.verticalAlignment==="bottom"&&(at=M.height-M.paddingBottom-M.text.height),Me.height=We+M.lineSpacing,Me.offsetLeft=yt,Me.offsetTop=at,Me.x=M.x+yt,Me.y=M.y+ot+at,ot+=Me.height,b(Me.value,Me.x,Me.y)}e.attributes.debug&&M.active&&requestAnimationFrame(function(){e.ctx.font=e.style.debugFont,e.ctx.fillStyle=e.style.debugColor,b(JSON.stringify({x:M.x,y:M.y,h:M.height,w:M.width,pw:M.paddedWidth,idx:M.columnIndex,idx_ord:M.sortColumnIndex},null,"	"),M.x+14,M.y+14),b(JSON.stringify(M.text.lines.map(function(St){return{w:St.width,v:St.value.length}}),null,"	"),M.x+14,M.y+30)})}(_,bt)}me&&_.text&&_.text.height>Q&&(e.sizes.rows[N?-1:ie]=_.text.height,S=!0)}}st&&(we=_),rt(_,He,"selection"),function(M){(e.attributes.allowMovingSelection||e.mobile)&&(M.selectionBorderTop&&M.selectionBorderRight&&e.mobile&&(Fe.push([M,"tr"]),M.selectionHandle="tr"),M.selectionBorderTop&&M.selectionBorderLeft&&(e.mobile&&(Fe.push([M,"tl"]),M.selectionHandle="tl"),e.fillOverlay.handle&&(e.fillOverlay.snapTo={x:M.x,y:M.y})),M.selectionBorderBottom&&M.selectionBorderLeft&&e.mobile&&(Fe.push([M,"bl"]),M.selectionHandle="bl"),M.selectionBorderBottom&&M.selectionBorderRight&&(e.attributes.selectionHandleBehavior!=="none"||e.mobile)&&(Fe.push([M,"br"]),M.selectionHandle="br",e.fillOverlay.handle&&(e.fillOverlay.handle.x=M.x+M.width,e.fillOverlay.handle.y=M.y+M.height)),e.fillOverlay.handle&&(e.fillOverlay.snapTo.x===-1&&M.selectionBorderLeft&&(e.fillOverlay.snapTo.x=M.x),e.fillOverlay.snapTo.y===-1&&M.selectionBorderTop&&(e.fillOverlay.snapTo.y=M.y)))}(_),e.movingSelection&&rt(_,Ae,"move",e.moveOffset),e.ctx.restore(),fe&&function(M,Ce){var Me=M.x+M.width-e.style.filterButtonWidth-1,qe=M.y+M.height-e.style.filterButtonHeight-2;e.dispatchEvent("beforerenderfilterbutton",Ce)||(e.ctx.save(),e.ctx.strokeStyle=e.style.filterButtonBorderColor,e.ctx.fillStyle=e.style.filterButtonBackgroundColor,M.openedFilter?e.ctx.fillStyle=e.style.filterButtonActiveBackgroundColor:M.hovered&&e.hovers.onFilterButton&&(e.ctx.fillStyle=e.style.filterButtonHoverBackgroundColor),m(Me,qe,e.style.filterButtonWidth,e.style.filterButtonHeight,e.style.filterButtonBorderRadius),e.ctx.stroke(),e.ctx.fill(),function(We,Ye){var ot=(e.style.filterButtonHeight-e.style.filterButtonArrowHeight)/2*e.scale,at=(e.style.filterButtonWidth-e.style.filterButtonArrowWidth)/2*e.scale,yt=e.style.filterButtonArrowWidth*e.scale,St=e.style.filterButtonArrowHeight*e.scale;We+=e.canvasOffsetLeft,Ye+=e.canvasOffsetTop,e.ctx.fillStyle=e.style.filterButtonArrowColor,e.ctx.strokeStyle=e.style.filterButtonArrowBorderColor,e.ctx.beginPath(),We+=at,Ye+=ot,e.ctx.moveTo(We,Ye),e.ctx.lineTo(We+yt,Ye),e.ctx.lineTo(We+.5*yt,Ye+St),e.ctx.moveTo(We,Ye),e.ctx.stroke(),e.ctx.fill()}(Me,qe),e.ctx.clip(),e.dispatchEvent("afterrenderfilterbutton",Ce),e.ctx.restore())}(_);var w=e.orderings.columns&&e.orderings.columns.length>0;if(ne&&e.attributes.showRowNumbers&&e.attributes.showRowNumberGaps&&w===!1){var X=e.getBoundRowIndexFromViewRowIndex(z-1),J=X!==void 0&&_.boundRowIndex>0&&_.boundRowIndex-X>1;if(J&&Se.length>0&&(J=Se.find(function(M){return _newArrowCheck(this,Z),M.from===X&&M.to===_.boundRowIndex}.bind(this))>=0),J&&e.hiddenRowRanges.length>0)for(var ue=0;ue<e.hiddenRowRanges.length;ue++){var Te=_slicedToArray(e.hiddenRowRanges[ue],2),xe=Te[0],Ee=Te[1];if(_.boundRowIndex===Ee+1&&X===xe-1){J=!1;break}}if(J){var De=e.style.rowHeaderCellRowNumberGapHeight,Re=e.style.rowHeaderCellRowNumberGapColor;e.ctx.save(),e.ctx.fillStyle=Re,f(_.x,_.y-De/2,_.width,De),e.ctx.restore()}}if(de&&e.attributes.showUnhideColumnsIndicator){var _e,mt,wt=e.hovers.unhideIndicator,ct=e.style.unhideIndicatorSize,pt=$,xt=_.y+Math.max(.5*(_.height-ct),0),kt=function(M){return _newArrowCheck(this,Z),wt&&(wt.dir==="l"||wt.dir==="r")&&M>=wt.orderIndex0&&M<=wt.orderIndex1}.bind(this),It=function(M){return _newArrowCheck(this,Z),M>=0&&K[M]&&K[M].hidden}.bind(this),Nt=function(M,Ce,Me){if(_newArrowCheck(this,Z),e.visibleUnhideIndicators.push({x:M-1,y:xt-1,x2:M+ct+2,y2:xt+ct+2,orderIndex0:_e,orderIndex1:mt,dir:Ce}),!Me){var qe=_.text&&_.text.lines&&_.text.lines[0];if(qe){var We=Ge+Qe,Ye=We>0?We:qe.x,ot=qe.x+qe.width;if(M+ct>=Ye&&M<=ot)return}}d(M,xt,ct,Ce,Me)}.bind(this),gt=te-1,Vt=e.orders.columns[gt];if(It(Vt)){var eo=kt(Vt);for(_e=gt,mt=gt;--gt>=0&&It(e.orders.columns[gt]);)_e=gt;Nt(pt,"r",eo)}gt=te+1;var qt=e.orders.columns[gt];if(It(qt)){var to=kt(qt);for(_e=gt,mt=gt;++gt<e.orders.columns.length&&It(e.orders.columns[gt]);)mt=gt;Nt($+_.width-ct,"l",to)}}if(ne&&e.attributes.showUnhideRowsIndicator&&e.hiddenRowRanges.length>0){var Rt=e.hovers.unhideIndicator,Tt=e.style.unhideIndicatorSize,Dt=_.x+_.width-Tt-2,Wt=W,$t={},jt={};e.hiddenRowRanges.forEach(function(M){_newArrowCheck(this,Z),$t[M[0]-1]=M,jt[M[1]+1]=M}.bind(this));var Lt,Ht,Mt=_.rowIndex+Le,Gt=function(){return _newArrowCheck(this,Z),Rt&&(Rt.dir==="t"||Rt.dir==="b")&&Mt>=Rt.orderIndex0-1&&Mt<=Rt.orderIndex1+1}.bind(this),Ut=function(M,Ce,Me){_newArrowCheck(this,Z),e.visibleUnhideIndicators.push({x:Dt-1,y:M-1,x2:Dt+Tt+2,y2:M+Tt+2,orderIndex0:Lt,orderIndex1:Ht,dir:Ce}),d(Dt,M,Tt,Ce,Me)}.bind(this),Pt=$t[Mt];if(Pt){var oo=Wt+_.height-Tt,Kt=_slicedToArray(Pt,2);Lt=Kt[0],Ht=Kt[1],Ut(oo,"t",Gt())}if(Pt=jt[Mt]){var no=Wt,Zt=_slicedToArray(Pt,2);Lt=Zt[0],Ht=Zt[1],Ut(no,"b",Gt())}}return $+=_.width+($e?0:e.style.cellBorderWidth),_.width}}}function ft(R,z){var ie,ke,Y,se,te=K.length;if(W-2*ge>L||(pe=Be[R],q=e.openChildren[R],Y=(e.sizes.rows[R]||e.style.cellHeight)*e.scale,ke=(q?e.sizes.trees[R]:0)*e.scale,W<-(Q=Y+ke)))return!1;for(e.attributes.showRowHeaders&&($+=je),ge=Q,se=e.scrollIndexLeft;se<te;se+=1)if(et(se)||(ie=e.orders.columns[se],$+=tt(pe,R,z)(K[ie],ie,se)),$>e.width){e.scrollIndexRight=se,e.scrollPixelRight=$;break}for($=1,e.attributes.showRowHeaders&&($+=je),se=0;se<e.frozenColumn&&(et(se)||(ie=e.orders.columns[se],$+=tt(pe,R,z)(K[ie],ie,se)),!($>e.width));se+=1);if(e.lastFrozenColumnPixel=$,ge=Q,$=-e.scrollBox.scrollLeft+e.scrollPixelLeft+e.style.cellBorderWidth,T=e.childGrids[R],R!==Be.length&&q){if(T.visible=!0,T.parentNode={offsetTop:W+Y+e.canvasOffsetTop,offsetLeft:je-1+e.canvasOffsetLeft,offsetHeight:ke,offsetWidth:e.width-je-e.style.scrollBarWidth-1,offsetParent:e.intf.parentNode,parentNode:e.intf.parentNode,style:e.style,nodeType:"canvas-datagrid-tree",scrollTop:e.scrollBox.scrollTop,scrollLeft:e.scrollBox.scrollLeft,rowIndex:R,columnGroupsAreaHeight:F,rowGroupsAreaWidth:Ve},e.intf.parentNode){var Z=e.intf.parentNode,ce=Z.columnGroupsAreaHeight,_=Z.rowGroupsAreaWidth;T.parentNode.columnGroupsAreaHeight+=ce||0,T.parentNode.rowGroupsAreaWidth+=_||0}e.visibleCells.unshift({rowIndex:R,columnIndex:0,y:T.parentNode.offsetTop,x:T.parentNode.offsetLeft,height:T.height,width:T.width,style:"tree-grid",type:T.parentNode.nodeType}),T.draw()}else T&&(T.parentNode.offsetHeight=0,delete e.sizes.trees[R]);return Ne.push([pe,R,z,W,Q]),e.visibleRowHeights[R]=Q,W+=ge+($e?0:e.style.cellBorderWidth),!0}}}function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function createCommonjsModule(e,i,r){return e(r={path:i,exports:{},require:function(o,t){return commonjsRequire(o,t??r.path)}},r.exports),r.exports}function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var dist=createCommonjsModule(function(e){e.exports=function(i){var r={};function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return i[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=i,o.c=r,o.d=function(t,n,l){o.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:l})},o.r=function(t){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,n){if(1&n&&(t=o(t)),8&n||4&n&&_typeof(t)=="object"&&t&&t.__esModule)return t;var l=Object.create(null);if(o.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:t}),2&n&&typeof t!="string")for(var a in t)o.d(l,a,function(c){return t[c]}.bind(null,a));return l},o.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(n,"a",n),n},o.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},o.p="",o(o.s=0)}([function(i,r,o){Object.defineProperty(r,"__esModule",{value:!0});var t=o(1),n=Object.keys(t.default).reduce(function(l,a){return l.concat(t.default[a])},[]);r.default=function(l){return n.indexOf(l.key)===-1}},function(i,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.default={modifier:["Alt","AltGraph","CapsLock","Control","Fn","FnLock","Meta","NumLock","ScrollLock","Shift","Symbol","SymbolLock"],legacyModifier:["Hyper","Super"],whiteSpace:["Enter","Tab"],navigation:["ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Home","PageDown","PageUp"],editing:["Backspace","Clear","Copy","CrSel","Cut","Delete","EraseEof","ExSel","Insert","Paste","Redo","Undo"],ui:["Accept","Again","Attn","Cancel","ContextMenu","Escape","Execute","Find","Help","Pause","Play","Props","Select","ZoomIn","ZoomOut"],device:["BrightnessDown","BrightnessUp","Eject","LogOff","Power","PowerOff","PrintScreen","Hibernate","Standby","WakeUp"],imeCompositionKeys:["AllCandidates","Alphanumeric","CodeInput","Compose","Convert","Dead","FinalMode","GroupFirst","GroupLast","GroupNext","GroupPrevious","ModeChange","NextCandidate","NonConvert","PreviousCandidate","Process","SingleCandidate"],koreanSpecific:["HangulMode","HanjaMode","JunjaMode"],japaneseSpecific:["Eisu","Hankaku","Hiragana","HiraganaKatakana","KanaMode","KanjiMode","Katakana","Romaji","Zenkaku","ZenkakuHankaku"],commonFunction:["F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","Soft1","Soft2","Soft3","Soft4"],multimedia:["ChannelDown","ChannelUp","Close","MailForward","MailReply","MailSend","MediaClose","MediaFastForward","MediaPause","MediaPlay","MediaPlayPause","MediaRecord","MediaRewind","MediaStop","MediaTrackNext","MediaTrackPrevious","New","Open","Print","Save","SpellCheck"],multimediaNumpad:["Key11","Key12"],audio:["AudioBalanceLeft","AudioBalanceRight","AudioBassBoostDown","AudioBassBoostToggle","AudioBassBoostUp","AudioFaderFront","AudioFaderRear","AudioSurroundModeNext","AudioTrebleDown","AudioTrebleUp","AudioVolumeDown","AudioVolumeUp","AudioVolumeMute","MicrophoneToggle","MicrophoneVolumeDown","MicrophoneVolumeUp","MicrophoneVolumeMute"],speech:["SpeechCorrectionList","SpeechInputToggle"],application:["LaunchApplication1","LaunchApplication2","LaunchCalendar","LaunchContacts","LaunchMail","LaunchMediaPlayer","LaunchMusicPlayer","LaunchPhone","LaunchScreenSaver","LaunchSpreadsheet","LaunchWebBrowser","LaunchWebCam","LaunchWordProcessor"],browser:["BrowserBack","BrowserFavorites","BrowserForward","BrowserHome","BrowserRefresh","BrowserSearch","BrowserStop"],mobilePhone:["AppSwitch","Call","Camera","CameraFocus","EndCall","GoBack","GoHome","HeadsetHook","LastNumberRedial","Notification","MannerMode","VoiceDial"],tv:["TV","TV3DMode","TVAntennaCable","TVAudioDescription","TVAudioDescriptionMixDown","TVAudioDescriptionMixUp","TVContentsMenu","TVDataService","TVInput","TVInputComponent1","TVInputComponent2","TVInputComposite1","TVInputComposite2","TVInputHDMI1","TVInputHDMI2","TVInputHDMI3","TVInputHDMI4","TVInputVGA1","TVMediaContext","TVNetwork","TVNumberEntry","TVPower","TVRadioService","TVSatellite","TVSatelliteBS","TVSatelliteCS","TVSatelliteToggle","TVTerrestrialAnalog","TVTerrestrialDigital","TVTimer"],mediaControls:["AVRInput","AVRPower","ColorF0Red","ColorF1Green","ColorF2Yellow","ColorF3Blue","ColorF4Grey","ColorF5Brown","ClosedCaptionToggle","Dimmer","DisplaySwap","DVR","Exit","FavoriteClear0","FavoriteClear1","FavoriteClear2","FavoriteClear3","FavoriteRecall0","FavoriteRecall1","FavoriteRecall2","FavoriteRecall3","FavoriteStore0","FavoriteStore1","FavoriteStore2","FavoriteStore3","Guide","GuideNextDay","GuidePreviousDay","Info","InstantReplay","Link","ListProgram","LiveContent","Lock","MediaApps","MediaAudioTrack","MediaLast","MediaSkipBackward","MediaSkipForward","MediaStepBackward","MediaStepForward","MediaTopMenu","NavigateIn","NavigateNext","NavigateOut","NavigatePrevious","NextFavoriteChannel","NextUserProfile","OnDemand","Pairing","PinPDown","PinPMove","PinPToggle","PinPUp","PlaySpeedDown","PlaySpeedReset","PlaySpeedUp","RandomToggle","RcLowBattery","RecordSpeedNext","RfBypass","ScanChannelsToggle","ScreenModeNext","Settings","SplitScreenToggle","STBInput","STBPower","Subtitle","Teletext","VideoModeNext","Wink","ZoomToggle"]}}]).default}),isPrintableKeyEvent=getDefaultExportFromCjs(dist),isSupportedHtml=function(e){var i=this;return[/(?:^(<meta[^>]*>)?[\s\S]*<div[^>]*>)/,/(?:^(<meta[^>]*>)?[\s\S]*<table[^>]*>)/,/(?:^(<meta[^>]*>)?[\s\S]*<span[^>]*>)/,/(?:<!--StartFragment-->[\s\S]*<tr[^>]*>)/,/(?:<!--StartFragment-->[\s\S]*<td[^>]*>)/].some(function(r){return _newArrowCheck(this,i),r.test(e)}.bind(this))},IGNORE_NODETYPES=[8,3],isHtmlTable=function(e){return/(?:<table[^>]*>)|(?:<tr[^]*>)/.test(e)},sanitizeElementData=function(e){var i=e.nodeType===1?e.innerText:e.data;return String(i).replace(/\s+/g," ").trim()},parseHtmlText=function(e){var i=this,r=new DOMParser().parseFromString(e,"text/html"),o=r.querySelector("div")||r.querySelector("span");return sanitizeElementData(o).split(`
`).map(function(t){var n=this;return _newArrowCheck(this,i),t.split("	").map(function(l){return _newArrowCheck(this,n),{value:[{value:l}]}}.bind(this))}.bind(this))},parseHtmlTable=function(e){var i,r=[],o=_createForOfIteratorHelper(new DOMParser().parseFromString(e,"text/html").querySelectorAll("table tr"));try{for(o.s();!(i=o.n()).done;){var t,n=i.value,l=[],a=_createForOfIteratorHelper(n.childNodes);try{for(a.s();!(t=a.n()).done;){var c=t.value;if(!IGNORE_NODETYPES.includes(c.nodeType)){var u={value:[]},s=sanitizeElementData(c);s&&u.value.push({value:s}),l.push(u)}}}catch(v){a.e(v)}finally{a.f()}r.push(l)}}catch(v){o.e(v)}finally{o.f()}return r},parseText=function(e){var i=this;return e.split(`
`).map(function(r){var o=this;return _newArrowCheck(this,i),r.split("	").map(function(t){return _newArrowCheck(this,o),{value:[{value:t}]}}.bind(this))}.bind(this))},parseData=function(e,i){return i==="text/html"&&isHtmlTable(e)?parseHtmlTable(e):i==="text/html"?parseHtmlText(e):parseText(e)},htmlSafe=function(e){return typeof e!="string"?e:e.replace(/</g,"&lt;").replace(/>/g,"&gt;")},createTextString=function(e,i){var r=this;return i?e.map(function(o){return _newArrowCheck(this,r),Object.values(o).join("	")}.bind(this)).join(`
`):e.map(function(o){return _newArrowCheck(this,r),Object.values(o).join("")}.bind(this)).join("")},createHTMLString=function(e,i){var r=this;if(!i)return createTextString(e,i);var o="<table>";return o+=e.map(function(t){var n=this;return _newArrowCheck(this,r),"<tr>"+Object.values(t).map(function(l){return _newArrowCheck(this,n),["<td>",htmlSafe(l),"</td>"].join("")}.bind(this)).join("")+"</tr>"}.bind(this)).join(""),o+="</table>"};function events(e){var i;e.stopPropagation=function(r){r.stopPropagation()},e.addEventListener=function(r,o){e.events[r]=e.events[r]||[],e.events[r].unshift(o)},e.removeEventListener=function(r,o){(e.events[r]||[]).forEach(function(t,n){o===t&&e.events[r].splice(n,1)})},e.dispatchEvent=function(r,o){var t;function n(){t=!0}if(o=r.type?r:o||{},r=r.type||r,e.events[r])return e.events[r].forEach(function(l){o.ctx=e.ctx,o.preventDefault=n,l.apply(e.intf,[o])}),t},e.getRatio=function(){return Math.min(e.attributes.maxPixelRatio,(window.devicePixelRatio||1)/(e.ctx.webkitBackingStorePixelRatio||e.ctx.mozBackingStorePixelRatio||e.ctx.msBackingStorePixelRatio||e.ctx.oBackingStorePixelRatio||e.ctx.backingStorePixelRatio||1))},e.refreshScrollCacheX=function(){var r=this,o=e.getSchema();e.scrollCache.x=[];var t=0,n=e.getCollapsedColumnGroups(),l=function(a){var c=this;return _newArrowCheck(this,r),n.findIndex(function(u){return _newArrowCheck(this,c),a>=u.from&&a<=u.to}.bind(this))>=0}.bind(this);return o.reduce(function(a,c,u){var s=e.orders.columns[u],v=e.getColumnWidth(s);return o[s].hidden||l(u)||(a+=v),u<e.frozenColumn?(e.scrollCache.x[u]=a,t=a):e.scrollCache.x[u]=Math.max(t+v,a),a},0)||0},e.resize=function(r){if(e.canvas){var o,t,n={x:0,y:0,height:0,width:0,style:"vertical-scroll-bar"},l={x:0,y:0,height:0,width:0,style:"horizontal-scroll-bar"},a={x:0,y:0,height:0,width:0,style:"vertical-scroll-box"},c={x:0,y:0,height:0,width:0,style:"horizontal-scroll-box"},u={x:0,y:0,height:0,width:0,isCorner:!0,isScrollBoxCorner:!0,style:"scroll-box-corner"},s=2*e.style.scrollBarBoxMargin,v=2*e.style.scrollBarBorderWidth,d=.5*e.style.scrollBarBoxMargin,g=e.style.scrollBarWidth+2*e.style.scrollBarBorderWidth,m=e.getRatio(),f=e.style.gridBorderCollapse==="collapse"?1:2,p=e.style.cellBorderWidth*f,b=e.style.columnHeaderCellBorderWidth*f,k=0,C=0,I=(e.viewData||[]).length,P=e.getColumnHeaderCellHeight(),E=e.getRowHeaderCellWidth(),y=e.getColumnGroupAreaHeight(),B=e.getRowGroupAreaWidth(),S=e.style.cellHeight;for(C=e.refreshScrollCacheX(),e.scrollCache.y=[],o=0;o<I;o+=1)e.scrollCache.y[o]=k,k+=((e.sizes.rows[o]||S)+(e.sizes.trees[o]||0))*e.scale+(e.frozenRow>o&&e.sizes.trees[o]||0);if(I>1&&(e.scrollCache.y[o]=k),e.attributes.showNewRow&&(k+=S),e.attributes.snapToRow&&(k+=e.style.cellHeight),q(),e.isChildGrid?(e.width=e.parentNode.offsetWidth,e.height=e.parentNode.offsetHeight):e.height===e.canvas.offsetHeight&&e.width===e.canvas.offsetWidth||(e.height=e.canvas.offsetHeight,e.width=e.canvas.offsetWidth,e.canvasOffsetLeft=e.args.canvasOffsetLeft||0,e.canvasOffsetTop=e.args.canvasOffsetTop||0),e.scrollBox.top=P+y+b,e.scrollBox.left=E+B,T(),G(),e.scrollBox.horizontalBarVisible&&(e.style.height!=="auto"||e.isChildGrid||(e.height+=g),k+=g,q(),T(),G()),e.scrollBox.verticalBarVisible&&(e.style.width!=="auto"||e.isChildGrid||(e.width+=g),C+=g,q(),T(),G()),T(),e.scrollBox.scrollWidth=C-e.scrollBox.width,e.scrollBox.scrollHeight=k-e.scrollBox.height,e.frozenColumn>0?e.scrollBox.widthBoxRatio=(e.scrollBox.width-e.scrollCache.x[e.frozenColumn-1])/C:e.scrollBox.widthBoxRatio=e.scrollBox.width/C,e.scrollBox.scrollBoxWidth=e.scrollBox.width*e.scrollBox.widthBoxRatio-e.style.scrollBarWidth-v-d,e.scrollBox.heightBoxRatio=(e.scrollBox.height-P-y-e.scrollCache.y[e.frozenRow])/k,e.scrollBox.scrollBoxHeight=e.scrollBox.height*e.scrollBox.heightBoxRatio-e.style.scrollBarWidth-v-d,e.scrollBox.scrollBoxWidth=Math.max(e.scrollBox.scrollBoxWidth,e.style.scrollBarBoxMinSize),e.scrollBox.scrollBoxHeight=Math.max(e.scrollBox.scrollBoxHeight,e.style.scrollBarBoxMinSize),l.x+=E,l.y+=e.height-e.style.scrollBarWidth-d-y,l.width=e.width-e.style.scrollBarWidth-E-B-d-s,l.height=e.style.scrollBarWidth+e.style.scrollBarBorderWidth+d,c.y=l.y+e.style.scrollBarBoxMargin,c.width=e.scrollBox.scrollBoxWidth,c.height=e.style.scrollBarBoxWidth,n.x+=e.width-B-e.style.scrollBarWidth-e.style.scrollBarBorderWidth-d,n.y+=P+e.scrollCache.y[e.frozenRow],n.width=e.style.scrollBarWidth+e.style.scrollBarBorderWidth+d,n.height=e.height-P-y-e.style.scrollBarWidth-d-s,a.x=n.x+e.style.scrollBarBoxMargin,a.y+=e.scrollCache.y[e.frozenRow],a.width=e.style.scrollBarBoxWidth,a.height=e.scrollBox.scrollBoxHeight,u.x=l.x+l.width+s,u.y=n.y+n.height+s,u.width=e.style.scrollBarWidth+e.style.scrollBarBorderWidth,u.height=e.style.scrollBarWidth+e.style.scrollBarBorderWidth,e.scrollBox.entities={horizontalBar:l,horizontalBox:c,verticalBar:n,verticalBox:a,corner:u},e.scrollBox.bar={v:n,h:l},e.scrollBox.box={v:a,h:c},e.page=Math.max(1,e.visibleRows.length-3-e.attributes.pageUpDownOverlap),!e.isChildGrid){var V=e.width*m,D=e.height*m;e.canvas.width===V&&e.canvas.height===D||(e.canvas.width=V,e.canvas.height=D,e.ctx.scale(m,m))}return e.resizeEditInput(),e.scroll(!0),r&&e.draw(!0),e.dispatchEvent("resize",{}),!0}function G(){e.scrollBox.horizontalBarVisible=e.style.width!=="auto"&&C>e.scrollBox.width&&e.style.overflowX!=="hidden"||e.style.overflowX==="scroll",e.scrollBox.horizontalBoxVisible=C>e.scrollBox.width,e.scrollBox.verticalBarVisible=e.style.height!=="auto"&&k>e.scrollBox.height&&e.style.overflowY!=="hidden"||e.style.overflowY==="scroll",e.scrollBox.verticalBoxVisible=k>e.scrollBox.height}function T(){e.scrollBox.width=e.width-E-B,e.scrollBox.height=e.height-P-y}function q(){e.isChildGrid||(t={height:P+y+k+p+1,width:C+E+p+B},["width","height"].forEach(function(Q){["auto",void 0].indexOf(e.style[Q])!==-1&&["auto",void 0].indexOf(e.appliedInlineStyles[Q])!==-1?e.parentNodeStyle[Q]=t[Q]+"px":["auto",void 0].indexOf(e.style[Q])==-1&&["auto",void 0].indexOf(e.appliedInlineStyles[Q])==-1&&(e.parentNodeStyle[Q]=e.style[Q],e.isComponent&&(e.canvas.style[Q]=e.style[Q]))}))}},e.scroll=function(r){var o=e.getSchema(),t=(e.viewData||[]).length,n=e.style.cellHeight;for(e.scrollIndexTop=Math.floor(t*(e.scrollBox.scrollTop/e.scrollBox.scrollHeight)-100),e.scrollIndexTop=Math.max(e.scrollIndexTop,0),e.scrollPixelTop=e.scrollCache.y[e.scrollIndexTop],e.scrollBox.scrollHeight===0&&(e.scrollIndexTop=0),e.scrollPixelTop=0,e.scrollIndexLeft=e.frozenColumn,e.scrollPixelLeft=0;e.scrollPixelTop<e.scrollBox.scrollTop&&e.scrollIndexTop<e.viewData.length;)e.scrollIndexTop+=1,e.scrollPixelTop=e.scrollCache.y[e.scrollIndexTop];for(;e.scrollPixelLeft<e.scrollBox.scrollLeft+1&&e.scrollIndexLeft<o.length;)e.scrollPixelLeft=e.scrollCache.x[e.scrollIndexLeft],e.scrollIndexLeft+=1;o.length>0&&(e.scrollIndexLeft=Math.max(e.scrollIndexLeft-1,0),e.scrollPixelLeft-=e.getColumnWidth(e.orders.columns[e.scrollIndexLeft])),(e.viewData||[]).length>0&&(e.scrollIndexTop=Math.max(e.scrollIndexTop-1,0),e.scrollPixelTop=Math.max(e.scrollPixelTop-(e.viewData[e.scrollIndexTop]?(e.sizes.rows[e.scrollIndexTop]||n)+(e.sizes.trees[e.scrollIndexTop]||0):n)*e.scale,0)),e.ellipsisCache={},r||e.draw(!0),requestAnimationFrame(e.resizeEditInput),e.dispatchEvent("scroll",{top:e.scrollBox.scrollTop,left:e.scrollBox.scrollLeft})},e.mousemove=function(r,o){if(!e.contextMenu&&!e.input){if(e.draggingItem&&r.which===0)return e.stopFreezeMove(r),void e.mouseup(r);e.mouse=o||e.getLayerPos(r);var t,n,l,a,c=(r.ctrlKey||r.metaKey||e.attributes.persistantSelectionMode)&&!e.attributes.singleSelectionMode,u=e.getSchema(),s=e.mouse.x,v=e.mouse.y,d=e.getCellAt(s,v),g=!1,m=!1,f={NativeEvent:r,cell:d,x:s,y:v},p=e.currentCell;if(clearTimeout(e.scrollTimer),e.isInGrid({x:s,y:v})||(e.hasFocus=!1),!e.dispatchEvent("mousemove",f)){if(d&&e.currentCell&&(e.rowBoundaryCrossed=e.currentCell.rowIndex!==d.rowIndex,e.columnBoundaryCrossed=e.currentCell.columnIndex!==d.columnIndex,e.cellBoundaryCrossed=e.rowBoundaryCrossed||e.columnBoundaryCrossed,["row","column","cell"].forEach(function(B){e[B+"BoundaryCrossed"]&&(f.cell=p,e.dispatchEvent(B+"mouseout",f),f.cell=d,e.dispatchEvent(B+"mouseover",f))})),e.currentCell=d,!e.draggingItem&&d&&(d.context==="cell"||d.context===e.cursorGrab)){var b=e.getUnhideIndicator(e.mouse.x,e.mouse.y);if(b)return e.cursor="pointer",e.hovers={unhideIndicator:b},void e.draw()}if(e.hovers={},!e.draggingItem&&d){if(e.dragItem=d,e.dragMode=d.dragContext,e.cursor=d.context,d.context==="cell"&&(e.cursor="default",e.hovers={rowIndex:d.rowIndex,columnIndex:d.columnIndex,onFilterButton:!1,onCellTreeIcon:!1},d.isFilterable&&s>d.x+d.width+e.canvasOffsetLeft-e.style.filterButtonWidth&&s<d.x+d.width+e.canvasOffsetLeft&&v>d.y+d.height+e.canvasOffsetTop-e.style.filterButtonHeight&&v<d.y+d.height+e.canvasOffsetTop&&(e.hovers.onFilterButton=!0,e.draw()),d.isRowTree||d.isColumnTree)){var k=d.isRowTree?e.cellTree.rows[d.rowIndex].parentCount:0,C=e.style.cellTreeIconWidth*e.scale,I=d.x+d.paddingLeft+e.canvasOffsetLeft+e.style.cellTreeIconMarginLeft+k*(C+d.paddingLeft),P=d.y+e.canvasOffsetTop+e.style.cellTreeIconMarginTop*e.scale;s>=I&&s<=I+C&&v>=P&&v<P+C&&(e.hovers.onCellTreeIcon=!0,e.draw())}if(e.selecting||e.reorderObject){if(a={x:Math.abs(e.dragStart.x-s),y:Math.abs(e.dragStart.y-v)},e.dragStartObject.columnIndex!==-1&&r.shiftKey&&(e.dragStartObject={rowIndex:e.activeCell.rowIndex,columnIndex:e.activeCell.columnIndex}),n={top:Math.min(e.dragStartObject.rowIndex,d.rowIndex),left:Math.min(e.dragStartObject.columnIndex,d.columnIndex),bottom:Math.max(e.dragStartObject.rowIndex,d.rowIndex),right:Math.max(e.dragStartObject.columnIndex,d.columnIndex)},e.dragStartObject.columnIndex===-1&&(l=e.getSelectionBounds(),n.left=-1,n.right=u.length-1,n.top=Math.min(l.top,d.rowIndex),n.bottom=Math.max(l.bottom,d.rowIndex),n.top<0&&(n.top=0)),e.dragStartObject.rowIndex===-1&&(l=e.getSelectionBounds(),n.left=d.columnIndex===void 0?l.left:Math.min(l.left,d.columnIndex),n.right=d.columnIndex===void 0?l.right:Math.max(l.right,d.columnIndex),n.top=-1,n.bottom=e.viewData.length-1,n.left<0&&(n.left=0),n.left!=n.right?e.isMultiColumnsSelected=!0:e.isMultiRowsSelected=!1),e.dragStartObject.rowIndex===d.rowIndex&&e.dragStartObject.columnIndex===d.columnIndex||(e.ignoreNextClick=!0),e.cellBoundaryCrossed||a.x===0&&a.y===0||e.attributes.selectionMode==="row")if(d.rowIndex===void 0||e.attributes.selectionMode!=="row"&&e.dragStartObject.columnIndex!==-1||!e.rowBoundaryCrossed)if(d.rowIndex===void 0||e.attributes.selectionMode!=="column"&&e.dragStartObject.rowIndex!==-1||!e.columnBoundaryCrossed){if(e.attributes.selectionMode!=="row"){if(d.hovered&&e.hovers.onFilterButton)return d.openedFilter?(d.openedFilter=!1,e.selectedFilterButton={columnIndex:-1,rowIndex:-1}):(e.selectedFilterButton.rowIndex=d.rowIndex,e.selectedFilterButton.columnIndex=d.columnIndex,e.contextmenuEvent(r,{x:d.x+d.width-e.style.filterButtonWidth,y:d.y+d.height,rect:{left:0,top:0}})),void e.draw();if(d.hovered&&e.hovers.onCellTreeIcon&&r.type=="mousedown")return void e.toggleCollapseTree(d.rowIndex,d.columnIndex);if(e.selectedFilterButton={columnIndex:-1,rowIndex:-1},e.hovers.onFilterButton||e.hovers.onCellTreeIcon)return;e.dragAddToSelection||d.rowIndex===void 0?e.isCellSelected(d)||e.selectCell(d):e.isCellSelected(d)&&e.unselectCell(d)}}else e.dragStartObject.columnIndex<d.columnIndex?(n.left=e.dragStartObject.columnIndex,n.right=d.columnIndex):(n.left=d.columnIndex,n.right=e.dragStartObject.columnIndex);else e.dragStartObject.rowIndex<d.rowIndex?(n.top=e.dragStartObject.rowIndex,n.bottom=d.rowIndex):(n.top=d.rowIndex,n.bottom=e.dragStartObject.rowIndex);if(!(e.selectionBounds&&n.top===e.selectionBounds.top&&n.left===e.selectionBounds.left&&n.bottom===e.selectionBounds.bottom&&n.right===e.selectionBounds.right||c))if(d.hovered&&e.hovers.onFilterButton||e.clearSelections(),n.top===-1&&(n.top=0),l=n,e.attributes.selectionMode==="row")for(t=l.top;t<=l.bottom;t+=1)e.selectRow(t,!0,null,!0);else e.selectArea(l,!0),e.activeCell.rowIndex=l.top,e.activeCell.columnIndex=l.left,l.left==-1&&l.top!==l.bottom&&(e.activeCell.columnIndex=0,e.isMultiRowsSelected=!0,e.isMultiColumnsSelected=!1)}else e.movingSelectionHandle&&(a={x:Math.abs(e.dragStart.x-s),y:Math.abs(e.dragStart.y-v)},e.fillOverlay.direction==="y"?m=!0:e.fillOverlay.direction==="x"&&(g=!0));if(a)if(e.attributes.autoScrollOnMousemove||g||m){var E=!g&&a.y>e.attributes.autoScrollMargin,y=!m&&a.x>e.attributes.autoScrollMargin;E&&!y?e.autoScrollZone(r,-1,v,c):y&&!E?e.autoScrollZone(r,s,-1,c):y&&E&&e.autoScrollZone(r,s,v,c)}else e.autoScrollZone(r,s,v,c)}e.getColumnGroupAt(e.mouse.x,e.mouse.y)&&(e.cursor="pointer"),e.getRowGroupAt(e.mouse.x,e.mouse.y)&&(e.cursor="pointer"),e.cellBoundaryCrossed=!1,e.rowBoundaryCrossed=!1,e.columnBoundaryCrossed=!1,e.draw(!0)}}},e.click=function(r,o){var t,n=JSON.stringify(e.getSelectionBounds()),l=(r.ctrlKey||r.metaKey||e.attributes.persistantSelectionMode)&&!e.attributes.singleSelectionMode,a=o||e.getLayerPos(r);if(e.currentCell=e.getCellAt(a.x,a.y),e.currentCell.grid===void 0){if(e.input&&e.endEdit(),e.ignoreNextClick)e.ignoreNextClick=!1;else if(t=e.currentCell,!e.dispatchEvent("click",{NativeEvent:r,cell:e.currentCell})){var c=e.getUnhideIndicator(a.x,a.y);if(c){var u=c.dir,s=c.orderIndex0,v=c.orderIndex1;u==="l"||u==="r"?e.unhideColumns(s,v):e.unhideRows(s,v)}else{var d=e.getColumnGroupAt(a.x,a.y);if(d||(d=e.getRowGroupAt(a.x,a.y)),d&&e.toggleGroup(d))return e.setStorageData(),void e.refresh();if(e.hasFocus){var g=e.getRowGroupAreaWidth(),m=e.getColumnGroupAreaHeight(),f=a.x-g,p=a.y-m;if(["rowHeaderCell","columnHeaderCell"].indexOf(e.currentCell.style)!==-1||l||e.hovers.onFilterButton||e.setActiveCell(t.columnIndex,t.rowIndex),e.currentCell.context==="cell"){if(e.currentCell.style==="cornerCell")return e.selectAll(),e.draw(),void b();if(e.currentCell.style==="columnHeaderCell"&&e.attributes.columnHeaderClickBehavior==="sort")return e.orderBy===t.header.name?e.orderDirection=e.orderDirection==="asc"?"desc":"asc":e.orderDirection="asc",e.order(t.header.name,e.orderDirection),void b();if((e.attributes.selectionMode==="row"||e.currentCell.style==="rowHeaderCell")&&e.currentCell.style==="rowHeaderCell"&&e.attributes.tree&&f>0&&f-e.currentCell.x<e.style.treeArrowWidth+e.style.treeArrowMarginLeft+e.style.treeArrowMarginRight+e.style.treeArrowClickRadius&&p-e.currentCell.y<e.style.treeArrowHeight+e.style.treeArrowMarginTop+e.style.treeArrowClickRadius&&p>0)return void e.toggleTree(t.rowIndex);r.shiftKey&&!l&&(e.selectionBounds=e.getSelectionBounds(),e.selectArea(void 0,!1))}b(),e.draw(!0)}}}}function b(){var k=e.getSelectionBounds();n!==JSON.stringify(k)&&e.dispatchEvent("selectionchanged",e.getContextOfSelectionEvent())}},e.dragResizeColumn=function(r){var o,t,n,l=e.dragMode==="ew-resize";if(o=e.getLayerPos(r),t=e.resizingStartingWidth+o.x-e.dragStart.x,n=e.resizingStartingHeight+o.y-e.dragStart.y,t<e.style.minColumnWidth&&(t=e.style.minColumnWidth),n<e.style.minRowHeight&&(n=e.style.minRowHeight),e.dispatchEvent(l?"resizecolumn":"resizerow",{x:t,y:n,width:t,height:n,columnIndex:l?e.draggingItem.columnIndex:void 0,rowIndex:l?void 0:e.draggingItem.rowIndex,draggingItem:e.draggingItem}))return!1;e.attributes.resizeAfterDragged?e.pendingDragResize={item:e.draggingItem,width:t,height:n,x:r.clientX,y:r.clientY}:e.dragResizeApply(e.draggingItem,t,n)},e.dragResizeApply=function(r,o,t){return e.scrollBox.scrollLeft>e.scrollBox.scrollWidth-e.attributes.resizeScrollZone&&e.dragMode==="ew-resize"&&e.resize(!0),e.dragMode==="ew-resize"?(e.sizes.columns[r.header.style==="rowHeaderCell"?"cornerCell":r.sortColumnIndex]=o,["rowHeaderCell","cornerCell"].indexOf(r.header.style)!==-1&&e.resize(!0),void e.resizeChildGrids()):e.dragMode==="ns-resize"?(r.rowOpen?e.sizes.trees[r.rowIndex]=t:e.attributes.globalRowResize?e.style.cellHeight=t:e.sizes.rows[r.rowIndex]=t,e.dispatchEvent("resizerow",{row:t}),void e.resizeChildGrids()):void(e.ellipsisCache={})},e.stopDragResize=function(r){var o=e.getLayerPos(r);if(e.attributes.resizeAfterDragged&&(e.dragResizeApply(e.pendingDragResize.item,e.pendingDragResize.width,e.pendingDragResize.height),e.pendingDragResize=void 0),e.dragMode==="ew-resize"){var t=!!(o.x-e.dragStart.x),n=e.isColumnSelected(e.dragItem.columnIndex);if(t&&n){var l=Math.max(e.resizingStartingWidth+o.x-e.dragStart.x,e.style.minColumnWidth);e.fitSelectedColumns(l)}}else if(e.dragMode==="ns-resize"){var a=!!(o.y-e.dragStart.y),c=e.isRowSelected(e.dragItem.rowIndex);if(a&&c){var u=Math.max(e.resizingStartingHeight+o.y-e.dragStart.y,e.style.minRowHeight);e.fitSelectedRows(u)}}e.resize(),window.removeEventListener("mousemove",e.dragResizeColumn,!1),window.removeEventListener("mouseup",e.stopDragResize,!1),e.setStorageData(),e.draw(!0),e.ignoreNextClick=!0},e.scrollGrid=function(r){var o=e.getLayerPos(r);return e.attributes.scrollPointerLock&&e.pointerLockPosition&&["horizontal-scroll-box","vertical-scroll-box"].indexOf(e.scrollStartMode)!==-1&&(e.pointerLockPosition.x+=r.movementX,e.pointerLockPosition.y+=r.movementY,e.pointerLockPosition.x=Math.min(e.width-e.style.scrollBarWidth,Math.max(0,e.pointerLockPosition.x)),e.pointerLockPosition.y=Math.min(e.height-e.style.scrollBarWidth,Math.max(0,e.pointerLockPosition.y)),o=e.pointerLockPosition),e.scrollMode=e.getCellAt(o.x,o.y).context,e.scrollMode==="horizontal-scroll-box"&&e.scrollStartMode!=="horizontal-scroll-box"?(e.scrollStartMode="horizontal-scroll-box",e.dragStart=o,e.scrollStart.left=e.scrollBox.scrollLeft,void clearTimeout(e.scrollTimer)):e.scrollMode==="vertical-scroll-box"&&e.scrollStartMode!=="vertical-scroll-box"?(e.scrollStartMode="vertical-scroll-box",e.dragStart=o,e.scrollStart.top=e.scrollBox.scrollTop,void clearTimeout(e.scrollTimer)):(e.scrollStartMode==="vertical-scroll-box"&&e.scrollMode!=="vertical-scroll-box"&&(e.scrollMode="vertical-scroll-box"),e.scrollStartMode==="horizontal-scroll-box"&&e.scrollMode!=="horizontal-scroll-box"&&(e.scrollMode="horizontal-scroll-box"),clearTimeout(e.scrollTimer),void(e.scrollModes.indexOf(e.scrollMode)!==-1&&(e.scrollMode==="vertical-scroll-box"?e.scrollBox.scrollTop=e.scrollStart.top+(o.y-e.dragStart.y)/e.scrollBox.heightBoxRatio:e.scrollMode==="vertical-scroll-top"?(e.scrollBox.scrollTop-=e.page*e.style.cellHeight,e.scrollTimer=setTimeout(e.scrollGrid,e.attributes.scrollRepeatRate,r)):e.scrollMode==="vertical-scroll-bottom"&&(e.scrollBox.scrollTop+=e.page*e.style.cellHeight,e.scrollTimer=setTimeout(e.scrollGrid,e.attributes.scrollRepeatRate,r)),e.scrollMode==="horizontal-scroll-box"?e.scrollBox.scrollLeft=e.scrollStart.left+(o.x-e.dragStart.x)/e.scrollBox.widthBoxRatio:e.scrollMode==="horizontal-scroll-right"?(e.scrollBox.scrollLeft+=e.attributes.selectionScrollIncrement,e.scrollTimer=setTimeout(e.scrollGrid,e.attributes.scrollRepeatRate,r)):e.scrollMode==="horizontal-scroll-left"&&(e.scrollBox.scrollLeft-=e.attributes.selectionScrollIncrement,e.scrollTimer=setTimeout(e.scrollGrid,e.attributes.scrollRepeatRate,r)))))},e.stopScrollGrid=function(){clearTimeout(e.scrollTimer),document.exitPointerLock&&document.exitPointerLock(),window.removeEventListener("mousemove",e.scrollGrid,!1)},e.dragReorder=function(r){var o,t,n,l=e.dragMode==="column-reorder",a=e.dragMode==="row-reorder";if(t=(o=e.getLayerPos(r)).x-e.dragStart.x,n=o.y-e.dragStart.y,(e.attributes.allowColumnReordering||!l)&&(e.attributes.allowRowReordering||!a)&&((r.ctrlKey||r.metaKey||r.shiftKey)&&e.reorderObject&&(e.dragMode!=="column-reorder"||e.isMultiColumnsSelected||e.selectColumn(e.draggingItem.header.index,!1,!1)),!e.dispatchEvent("reordering",{NativeEvent:r,source:e.dragStartObject,target:e.currentCell,dragMode:e.dragMode})&&(Math.abs(t)>e.attributes.reorderDeadZone||Math.abs(n)>e.attributes.reorderDeadZone))){if(e.reorderObject=e.draggingItem,e.isMultiRowsSelected&&(e.reorderObject=e.getVisibleCellByIndex(-1,e.activeCell.rowIndex)),e.isMultiColumnsSelected&&(e.reorderObject=e.getVisibleCellByIndex(e.activeCell.columnIndex,-1)),!e.reorderObject)return;e.reorderTarget=e.currentCell,e.reorderObject.dragOffset={x:t,y:n},e.autoScrollZone(r,l?o.x:-1,a?o.y:-1,!1)}},e.stopDragReorder=function(r){var o,t,n=this,l={"row-reorder":e.orders.rows,"column-reorder":e.orders.columns},a={"row-reorder":"rowIndex","column-reorder":"sortColumnIndex"}[e.dragMode];if(window.removeEventListener("mousemove",e.dragReorder,!1),window.removeEventListener("mouseup",e.stopDragReorder,!1),e.reorderObject&&e.reorderTarget&&(e.dragMode==="column-reorder"&&e.reorderTarget.sortColumnIndex>-1&&e.reorderTarget.sortColumnIndex<e.getSchema().length||e.dragMode==="row-reorder"&&e.reorderTarget.rowIndex>-1&&e.reorderTarget.rowIndex<e.viewData.length)&&e.reorderObject[a]!==e.reorderTarget[a]&&!e.dispatchEvent("reorder",{NativeEvent:r,source:e.reorderObject,target:e.reorderTarget,dragMode:e.dragMode})){if(e.ignoreNextClick=!0,o=l[e.dragMode].indexOf(e.reorderObject[a]),t=l[e.dragMode].indexOf(e.reorderTarget[a]),e.dragMode==="column-reorder"){var c=e.getRowSelectionStates(0),u=[],s=[];c&&(o=c[0],c.forEach(function(f){u.push(e.orders.columns[f])}));var v=u.length;if(t<o||t>o&&Math.abs(t-o)>=v){l[e.dragMode].splice(o,v),t>o&&(t-=v-1);for(var d=0;d<u.length;d++)d===0&&(e.activeCell.columnIndex=t),s.push(t+d),l[e.dragMode].splice(t+d,0,u[d]);e.orders.columns=l[e.dragMode],e.selectColumnViewIndexes(s)}}else{var g=e.getRowViewIndexesFromSelection().map(function(f){return _newArrowCheck(this,n),e.viewData[f]}.bind(this));if(t<o||t>o&&Math.abs(t-o)>=g.length){e.viewData.splice(o,g.length),t>o&&(t-=g.length-1),e.activeCell.rowIndex=t;for(var m=0;m<g.length;m++)e.viewData.splice(t+m,0,g[m]);e.moveSelection(0,t)}}e.resize(),e.setStorageData()}e.reorderObject=void 0,e.reorderTarget=void 0,e.draw(!0)},e.dragMove=function(r){if(!e.dispatchEvent("moving",{NativeEvent:r,cell:e.currentCell})){var o=e.getLayerPos(r);e.moveOffset={x:e.currentCell.columnIndex-e.dragStartObject.columnIndex,y:e.currentCell.rowIndex-e.dragStartObject.rowIndex},(Math.abs(o.x)>e.attributes.reorderDeadZone||Math.abs(o.y)>e.attributes.reorderDeadZone)&&setTimeout(function(){e.autoScrollZone(r,o.x,o.y,!1)},1)}},e.stopDragMove=function(r){window.removeEventListener("mousemove",e.dragMove,!1),window.removeEventListener("mouseup",e.stopDragMove,!1);var o=e.getSelectionBounds();if(e.dispatchEvent("endmove",{NativeEvent:r,cell:e.currentCell}))return e.movingSelection=void 0,e.moveOffset=void 0,void e.draw(!0);e.moveOffset&&(e.moveTo(e.movingSelection,o.left+e.moveOffset.x,o.top+e.moveOffset.y),e.moveSelection(e.moveOffset.x,e.moveOffset.y)),e.movingSelection=void 0,e.moveOffset=void 0,e.draw(!0)},e.freezeMove=function(r){if(!e.dispatchEvent("freezemoving",{NativeEvent:r,cell:e.currentCell})){var o=e.getLayerPos(r);e.ignoreNextClick=!0,e.freezeMarkerPosition=o,o.x-=e.getRowGroupAreaWidth(),o.y-=e.getColumnGroupAreaHeight(),(Math.abs(o.x)>e.attributes.reorderDeadZone||Math.abs(o.y)>e.attributes.reorderDeadZone)&&setTimeout(function(){e.autoScrollZone(r,o.x,o.y,!1)},1)}},e.stopFreezeMove=function(r){var o=e.getLayerPos(r),t=e.style.gridBorderCollapse==="collapse"?1:2,n=e.style.columnHeaderCellBorderWidth*t,l=e.getColumnHeaderCellHeight(),a=e.getRowHeaderCellWidth();if(o.x-=e.getRowGroupAreaWidth(),o.y-=e.getColumnGroupAreaHeight(),e.currentCell&&e.currentCell.rowIndex!==void 0&&e.dragMode==="frozen-row-marker"){e.scrollBox.scrollTop=0,e.frozenRow=e.currentCell.rowIndex+1,e.scrollBox.bar.v.y=l+n+e.scrollCache.y[e.frozenRow],e.scrollBox.box.v.y=l+n+e.scrollCache.y[e.frozenRow];var c=e.scrollCache.y[e.scrollCache.y.length-1];e.scrollBox.heightBoxRatio=(e.scrollBox.height-l-e.scrollCache.y[e.frozenRow])/c,e.scrollBox.scrollBoxHeight=e.scrollBox.height*e.scrollBox.heightBoxRatio-e.style.scrollBarWidth,e.scrollBox.scrollBoxHeight=Math.max(e.scrollBox.scrollBoxHeight,e.style.scrollBarBoxMinSize),e.scrollBox.box.v.height=e.scrollBox.scrollBoxHeight}if(e.currentCell&&e.currentCell.columnIndex!==void 0&&e.dragMode==="frozen-column-marker"){var u=e.refreshScrollCacheX();e.scrollBox.scrollLeft=0;var s=e.currentCell.x-e.style.frozenMarkerWidth-e.style.frozenMarkerBorderWidth;o.x>s+e.currentCell.width/2?e.frozenColumn=e.currentCell.columnIndex+1:e.currentCell.columnIndex>=0&&(e.frozenColumn=e.currentCell.columnIndex),e.scrollBox.bar.h.x=a+e.scrollCache.x[e.frozenColumn],e.scrollBox.widthBoxRatio=(e.scrollBox.width-e.scrollCache.x[e.frozenColumn])/u,e.scrollBox.scrollBoxWidth=e.scrollBox.width*e.scrollBox.widthBoxRatio-e.style.scrollBarWidth,e.scrollBox.scrollBoxWidth=Math.max(e.scrollBox.scrollBoxWidth,e.style.scrollBarBoxMinSize),e.scrollBox.box.h.width=e.scrollBox.scrollBoxWidth}if((Math.abs(o.x)>e.attributes.reorderDeadZone||Math.abs(o.y)>e.attributes.reorderDeadZone)&&setTimeout(function(){e.autoScrollZone(r,o.x,o.y,!1)},1),window.removeEventListener("mousemove",e.freezeMove,!1),window.removeEventListener("mouseup",e.stopFreezeMove,!1),e.freezeMarkerPosition=void 0,e.dispatchEvent("endfreezemove",{NativeEvent:r,cell:e.currentCell}))return e.frozenRow=e.startFreezeMove.x,e.frozenColumn=e.startFreezeMove.y,void e.draw(!0);e.draw(!0),e.resize()},e.mousedown=function(r,o){if(e.lastMouseDownTarget=r.target,!e.dispatchEvent("mousedown",{NativeEvent:r,cell:e.currentCell})&&e.hasFocus&&r.button!==2&&!e.input){var t=r.ctrlKey||r.metaKey,n=/-move/.test(e.dragMode),l=/frozen-row-marker|frozen-column-marker/.test(e.dragMode),a=/-resize/.test(e.dragMode),c=/selection-handle-br/.test(e.dragMode),u=e.hovers&&e.hovers.unhideIndicator;if(e.dragStart=o||e.getLayerPos(r),e.scrollStart={left:e.scrollBox.scrollLeft,top:e.scrollBox.scrollTop},e.dragStartObject=e.getCellAt(e.dragStart.x,e.dragStart.y),e.dragAddToSelection=!e.dragStartObject.selected,t||r.shiftKey||/(vertical|horizontal)-scroll-(bar|box)/.test(e.dragStartObject.context)||!e.currentCell||e.currentCell.isColumnHeader||n||l||a||c||e.dragMode=="row-reorder"&&e.isMultiRowsSelected||e.currentCell.hovered&&e.hovers.onFilterButton||e.clearSelections(),!e.dragStartObject.isGrid){if(e.scrollModes.indexOf(e.dragStartObject.context)!==-1&&!u)return e.scrollMode=e.dragStartObject.context,e.scrollStartMode=e.dragStartObject.context,e.scrollGrid(r),e.attributes.scrollPointerLock&&["horizontal-scroll-box","vertical-scroll-box"].indexOf(e.scrollStartMode)!==-1&&(e.pointerLockPosition={x:e.dragStart.x,y:e.dragStart.y},e.canvas.requestPointerLock()),window.addEventListener("mousemove",e.scrollGrid,!1),window.addEventListener("mouseup",e.stopScrollGrid,!1),void(e.ignoreNextClick=!0);if(e.dragMode!=="cell")return c?(e.movingSelectionHandle=!0,e.fillOverlay={handle:{x:e.dragStartObject.x+e.dragStartObject.width/2,y:e.dragStartObject.y+e.dragStartObject.height/2},snapTo:{x:-1,y:-1},selection:e.getSelectionBounds()},e.dispatchEvent("beginselectionhandlemove",{NativeEvent:r})?void 0:(window.addEventListener("mousemove",e.selectionHandleMove,!1),window.addEventListener("mouseup",e.stopSelectionHandleMove,!1),e.selectionHandleMove(r))):n?(e.draggingItem=e.dragItem,e.movingSelection=e.cloneSelections(),e.dragging=e.dragStartObject,e.dispatchEvent("beginmove",{NativeEvent:r,cell:e.currentCell})?void 0:(window.addEventListener("mousemove",e.dragMove,!1),window.addEventListener("mouseup",e.stopDragMove,!1),e.mousemove(r))):l?(e.draggingItem=e.dragItem,e.startFreezeMove={x:e.frozenRow,y:e.frozenColumn},e.dispatchEvent("beginfreezemove",{NativeEvent:r})?void 0:(e.freezeMarkerPosition=e.getLayerPos(r),e.freezeMarkerPosition.isGrab=!0,window.addEventListener("mousemove",e.freezeMove,!1),window.addEventListener("mouseup",e.stopFreezeMove,!1),e.mousemove(r))):a&&!u?(e.draggingItem=e.dragItem,e.draggingItem.rowOpen?e.resizingStartingHeight=e.sizes.trees[e.draggingItem.rowIndex]:e.resizingStartingHeight=e.sizes.rows[e.draggingItem.rowIndex]||e.style.cellHeight,e.resizingStartingWidth=e.sizes.columns[e.draggingItem.header.style==="rowHeaderCell"?"cornerCell":e.draggingItem.sortColumnIndex]||e.draggingItem.width,window.addEventListener("mousemove",e.dragResizeColumn,!1),void window.addEventListener("mouseup",e.stopDragResize,!1)):["row-reorder","column-reorder"].indexOf(e.dragMode)!==-1?(e.draggingItem=e.dragStartObject,e.dragMode!=="column-reorder"||e.isMultiColumnsSelected?e.dragMode!=="row-reorder"||e.isMultiRowsSelected||e.selectRow(e.dragStartObject.rowIndex,t,null):e.selectColumn(e.currentCell.header.index,t,r.shiftKey),window.addEventListener("mousemove",e.dragReorder,!1),void window.addEventListener("mouseup",e.stopDragReorder,!1)):void 0;if(e.selecting=!0,(e.attributes.selectionMode==="row"||e.dragStartObject.columnIndex===-1)&&e.dragStartObject.rowIndex>-1)e.selectRow(e.dragStartObject.rowIndex,t,null);else if((e.attributes.selectionMode==="column"||e.dragStartObject.rowIndex===-1)&&e.dragStartObject.columnIndex>-1)return void e.selectColumn(e.currentCell.header.index,t,r.shiftKey);e.attributes.selectionMode!=="row"&&e.mousemove(r)}}},e.mouseup=function(r){clearTimeout(e.scrollTimer),e.cellBoundaryCrossed=!0,e.rowBoundaryCrossed=!0,e.columnBoundaryCrossed=!0,e.selecting=void 0,e.draggingItem=void 0,e.dragStartObject=void 0,e.dispatchEvent("mouseup",{NativeEvent:r,cell:e.currentCell})||(e.hasFocus||r.target===e.canvas)&&(e.currentCell&&e.currentCell.grid!==void 0||e.contextMenu||e.input||(e.dragStart&&e.isInGrid(e.dragStart)&&e.controlInput.focus(),r.preventDefault()))},e.getAdjacentCells=function(){var r,o=e.getSchema(),t={};for(r=0;r<o.length;r+=1)o[e.orders.columns[r]].hidden||(t.first===void 0&&(t.first=r,t.left=r),t.last=r,r>e.activeCell.columnIndex&&t.right===void 0&&(t.right=r),r<e.activeCell.columnIndex&&(t.left=r));return t.right===void 0&&(t.right=t.last),t},e.keydown=function(r){var o=e.getAdjacentCells(),t=Math.max(e.activeCell.columnIndex,0),n=Math.max(e.activeCell.rowIndex,0),l=r.ctrlKey||r.metaKey,a=e.viewData.length-1,c=e.getSchema().length-1;if(!e.dispatchEvent("keydown",{NativeEvent:r,cell:e.currentCell})&&(e.attributes.keepFocusOnMouseOut||e.hasFocus)){if(isPrintableKeyEvent(r)&&!l)return e.beginEditAt(t,n,r,!0);if(e.attributes.showNewRow&&(a+=1),r.key==="Tab"&&r.preventDefault(),r.key==="Escape"?e.selectNone():l&&r.key==="a"?e.selectAll():["Backspace","Delete"].includes(r.key)?e.deleteSelectedData():r.key==="ArrowDown"?n+=1:r.key==="ArrowUp"?n-=1:r.key==="ArrowLeft"&&!l||r.shiftKey&&r.key==="Tab"?t=o.left:r.key==="ArrowRight"&&!l||!r.shiftKey&&r.key==="Tab"?t=o.right:r.key==="PageUp"?(n-=e.page,r.preventDefault()):r.key==="PageDown"?(n+=e.page,r.preventDefault()):r.key==="Home"||l&&r.key==="ArrowUp"?n=0:r.key==="End"||l&&r.key==="ArrowDown"?n=e.viewData.length-1:l&&r.key==="ArrowRight"?t=o.last:l&&r.key==="ArrowLeft"&&(t=o.first),r.key==="Enter")return r.preventDefault(),e.beginEditAt(t,n,r);(t<0||Number.isNaN(t))&&(t=o.first),n>a&&(n=a),(n<0||Number.isNaN(n))&&(n=0),t>c&&(t=o.last);var u=["ArrowLeft","ArrowUp","ArrowRight","ArrowDown"].includes(r.key);r.shiftKey&&u&&e.shrinkOrExpandSelections({rowIndex:n,columnIndex:t},r,!0)&&e.draw(!0),t===e.activeCell.columnIndex&&n===e.activeCell.rowIndex||(e.scrollIntoView(t!==e.activeCell.columnIndex?t:void 0,n===e.activeCell.rowIndex||Number.isNaN(n)?void 0:n),e.setActiveCell(t,n),!r.shiftKey&&e.attributes.selectionFollowsActiveCell&&(l||e.clearSelections(),e.selectCell({rowIndex:n,viewColumnIndex:t})),e.draw(!0))}},e.keyup=function(r){e.dispatchEvent("keyup",{NativeEvent:r,cell:e.currentCell})||e.hasFocus},e.keypress=function(r){e.hasFocus&&e.dispatchEvent("keypress",{NativeEvent:r,cell:e.currentCell})},e.dblclick=function(r){e.dispatchEvent("dblclick",{NativeEvent:r,cell:e.currentCell})||e.hasFocus&&(e.currentCell.context==="ew-resize"&&e.currentCell.style==="columnHeaderCell"?e.isColumnSelected(e.currentCell.columnIndex)?e.fitSelectedColumns():e.fitColumnToValues(e.currentCell.header.name):e.currentCell.context==="ew-resize"&&e.currentCell.style==="cornerCell"?e.autosize():!["cell","activeCell"].includes(e.currentCell.style)||e.hovers.onFilterButton||e.hovers.onCellTreeIcon||(e.currentCell.isRowTree||e.currentCell.isColumnTree?(e.cellTreeExpandCollapse(e.currentCell.rowIndex,e.currentCell.columnIndex),e.draw()):e.beginEditAt(e.currentCell.columnIndex,e.currentCell.rowIndex)))},e.scrollWheel=function(r){var o,t,n=r,l=r.deltaX===void 0?r.NativeEvent.deltaX:r.deltaX,a=r.deltaY===void 0?r.NativeEvent.deltaY:r.deltaY,c=r.deltaMode===void 0?r.NativeEvent.deltaMode:r.deltaMode;r.NativeEvent&&(r=r.NativeEvent),i?n.preventDefault(r):e.dispatchEvent("wheel",{NativeEvent:r})||(e.touchHaltAnimation=!0,o=e.scrollBox.scrollLeft,t=e.scrollBox.scrollTop,e.hasFocus&&(c===1&&(a*=17),(e.scrollBox.scrollTop<e.scrollBox.scrollHeight&&a>0||e.scrollBox.scrollLeft<e.scrollBox.scrollWidth&&l>0||e.scrollBox.scrollTop>0&&a<0||e.scrollBox.scrollLeft>0&&l<0)&&n.preventDefault(r),i=setTimeout(function(){i=void 0,e.scrollBox.scrollTo(l+o,a+t)},1)))},e.pasteData=function(r,o,t,n){var l=this,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,c=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;if(o==="text/html"&&!isSupportedHtml(r))return console.warn("Unrecognized HTML format. HTML must be a simple table, e.g.: <table><tr><td>data</td></tr></table>."),void console.warn("Data with the mime type text/html not in this format will not be imported as row data.");var u=parseData(r,o),s=u[0].length;if(u.length===1&&s===1&&a<=1&&c<=1){var v=u[0][0].value.map(function(m){return _newArrowCheck(this,l),m.value}.bind(this)).join();e.forEachSelectedCell(function(m,f,p){m[f][p]=v})}else{var d=null;a>u.length&&c>s?d="both":a>u.length?d="vertical":c>s&&(d="horizontal"),e.insert({rows:u,startRowIndex:t,startColumnIndex:n,minRowsLength:a,minColumnsLength:c,reverseRows:!1,reverseColumns:!1,clearSelections:!0,alwaysFilling:!1,direction:d})}var g=[];return e.forEachSelectedCell(function(m,f,p,b){_newArrowCheck(this,l),g.push([f,b.viewColumnIndex,b.boundRowIndex,b.boundColumnIndex])}.bind(this)),e.dispatchEvent("afterpaste",{cells:g}),u.length},e.insert=function(r){var o=this,t=r.rows,n=t===void 0?[]:t,l=r.startRowIndex,a=l===void 0?0:l,c=r.startColumnIndex,u=c===void 0?0:c,s=r.minRowsLength,v=s===void 0?0:s,d=r.minColumnsLength,g=d===void 0?0:d,m=r.reverseRows,f=m!==void 0&&m,p=r.reverseColumns,b=p!==void 0&&p,k=r.clearSelections,C=k!==void 0&&k,I=r.alwaysFilling,P=I!==void 0&&I,E=r.direction,y=E===void 0?"both":E,B=e.getSchema(),S=Math.max(n.length,v),V=e.fillCellCallback,D=[];C&&(e.selections=[]);for(var G=0,T=0;G<S;G++,T++){T>=n.length&&(T=0);for(var q=G>=n.length,Q=f?S-G-1:G,le=e.orders.rows[a+Q],W=n[T],$=Math.max(W.length,g),O=e.viewData[le],L=Object.assign({},O),A=V?{rows:n,direction:y,rowData:L,existingRowData:O,rowIndex:le,rowOffset:T,cells:W,reversed:y==="horizontal"?b:f,isFillingRow:q||P,fillingRowPosition:P?G:q?G-n.length:-1,fillingRowLength:P?S:q?S-n.length:-1}:void 0,K=0,re=0;K<$;K++,re++){re>=W.length&&(re=0);var pe=K>=W.length,we=u+(b?$-K-1:K),ee=B[we];if(ee){var H=ee.name,be=W[re];be&&be.value&&(be=be.value.map(function(Be){return _newArrowCheck(this,o),Be.value}.bind(this)).join(""));var U=O[H];L[H]=V&&(pe||q||P)?V(_objectSpread2(_objectSpread2({},A),{},{column:ee,columnIndex:we,columnOffset:re,newCellData:be,existingCellData:U,isFillingColumn:pe||P,fillingColumnPosition:P?K:pe?K-W.length:-1,fillingColumnLength:P?$:pe?$-W.length:-1})):be??U,e.selectCell({rowIndex:le,viewColumnIndex:we},!0),(P||q||pe)&&D.push([le,we,e.getBoundRowIndexFromViewRowIndex(le),e.getBoundColumnIndexFromViewColumnIndex(we)])}else console.warn("Paste data exceeded grid bounds. Skipping.")}e.originalData[e.boundRowIndexMap.get(le)]=L,e.viewData[le]=L}(D.length>0||P)&&e.dispatchEvent("afterfill",{filledCells:D})},e.getNextVisibleColumnIndex=function(r){var o,t=e.getVisibleSchema();for(o=0;o<t.length;o+=1)if(t[o].columnIndex===r)return t[o+1].columnIndex;return-1},e.getVisibleColumnIndexOf=function(r){var o,t=e.getVisibleSchema();for(o=0;o<t.length;o+=1)if(t[o].columnIndex===r)return o;return-1},e.getSelectionIndex=function(){var r=e.getSelectionBounds(!0);if(r){for(var o=r.top,t=r.bottom,n=o;n<=t;n++){var l=e.getRowSelectionStates(n);if(l){if(l[0]===void 0)break;return{row:n,column:l[0]<0?l[1]:l[0],rowLength:t-n+1,columnLength:l.length-(l[0]<0?1:0)}}}return null}},e.paste=function(r){var o=this;if(e.attributes.editable&&!e.dispatchEvent("beforepaste",{NativeEvent:r})){var t=new Map(Array.from(r.clipboardData.items).map(function(s){return _newArrowCheck(this,o),[s.type,s]}.bind(this))),n=["text/html","text/csv","text/plain"],l=n.map(function(s){return _newArrowCheck(this,o),t.get(s)}.bind(this)).filter(function(s){return _newArrowCheck(this,o),!!s}.bind(this));if(l.length!==0){var a=e.getSelectionIndex();if(a){var c=l[0],u=c.type;c.getAsString(function(s){e.pasteData(s,u,a.row,a.column,a.rowLength,a.columnLength),e.draw()})}}else console.warn("Cannot find supported clipboard data type. Supported types are:",n.join(", "))}},e.cut=function(r){var o=this;if(!e.dispatchEvent("cut",{NativeEvent:r})&&e.hasFocus&&r.clipboardData){e.copySelectedCellsToClipboard(r.clipboardData);var t=e.clearSelectedCells().map(function(n){return _newArrowCheck(this,o),[n.viewRowIndex,n.viewColumnIndex,n.boundRowIndex,n.boundColumnIndex]}.bind(this));e.dispatchEvent("aftercut",{cells:t}),requestAnimationFrame(function(){return _newArrowCheck(this,o),e.draw()}.bind(this)),r.preventDefault()}},e.copy=function(r){e.dispatchEvent("copy",{NativeEvent:r})||e.hasFocus&&r.clipboardData&&(e.copySelectedCellsToClipboard(r.clipboardData),r.preventDefault())},e.selectionHandleMove=function(r){if(e.movingSelectionHandle){var o=e.getClippingRect(r),t=e.currentCell.rowIndex,n=e.currentCell.columnIndex,l=t>=-1&&n>=-1&&e.fillOverlay.selection.left<=n&&e.fillOverlay.selection.right>=n&&e.fillOverlay.selection.top<=t&&e.fillOverlay.selection.bottom>=t;if(e.fillOverlay.minX=o.x,e.fillOverlay.minY=o.y,e.fillOverlay.x=Math.max(o.x,r.clientX),e.fillOverlay.y=Math.max(o.y,r.clientY),l)e.fillOverlay.lastInBoundsLocation={x:r.clientX,y:r.clientY};else if(e.fillOverlay.lastInBoundsLocation||!e.fillOverlay.direction){var a=e.fillOverlay.lastInBoundsLocation;e.fillOverlay.lastInBoundsLocation=void 0;var c=a?a.x:e.fillOverlay.handle.x,u=a?a.y:e.fillOverlay.handle.y,s=Math.abs(r.clientX-c),v=Math.abs(r.clientY-u);(s>5||v>5)&&(e.fillOverlay.direction=s>v?"x":"y")}t>=0&&(e.fillOverlay.rowIndex=t),n>=0&&(e.fillOverlay.columnIndex=n,t===-1&&e.visibleRows.length&&(e.fillOverlay.rowIndex=e.visibleRows[0])),e.fillOverlay.snap=t>=-1&&n>=-1?e.currentCell:void 0}},e.stopSelectionHandleMove=function(r){if(!e.fillOverlay.handle)return!1;e.ignoreNextClick=!0,window.removeEventListener("mousemove",e.selectionHandleMove,!1),window.removeEventListener("mouseup",e.stopSelectionHandleMove,!1);var o=e.fillOverlay,t=e.getSelectionIndex(),n=o.selection;if(t){if(e.movingSelectionHandle=void 0,e.fillOverlay={},o.rowIndex>=0&&o.columnIndex>=0){var l,a,c,u,s=_objectSpread2({},n),v=o.direction==="y",d=o.direction==="x",g=!1,m=!1;if(v?(o.rowIndex<n.top?(n.top=o.rowIndex,g=!0):o.rowIndex>n.bottom&&(n.bottom=o.rowIndex),l=n.top<s.top?n.top:s.bottom+1,a=n.top<s.top?s.top-n.top:n.bottom-s.bottom,c=t.column,u=t.columnLength):d&&(o.columnIndex<n.left?(n.left=o.columnIndex,m=!0):o.columnIndex>n.right&&(n.right=o.columnIndex),c=n.left<s.left?n.left:s.right+1,u=n.left<s.left?s.left-n.left:n.right-s.right,l=t.row,a=t.rowLength),n.left<=n.right&&n.top<=n.bottom&&(n.left<s.left||n.top<s.top||n.right>s.right||n.bottom>s.bottom)){for(var f=e.getSchema(),p=[],b=0;b<Math.min(a,t.rowLength);b++){var k=e.viewData[t.row+b];p[b]=[];for(var C=0;C<Math.min(u,t.columnLength);C++){var I=f[t.column+C];if(I){var P=k[I.name];p[b][C]=P}}}e.insert({rows:p,startRowIndex:l,startColumnIndex:c,minRowsLength:a,minColumnsLength:u,reverseRows:g,reverseColumns:m,clearSelections:!1,alwaysFilling:!0,direction:d?"horizontal":"vertical"}),e.draw()}}return!0}}}function touch(e){var i,r;e.scrollAnimation={},e.touchDelta={},e.touchAnimateTo={},e.animationFrames=0,e.getTouchPos=function(o,t){var n,l=t?o.touches[t]:o.touches[0],a=e.canvas.getBoundingClientRect();if(l)return n={x:l.clientX-a.left,y:l.clientY-a.top},e.isChildGrid&&(n.x-=e.canvasOffsetLeft,n.y-=e.canvasOffsetTop),{x:n.x,y:n.y,rect:a}},e.easingFunctions={linear:function(o){return o},easeInQuad:function(o){return o*o},easeOutQuad:function(o){return o*(2-o)},easeInOutQuad:function(o){return o<.5?2*o*o:(4-2*o)*o-1},easeInCubic:function(o){return o*o*o},easeOutCubic:function(o){return--o*o*o+1},easeInOutCubic:function(o){return o<.5?4*o*o*o:(o-1)*(2*o-2)*(2*o-2)+1},easeInQuart:function(o){return o*o*o*o},easeOutQuart:function(o){return 1- --o*o*o*o},easeInOutQuart:function(o){return o<.5?8*o*o*o*o:1-8*--o*o*o*o},easeInQuint:function(o){return o*o*o*o*o},easeOutQuint:function(o){return 1+--o*o*o*o*o},easeInOutQuint:function(o){return o<.5?16*o*o*o*o*o:1+16*--o*o*o*o*o}},e.easing=function(o,t,n,l){return n*e.easingFunctions[e.attributes.touchEasingMethod](o/l)+t},e.calculatePPSTimed=function(){e.xPPST=-(e.touchDelta.x-e.touchSigmaTimed.x)/(e.touchDelta.t-e.touchSigmaTimed.t),e.yPPST=-(e.touchDelta.y-e.touchSigmaTimed.y)/(e.touchDelta.t-e.touchSigmaTimed.t),e.touchSigmaTimed={x:e.touchDelta.x,y:e.touchDelta.y,t:performance.now()}},e.calculatePPS=function(){e.xPPS=-(e.touchDelta.x-e.touchSigma.x)/(e.touchDelta.t-e.touchSigma.t),e.yPPS=-(e.touchDelta.y-e.touchSigma.y)/(e.touchDelta.t-e.touchSigma.t),e.touchSigma={x:e.touchDelta.x,y:e.touchDelta.y,t:performance.now()}},e.touchEndAnimation=function(){if(!e.canvas||!e.scrollBox.scrollTo)return requestAnimationFrame(e.touchEndAnimation);var o,t=performance.now(),n=e.attributes.touchReleaseAnimationDurationMs;o=t-e.touchDelta.t,e.animationFrames+=1,e.scrollAnimation.x=e.easing(o,e.touchDelta.scrollLeft,e.touchAnimateTo.x,n),e.scrollAnimation.y=e.easing(o,e.touchDelta.scrollTop,e.touchAnimateTo.y,n),o>n||e.scrollAnimation.y===e.scrollBox.scrollTop&&e.scrollAnimation.x===e.scrollBox.scrollLeft||e.stopAnimation||(e.scrollBox.scrollTo(e.scrollAnimation.x,e.scrollAnimation.y),requestAnimationFrame(e.touchEndAnimation))},e.touchEditCell=function(o){e.beginEditAt(o.columnIndex,o.rowIndex)},e.touchstart=function(o){if(o.changedTouches[0]&&(e.touchStart=e.getTouchPos(o),e.startingCell=e.getCellAt(e.touchStart.x,e.touchStart.y,!0)),!e.dispatchEvent("touchstart",{NativeEvent:o,cell:e.startingCell})){if(e.disposeContextMenu(),clearInterval(e.calculatePPSTimer),clearTimeout(e.touchContextTimeout),e.touchStartEvent=o,e.stopAnimation=!0,e.animationFrames=0,e.stopPropagation(o),o.touches.length===1&&o.changedTouches[0]&&!e.zoomAltered){if(e.touchLength=1,e.touchStart=e.touchStart||e.touchStart1,e.touchScrollStart={x:e.scrollBox.scrollLeft,y:e.scrollBox.scrollTop,t:performance.now()},e.touchDelta={x:0,y:0,scrollLeft:e.scrollBox.scrollLeft,scrollTop:e.scrollBox.scrollTop,t:e.touchScrollStart.t},e.touchSigma={x:e.touchDelta.x,y:e.touchDelta.y,t:e.touchDelta.t},e.touchSigmaTimed={x:e.touchDelta.x,y:e.touchDelta.y,t:e.touchDelta.t},e.touchContextTimeout=setTimeout(function(){e.contextmenuEvent(o,e.touchStart)},e.attributes.touchContextMenuTimeMs),e.calculatePPSTimer=setInterval(e.calculatePPSTimed,50),e.startingCell&&(e.startingCell.isGrid||["tree","inherit"].indexOf(e.startingCell.context)!==-1))return void(e.hasFocus=!1);if(e.hasFocus=!0,e.startingCell.isHeader)return e.startingCell.isRowHeader?(e.selectArea({top:e.startingCell.rowIndex,bottom:e.startingCell.rowIndex,left:0,right:e.getVisibleSchema().length-1}),e.draw(!0)):e.startingCell.isColumnHeader&&(e.attributes.columnHeaderClickBehavior==="sort"&&(e.orderBy===e.startingCell.header.name?e.orderDirection=e.orderDirection==="asc"?"desc":"asc":e.orderDirection="asc",e.order(e.startingCell.header.name,e.orderDirection)),e.attributes.columnHeaderClickBehavior==="select"&&(e.selectArea({top:0,bottom:e.viewData.length-1,left:e.startingCell.columnIndex,right:e.startingCell.columnIndex}),e.draw(!0))),void e.touchEndEvents(o)}e.zoomAltered||(document.body.addEventListener("touchmove",e.touchmove,{passive:!1}),document.body.addEventListener("touchend",e.touchend,!1),document.body.addEventListener("touchcancel",e.touchcancel,!1),e.draw(!0))}},e.touchSelect=function(o,t){if(o.rowIndex!==void 0&&o.columnIndex!==void 0){e.touchSelecting=!0;var n=e.getSelectionBounds();t==="selection-handle-bl"&&o.rowIndex>=n.top&&o.columnIndex<=n.right?(n.bottom=o.rowIndex,n.left=o.columnIndex):t==="selection-handle-tl"&&o.rowIndex<=n.bottom&&o.columnIndex<=n.right?(n.top=o.rowIndex,n.left=o.columnIndex):t==="selection-handle-tr"&&o.rowIndex<=n.bottom&&o.columnIndex>=n.left?(n.top=o.rowIndex,n.right=o.columnIndex):t==="selection-handle-br"&&o.rowIndex>=n.top&&o.columnIndex>=n.left&&(n.bottom=o.rowIndex,n.right=o.columnIndex),e.attributes.selectionMode==="row"||o.rowIndex===-1?(n.left=0,n.right=e.getSchema().length-1):n.left=Math.max(0,n.left),e.selectArea(n),e.draw(!0)}},e.touchmove=function(o){i||requestAnimationFrame(function(){i=!0,function(t){var n,l,a,c,u,s,v,d,g;if(!e.dispatchEvent("beforetouchmove",{NativeEvent:t})){if(clearTimeout(r),t.changedTouches[0]&&(e.touchPosition=e.getTouchPos(t)),t.changedTouches[1]&&(e.touchPosition1=e.getTouchPos(t,1)),Math.abs(e.touchDelta.x)+Math.abs(e.touchDelta.y)>e.attributes.touchDeadZone&&clearTimeout(e.touchContextTimeout),t.touches.length===2&&e.touchPosition&&e.touchPosition1)return d=e.touchPosition.y,g=e.touchPosition1.y,e.zoomDeltaStart||(e.zoomDeltaStart=Math.abs(d-g),e.startScale=e.scale),e.touchLength=2,e.scaleDelta=e.zoomDeltaStart-Math.abs(d-g),e.scale=e.startScale-e.scaleDelta*e.attributes.touchZoomSensitivity,e.scale=Math.min(Math.max(e.scale,e.attributes.touchZoomMin),e.attributes.touchZoomMax),e.zoomAltered=!0,e.resize(!0),void e.resizeChildGrids();e.zoomAltered||(e.touchLength=1,e.touchPosition=e.touchPosition||e.touchPosition1,n=e.getColumnHeaderCellHeight(),l=e.getRowHeaderCellWidth(),a=e.width-e.style.scrollBarWidth-e.touchPosition.x<e.attributes.selectionScrollZone,c=e.touchPosition.x-l<e.attributes.selectionScrollZone,u=e.height-e.style.scrollBarWidth-e.touchPosition.y<e.attributes.selectionScrollZone,s=e.touchPosition.y-n<e.attributes.selectionScrollZone,v=e.style.scrollBarWidth,t.stopPropagation(),e.touchDelta={x:e.touchPosition.x-e.touchStart.x,y:e.touchPosition.y-e.touchStart.y,scrollLeft:e.scrollBox.scrollLeft,scrollTop:e.scrollBox.scrollTop,t:performance.now()},e.currentCell=e.getCellAt(e.touchPosition.x,e.touchPosition.y),e.dispatchEvent("touchmove",{NativeEvent:t,cell:e.currentCell}),e.calculatePPS(),e.touchDuration=performance.now()-e.touchScrollStart.t,e.stopAnimation=!0,e.animationFrames=0,e.touchSelecting&&(a||c||s||u)&&function m(){var f=e.scrollBox.scrollLeft,p=e.scrollBox.scrollTop;f+=a?e.attributes.selectionScrollIncrement:0,p+=u?e.attributes.selectionScrollIncrement:0,p-=s?e.attributes.selectionScrollIncrement:0,f-=c?e.attributes.selectionScrollIncrement:0,e.scrollBox.scrollTo(f,p),r=setTimeout(m,e.attributes.scrollRepeatRate)}(),/vertical-scroll-/.test(e.startingCell.style)?e.scrollBox.scrollTop=e.scrollBox.scrollHeight*((e.touchPosition.y-n-v)/(e.scrollBox.height-v-n)):/horizontal-scroll-/.test(e.startingCell.style)?e.scrollBox.scrollLeft=e.scrollBox.scrollWidth*((e.touchPosition.x-l-v)/(e.scrollBox.width-v-l)):/selection-handle-/.test(e.startingCell.style)?e.touchSelect(e.currentCell,e.startingCell.style):e.scrollBox.scrollTo(e.touchScrollStart.x-e.touchDelta.x,e.touchScrollStart.y-e.touchDelta.y))}}(o),i=!1})},e.touchEndEvents=function(o){e.zoomDeltaStart=void 0,e.touchSelecting=!1,clearInterval(e.touchScrollTimeout),clearInterval(e.touchContextTimeout),clearInterval(e.calculatePPSTimer),o.stopPropagation(),document.body.removeEventListener("touchmove",e.touchmove,{passive:!1}),document.body.removeEventListener("touchend",e.touchend,!1),document.body.removeEventListener("touchcancel",e.touchcancel,!1)},e.touchend=function(o){if(!e.dispatchEvent("touchend",{NativeEvent:o,cell:e.currentCell}))if(e.zoomDeltaStart=void 0,o.changedTouches[0]&&(e.touchPosition=void 0),o.changedTouches[1]&&(e.touchPosition1=void 0),e.zoomAltered)o.touches.length===0&&(e.zoomAltered=!1);else{var t=Math.abs(e.touchDelta.x)+Math.abs(e.touchDelta.y)<e.attributes.touchDeadZone;isNaN(e.xPPS)&&(e.xPPS=0),isNaN(e.yPPS)&&(e.yPPS=0),isNaN(e.xPPST)&&(e.xPPST=0),isNaN(e.yPPST)&&(e.yPPST=0),e.touchAnimateTo.x=e.xPPS*e.attributes.touchReleaseAcceleration,e.touchAnimateTo.y=e.yPPS*e.attributes.touchReleaseAcceleration,e.calculatePPSTimed(),t||e.animationFrames!==0||!(Math.abs(e.xPPST)>e.attributes.scrollAnimationPPSThreshold||Math.abs(e.yPPST)>e.attributes.scrollAnimationPPSThreshold)||/-scroll-/.test(e.startingCell.style)||t||(e.stopAnimation=!1,e.touchEndAnimation()),e.touchEndEvents(o)}},e.touchcancel=function(o){e.dispatchEvent("touchcancel",{NativeEvent:o,cell:e.currentCell})||e.touchEndEvents(o)}}function intf(e,i){function r(t,n){var l,a=[];for(l=t;l<=n;l+=1)a[l]=l;return a}var o;e.scale=1,e.orders={rows:[],columns:[]},e.appliedInlineStyles={},e.cellGridAttributes={},e.treeGridAttributes={},e.visibleRowHeights=[],e.hasFocus=!1,e.activeCell={columnIndex:0,rowIndex:0},e.innerHTML="",e.storageName="canvasDataGrid",e.invalidSearchExpClass="canvas-datagrid-invalid-search-regExp",e.localStyleLibraryStorageKey="canvas-datagrid-user-style-library",e.dataType="application/x-canvas-datagrid",e.orderBy=null,e.orderDirection="asc",e.orderings={columns:[],add:function(t,n,l){e.orderings.columns=e.orderings.columns.filter(function(a){return a.orderBy!==t}),e.orderings.columns.push({orderBy:t,orderDirection:n,sortFunction:l})},sort:function(){console.warn("grid.orderings.sort has been deprecated. Please use grid.refresh()."),e.orderings.columns.forEach(function(t){e.viewData.sort(t.sortFunction(t.orderBy,t.orderDirection))})}},e.columnFilters={},e.filters={},e.frozenRow=0,e.frozenColumn=0,e.ellipsisCache={},e.scrollCache={x:[],y:[]},e.scrollBox={},e.visibleRows=[],e.visibleCells=[],e.visibleUnhideIndicators=[],e.hiddenRowRanges=[],e.visibleGroups=[],e.sizes={rows:{},columns:{},trees:{}},e.fillOverlay={},e.filterable={rows:[],columns:[]},e.selectedFilterButton={columnIndex:-1,rowIndex:-1},e.cellTree={rows:[],columns:{},tempSchema:{},rowTreeColIndex:0,columnTreeRowStartIndex:0,columnTreeRowEndIndex:0,origin:{rows:[],columns:{}}},e.hovers={},e.attributes={},e.style={},e.formatters={},e.sorters={},e.parsers={},e.schemaHashes={},e.events={},e.changes=[],e.scrollIndexTop=0,e.scrollPixelTop=0,e.scrollIndexLeft=0,e.scrollPixelLeft=0,e.childGrids={},e.openChildren={},e.groupedColumns=[],e.groupedRows=[],e.scrollModes=["vertical-scroll-box","vertical-scroll-top","vertical-scroll-bottom","horizontal-scroll-box","horizontal-scroll-right","horizontal-scroll-left"],e.componentL1Events={},e.eventNames=["afterdraw","afterrendercell","afterrenderfilterbutton","aftercreategroup","attributechanged","beforebeginedit","beforecreatecellgrid","beforedraw","beforeendedit","beforerendercell","beforerendercellgrid","beforerenderfilterbutton","beginedit","cellmouseout","cellmouseover","click","collapsetree","columnhide","columnunhide","contextmenu","copy","datachanged","dblclick","endedit","expandtree","formatcellvalue","keydown","keypress","keyup","mousedown","mousemove","mouseup","newrow","ordercolumn","rendercell","rendercellgrid","renderorderbyarrow","rendertext","rendertreearrow","reorder","reordering","resize","resizecolumn","resizerow","schemachanged","scroll","selectionchanged","stylechanged","touchcancel","touchend","touchmove","touchstart","wheel"],e.mouse={x:0,y:0},e.getBoundRowIndexFromViewRowIndex=function(t){if(e.boundRowIndexMap&&e.boundRowIndexMap.has(t))return e.boundRowIndexMap.get(t)},e.getBoundColumnIndexFromViewColumnIndex=function(t){return e.orders.columns[t]},e.getColumnGroupAreaHeight=function(){if(!e.attributes.allowGroupingColumns)return 0;var t=e.groupedColumns.length;return e.style.columnGroupRowHeight*e.scale*t},e.getRowGroupAreaWidth=function(){if(!e.attributes.allowGroupingRows)return 0;var t=e.groupedRows.length;return e.style.rowGroupColumnWidth*e.scale*t},e.getCollapsedColumnGroups=function(){for(var t=[],n=0;n<e.groupedColumns.length;n++)for(var l=e.groupedColumns[n],a=0;a<l.length;a++){var c=l[a];c.collapsed&&t.push(c)}return t},e.getCollapsedRowGroups=function(){for(var t=[],n=0;n<e.groupedRows.length;n++)for(var l=e.groupedRows[n],a=0;a<l.length;a++){var c=l[a];c.collapsed&&t.push(c)}return t},e.toggleGroup=function(t){if(t.type==="c"){for(var n,l=t.from,a=t.to,c=e.groupedColumns,u=0;u<c.length;u++){for(var s=c[u],v=0;v<s.length;v++){var d=s[v];if(d.from===l&&d.to===a){n=d;break}}if(n)break}if(!n)return;var g=!n.collapsed;return n.collapsed=g,!0}if(t.type==="r"){for(var m,f=t.from,p=t.to,b=e.groupedRows,k=0;k<b.length;k++){for(var C=b[k],I=0;I<C.length;I++){var P=C[I];if(P.from===f&&P.to===p){m=P;break}}if(m)break}if(!m)return;var E=!m.collapsed;return m.collapsed=E,!0}return!1},e.isNewGroupRangeValid=function(t,n,l){for(var a=0;a<t.length;a++)for(var c=t[a],u=0;u<c.length;u++){var s=c[u];if(n===s.to+1)return!1;if(!(n>s.to)){if(n===s.from){if(l===s.to)return!1;if(l>s.to)return!0;break}if(n>s.from){if(l>s.to)return!1;break}return!(l<s.to)}}return!0},e.getColumnHeaderCellHeight=function(){return e.attributes.showColumnHeaders?(e.sizes.rows[-1]||e.style.columnHeaderCellHeight)*e.scale:0},e.getRowHeaderCellWidth=function(){return e.attributes.showRowHeaders?(e.sizes.columns[-1]||e.style.rowHeaderCellWidth)*e.scale:0},e.setStorageData=function(){if(e.attributes.saveAppearance&&e.attributes.name){var t={};e.getSchema().forEach(function(n){t[n.name]=!n.hidden}),localStorage.setItem(e.storageName+"-"+e.attributes.name,JSON.stringify({sizes:{rows:e.sizes.rows,columns:e.sizes.columns},orders:{rows:e.orders.rows,columns:e.orders.columns},orderBy:e.orderBy,orderDirection:e.orderDirection,visibility:t}))}},e.getSchema=function(){return e.schema||e.tempSchema||[]},e.createColumnOrders=function(){var t=e.getSchema();e.orders.columns=r(0,t.length-1)},e.createRowOrders=function(){e.orders.rows=r(0,e.originalData.length-1)},e.getVisibleSchema=function(){return e.getSchema().filter(function(t){return!t.hidden})},e.applyDefaultValue=function(t,n,l){var a=n.defaultValue||"";typeof a=="function"&&(a=a.apply(e.intf,[n,l])),t[n.name]=a},e.createNewRowData=function(){e.newRow={},e.getSchema().forEach(function(t){e.applyDefaultValue(e.newRow,t,void 0)})},e.getSchemaNameHash=function(t){for(var n=0;e.schemaHashes[t];)t+=n+=1;return t},e.filter=function(t){var n=e.filters[t];return n||t===void 0||(console.warn("Cannot find filter for type %s, falling back to substring match.",t),n=e.filters.string),n},e.hasActiveFilters=function(){return e.columnFilters&&Object.keys(e.columnFilters).length>0},e.hasCollapsedRowGroup=function(){for(var t=0;t<e.groupedRows.length;t++)for(var n=e.groupedRows[t],l=0;l<n.length;l++)if(n[l].collapsed)return!0;return!1},e.getFilteredAndSortedViewData=function(t){var n=this,l=t.map(function($,O){return _newArrowCheck(this,n),[$,O]}.bind(this));if(e.hiddenRowRanges.length>0)for(var a=e.hiddenRowRanges.sort(function($,O){return _newArrowCheck(this,n),O[1]-$[1]}.bind(this)),c=0;c<a.length;c++){var u=_slicedToArray(a[c],2),s=u[0],v=u[1]-s+1;l.splice(s,v)}for(var d=function(){var $=_slicedToArray(m[g],2),O=$[0],L=$[1],A=e.getHeaderByName(O);if(!A)return"continue";var K=A.filter||e.filter(A.type||"string");l=l.filter(function(re){var pe=_slicedToArray(re,2),we=pe[0],ee=pe[1];return!!(e.attributes.allowFreezingRows&&!e.attributes.filterFrozenRows&&ee<e.frozenRow)||K(we[O],L)})},g=0,m=Object.entries(e.columnFilters);g<m.length;g++)d();for(var f=[],p=0;p<e.groupedRows.length;p++)for(var b=e.groupedRows[p],k=0;k<b.length;k++){var C=b[k];C.collapsed&&f.push([C.from,C.to])}if(f.length>0){f.sort(function($,O){return _newArrowCheck(this,n),$[0]-O[0]}.bind(this));for(var I=0,P=f.length,E=0;E<P;E++){var y=f[E];if(E===P-1){f[I++]=y;break}var B=y[1],S=_slicedToArray(f[E+1],2),V=S[0],D=S[1];V>B+1?f[I++]=y:(f[E+1]=y,D>B&&(f[E+1][1]=D))}for(var G=(f=f.slice(0,I)).shift(),T=0;T<l.length;T++)if(!(l[T][1]<G[0])){for(var q=T+1;q<l.length&&!(l[q][1]>G[1]);q++);if(l.splice(T,q-T),!(G=f.shift()))break;T--}}var Q,le=_createForOfIteratorHelper(e.orderings.columns);try{var W=function(){var $=this,O=Q.value,L=O.sortFunction(O.orderBy,O.orderDirection);l.sort(function(A,K){_newArrowCheck(this,$);var re=_slicedToArray(A,1)[0],pe=_slicedToArray(K,2),we=pe[0],ee=pe[1];return e.attributes.allowFreezingRows&&!e.attributes.sortFrozenRows&&ee<e.frozenRow?0:L(re,we)}.bind(this))};for(le.s();!(Q=le.n()).done;)W()}catch($){le.e($)}finally{le.f()}return{viewData:l.map(function($){return _newArrowCheck(this,n),_slicedToArray($,1)[0]}.bind(this)),boundRowIndexMap:new Map(l.map(function($,O){_newArrowCheck(this,n);var L=_slicedToArray($,2);return L[0],[O,L[1]]}.bind(this)))}},e.refresh=function(){var t=e.getFilteredAndSortedViewData(e.originalData),n=t.viewData,l=t.boundRowIndexMap;e.viewData=n,e.boundRowIndexMap=l,e.resize(),e.draw(!0)},e.getBestGuessDataType=function(t,n){var l,a,c=n.length;for(a=0;a<c;a+=1)if(n[a]!==void 0&&n[a]!==null&&[null,void 0].indexOf(n[a][t])!==-1)return(l=_typeof(n[a]))==="object"?"string":l;return"string"},e.drawChildGrids=function(){Object.keys(e.childGrids).forEach(function(t){e.childGrids[t].draw()})},e.resizeChildGrids=function(){Object.keys(e.childGrids).forEach(function(t){e.childGrids[t].resize()})},e.autoScrollZone=function(t,n,l,a){var c,u=e.getRowHeaderCellWidth(),s=e.getColumnHeaderCellHeight();n!==-1&&(n>e.width-e.attributes.selectionScrollZone&&(e.scrollBox.scrollLeft+=e.attributes.selectionScrollIncrement,c=!0),n-e.attributes.selectionScrollZone-u<0&&(e.scrollBox.scrollLeft-=e.attributes.selectionScrollIncrement,c=!0)),l!==-1&&(l>e.height-e.attributes.selectionScrollZone&&(e.scrollBox.scrollTop+=e.attributes.selectionScrollIncrement,c=!0),l-e.attributes.selectionScrollZone-s<0&&(e.scrollBox.scrollTop-=e.attributes.selectionScrollIncrement,c=!0)),c&&!a&&e.currentCell&&e.currentCell.columnIndex!==-1&&(e.scrollTimer=setTimeout(e.mousemove,e.attributes.scrollRepeatRate,t))},e.validateColumn=function(t,n){if(!t.name)throw new Error("A column must contain at least a name.");if(n.filter(function(l){return l.name===t.name}).length>0)throw new Error("A column with the name "+t.name+" already exists and cannot be added again.");return!0},e.setDefaults=function(t,n,l,a){t[l]=n[l]===void 0?a:n[l]},e.setAttributes=function(){e.defaults.attributes.forEach(function(t){e.setDefaults(e.attributes,e.args,t[0],t[1])})},e.setStyle=function(){e.defaults.styles.forEach(function(t){e.setDefaults(e.style,e.args.style||{},t[0],t[1])})},e.autosize=function(t){e.getVisibleSchema().forEach(function(n,l){n.name!==t&&t!==void 0||(e.sizes.columns[l]=Math.max(e.findColumnMaxTextLength(n.name),e.style.minColumnWidth))}),e.sizes.columns[-1]=e.findColumnMaxTextLength("cornerCell")},e.dispose=function(){!e.isChildGrid&&e.canvas&&e.canvas.parentNode&&e.canvas.parentNode.removeChild(e.canvas),e.isChildGrid||document.body.removeChild(e.controlInput),e.eventParent.removeEventListener("mousedown",e.mousedown,!1),e.eventParent.removeEventListener("dblclick",e.dblclick,!1),e.eventParent.removeEventListener("click",e.click,!1),e.eventParent.removeEventListener("mousemove",e.mousemove),e.eventParent.removeEventListener("wheel",e.scrollWheel,!1),e.canvas.removeEventListener("contextmenu",e.contextmenuEvent,!1),e.canvas.removeEventListener("copy",e.copy),e.controlInput.removeEventListener("copy",e.copy),e.controlInput.removeEventListener("cut",e.cut),e.controlInput.removeEventListener("paste",e.paste),e.controlInput.removeEventListener("keypress",e.keypress,!1),e.controlInput.removeEventListener("keyup",e.keyup,!1),e.controlInput.removeEventListener("keydown",e.keydown,!1),window.removeEventListener("mouseup",e.mouseup,!1),window.removeEventListener("mousemove",e.mousemove),window.removeEventListener("resize",e.resize),e.observer&&e.observer.disconnect&&e.observer.disconnect()},e.tryLoadStoredSettings=function(){var t;e.reloadStoredValues(),e.storedSettings&&_typeof(e.storedSettings.orders)==="object"&&e.storedSettings.orders!==null&&(e.storedSettings.orders.rows.length>=(e.viewData||[]).length&&(e.orders.rows=e.storedSettings.orders.rows),t=e.getSchema(),e.storedSettings.orders.columns.length===t.length&&(e.orders.columns=e.storedSettings.orders.columns),e.orderBy=e.storedSettings.orderBy===void 0?t[0].name:e.storedSettings.orderBy,e.orderDirection=e.storedSettings.orderDirection===void 0?"asc":e.storedSettings.orderDirection,e.storedSettings.orderBy!==void 0&&e.getHeaderByName(e.orderBy)&&e.orderDirection&&e.order(e.orderBy,e.orderDirection))},e.toggleCollapseTree=function(t,n,l){var a=this,c=[],u=0;if(n==e.cellTree.rowTreeColIndex&&(t>0||t==0&&e.cellTree.rows[0].icon)){var s=e.cellTree.rows;switch(l){case"Expand":s[t].expand=!0,e.cellTree.origin.rows[s[t].index].expand=!0;break;case"Collapse":s[t].expand=!1,e.cellTree.origin.rows[s[t].index].expand=!1;break;default:s[t].expand=!s[t].expand,e.cellTree.origin.rows[s[t].index].expand=s[t].expand}for(var v=s[t].index+1;v<=s[t].lastchild;v++){var d=e.cellTree.origin.rows[v];s[t].expand?(d.hide=!1,d.icon&&!d.expand&&(v=d.lastchild)):d.hide=!0}}else if(e.cellTree.columns[t]){var g=e.cellTree.columns[t];switch(l){case"Expand":g[n].expand=!0;break;case"Collapse":g[n].expand=!1;break;default:g[n].expand=!g[n].expand}for(var m=g[n].index+1;m<=g[n].lastchild;m++)g[n].expand?e.cellTree.tempSchema[m].hidden=!1:e.cellTree.tempSchema[m].hidden=!0;var f,p=0;if(g[n].expand)for(;p<g[n].child;){f=t+p+1;for(var b=g[n].index;b<=g[n].lastchild;b++)if(e.cellTree.origin.columns[f]&&e.cellTree.origin.columns[f][b].icon&&!e.cellTree.origin.columns[f][b].expand)for(var k=b+1;k<=e.cellTree.origin.columns[f][b].lastchild;k++)e.cellTree.tempSchema[k].hidden=!0;p++}}var C,I={},P=[];for(var E in e.cellTree.rows=[],e.cellTree.columns={},e.cellTree.origin.rows){var y=[],B=e.cellTree.origin.rows[E];if(B.hide){for(var S=0;S<e.cellTree.rowTreeColIndex;S++)y.push(e.viewData[E][S]);I[E]=y,P.push(Array(e.viewData[0].length).fill("")),u++}else{var V=[],D=0;if(E<e.cellTree.columnTreeRowStartIndex)c.push(e.originalData[E]);else if(E>e.cellTree.columnTreeRowEndIndex)I[E]=e.viewData[E],u++;else{for(var G=0;G<e.originalData[E].length;G++)e.cellTree.tempSchema[G].hidden?D++:(G<e.cellTree.rowTreeColIndex&&(Object.prototype.hasOwnProperty.call(I,E)||(I[E]=[]),I[E].push(e.viewData[E][G])),y.push(e.originalData[E][G]),Object.prototype.hasOwnProperty.call(e.cellTree.origin.columns,E)&&V.push(e.cellTree.origin.columns[E][G]));y.push.apply(y,_toConsumableArray(Array(D).fill(""))),V.length&&(V.push.apply(V,_toConsumableArray(Array(D).fill().map(function(){return _newArrowCheck(this,a),{}}.bind(this)))),e.cellTree.columns[E]=V),c.push(y)}e.cellTree.rows.push(B)}}u&&((C=e.cellTree.rows).push.apply(C,_toConsumableArray(Array(u).fill().map(function(Q,le){return _newArrowCheck(this,a),{index:e.cellTree.rows.length+le}}.bind(this)))),c.push.apply(c,P));for(var T in I)if(T>e.cellTree.columnTreeRowEndIndex)c[T]=I[T];else for(var q in I[T])c[T][q]=I[T][q];e.viewData=c},e.cellTreeExpandCollapse=function(t,n,l){if(n==e.cellTree.rowTreeColIndex&&(t>0||t==0&&e.cellTree.rows[0].icon)){var a=e.cellTree.rows;switch(l){case"Expand":a[t].expand=!0;break;case"Collapse":a[t].expand=!1;break;default:a[t].expand=!a[t].expand}for(var c=t+1;c<=a[t].lastchild;c++)a[t].expand?(a[c].hide=!1,a[c].icon&&!a[c].expand&&(c=a[c].lastchild)):a[c].hide=!0}else if(e.cellTree.columns[t]){var u=e.cellTree.columns[t];switch(l){case"Expand":u[n].expand=!0;break;case"Collapse":u[n].expand=!1;break;default:u[n].expand=!u[n].expand}for(var s=n+1;s<=u[n].lastchild;s++)u[n].expand?e.tempSchema[s].hidden=!1:e.tempSchema[s].hidden=!0;var v,d=0;if(u[n].expand)for(;d<u[n].child;){v=t+d+1;for(var g=n;g<=u[n].lastchild;g++)if(e.cellTree.columns[v]&&e.cellTree.columns[v][g].icon&&!e.cellTree.columns[v][g].expand)for(var m=g+1;m<=e.cellTree.columns[v][g].lastchild;m++)e.tempSchema[m].hidden=!0;d++}}},e.initCellTreeSettings=function(){var t=this;if(e.viewData!==void 0){if(e.attributes.rowTree.length>0&&e.viewData.length>0){e.cellTree.rows=Array(e.viewData.length).fill().map(function(b,k){return _newArrowCheck(this,t),{index:k}}.bind(this)),e.cellTree.rowTreeColIndex=e.attributes.rowTreeColIndex;var n,l=!1,a=_createForOfIteratorHelper(e.attributes.rowTree);try{for(a.s();!(n=a.n()).done;){var c=n.value;if(e.cellTree.rows.length<=c.end){l=!0;break}for(var u=c.begin;u<=c.end;u++)u==c.begin?(e.cellTree.rows[u].icon=!0,e.cellTree.rows[u].lastchild=c.end,e.cellTree.rows[u].expand=!0,e.cellTree.rows[u].parentCount||(e.cellTree.rows[u].parentCount=0)):(e.cellTree.rows[u].hide=!1,e.cellTree.rows[u].parentIndex=c.begin,e.cellTree.rows[u]&&e.cellTree.rows[u].parentCount?e.cellTree.rows[u].parentCount+=1:e.cellTree.rows[u].parentCount=1)}}catch(b){a.e(b)}finally{a.f()}l&&(e.cellTree.rows={})}if(e.attributes.columnTree.length>0&&e.viewData.length>0){e.cellTree.columnTreeRowStartIndex=e.attributes.columnTreeRowStartIndex,e.cellTree.columnTreeRowEndIndex=e.attributes.columnTreeRowEndIndex;var s,v=Object.keys(e.viewData[0]).length,d=!1,g=_createForOfIteratorHelper(e.attributes.columnTree);try{for(g.s();!(s=g.n()).done;){var m=s.value;if(v<=m.end){d=!0;break}e.cellTree.columns[m.row]||(e.cellTree.columns[m.row]=Array(v).fill().map(function(b,k){return _newArrowCheck(this,t),{index:k}}.bind(this)));for(var f=m.begin;f<=m.end;f++){var p=e.cellTree.columns[m.row][f];f==m.begin&&(p.icon=!0,p.lastchild=m.end,p.length=m.end-m.begin,p.expand=!0,m.child?p.child=m.child:p.child=0)}}}catch(b){g.e(b)}finally{g.f()}e.cellTree.tempSchema=Array(v).fill().map(function(){return{hidden:!1}}),d&&(e.cellTree.columns={})}e.cellTree.origin={rows:e.cellTree.rows,columns:e.cellTree.columns}}},e.getDomRoot=function(){return e.shadowRoot?e.shadowRoot.host:e.parentNode},e.getFontName=function(t){return t.replace(/\d+\.?\d*px/,"")},e.getFontHeight=function(t){return parseFloat(t)},e.parseStyleValue=function(t){if(/Font/.test(t))return e.style[t+"Height"]=e.getFontHeight(e.style[t]),void(e.style[t+"Name"]=e.getFontName(e.style[t]));t==="moveOverlayBorderSegments"&&typeof e.style[t]=="string"&&(e.style[t]=e.style[t].split(",").map(function(n){return parseInt(n,10)}))},e.initProp=function(t){e.args[t]&&Object.keys(e.args[t]).forEach(function(n){e[t][n]=e.args[t][n]})},e.getStyleProperty=function(t){return e.styleKeys.indexOf(t)===-1?e.parentNodeStyle[t]:e.style[t]},e.setStyleProperty=function(t,n,l){var a=["height","width","minHeight","minWidth","maxHeight","maxWidth"].indexOf(t)!==-1;e.styleKeys.indexOf(t)===-1?e.parentNodeStyle[t]=n:(/-/.test(t)&&(t=e.dehyphenateProperty(t)),e.style[t]=n,e.parseStyleValue(t)),a&&e.resize(),l||(e.draw(!0),e.dispatchEvent("stylechanged",{name:"style",value:n}))},e.reloadStoredValues=function(){if(e.attributes.name&&e.attributes.saveAppearance){try{e.storedSettings=localStorage.getItem(e.storageName+"-"+e.attributes.name)}catch(t){console.warn("Error loading stored values. "+t.message),e.storedSettings=void 0}if(e.storedSettings)try{e.storedSettings=JSON.parse(e.storedSettings)}catch(t){console.warn("could not read settings from localStore",t),e.storedSettings=void 0}e.storedSettings&&(_typeof(e.storedSettings.sizes)==="object"&&e.storedSettings.sizes!==null&&(e.sizes.rows=e.storedSettings.sizes.rows,e.sizes.columns=e.storedSettings.sizes.columns,["trees","columns","rows"].forEach(function(t){e.sizes[t]||(e.sizes[t]={})})),_typeof(e.storedSettings.visibility)==="object"&&e.getSchema().forEach(function(t){e.storedSettings.visibility&&e.storedSettings.visibility[t.name]!==void 0&&(t.hidden=!e.storedSettings.visibility[t.name])}))}},e.init=function(){if(!e.initialized){var t={};return e.setAttributes(),e.setStyle(),e.initScrollBox(),e.setDom(),e.nodeType="canvas-datagrid",e.ie=/Trident/.test(window.navigator.userAgent),e.edge=/Edge/.test(window.navigator.userAgent),e.webKit=/WebKit/.test(window.navigator.userAgent),e.moz=/Gecko/.test(window.navigator.userAgent),e.mobile=/Mobile/i.test(window.navigator.userAgent),e.blankValues=[void 0,null,""],e.cursorGrab="grab",e.cursorGrabing="grabbing",e.cursorGrab=e.webKit?"-webkit-grab":e.cursorGrab,e.cursorGrabing=e.moz?"-webkit-grabbing":e.cursorGrabbing,e.pointerLockPosition={x:0,y:0},Object.keys(e.style).forEach(e.parseStyleValue),e.intf.moveSelection=e.moveSelection,e.intf.deleteSelectedData=e.deleteSelectedData,e.intf.moveTo=e.moveTo,e.intf.addEventListener=e.addEventListener,e.intf.removeEventListener=e.removeEventListener,e.intf.dispatchEvent=e.dispatchEvent,e.intf.dispose=e.dispose,e.intf.appendTo=e.appendTo,e.intf.getVisibleCellByIndex=e.getVisibleCellByIndex,e.intf.filters=e.filters,e.intf.sorters=e.sorters,e.intf.autosize=e.autosize,e.intf.beginEditAt=e.beginEditAt,e.intf.endEdit=e.endEdit,e.intf.setActiveCell=e.setActiveCell,e.intf.forEachSelectedCell=e.forEachSelectedCell,e.intf.scrollIntoView=e.scrollIntoView,e.intf.clearChangeLog=e.clearChangeLog,e.intf.gotoCell=e.gotoCell,e.intf.gotoRow=e.gotoRow,e.intf.addButton=e.addButton,e.intf.toggleCellCollapseTree=e.toggleCellCollapseTree,e.intf.expandCollapseCellTree=e.expandCollapseCellTree,e.intf.getHeaderByName=e.getHeaderByName,e.intf.findColumnScrollLeft=e.findColumnScrollLeft,e.intf.findRowScrollTop=e.findRowScrollTop,e.intf.fitColumnToValues=e.fitColumnToValues,e.intf.findColumnMaxTextLength=e.findColumnMaxTextLength,e.intf.disposeContextMenu=e.disposeContextMenu,e.intf.getCellAt=e.getCellAt,e.intf.groupColumns=e.groupColumns,e.intf.groupRows=e.groupRows,e.intf.removeGroupColumns=e.removeGroupColumns,e.intf.removeGroupRows=e.removeGroupRows,e.intf.toggleGroupColumns=e.toggleGroupColumns,e.intf.toggleGroupRows=e.toggleGroupRows,e.intf.getGroupsColumnBelongsTo=e.getGroupsColumnBelongsTo,e.intf.getGroupsRowBelongsTo=e.getGroupsRowBelongsTo,e.intf.isCellVisible=e.isCellVisible,e.intf.isRowVisible=e.isRowVisible,e.intf.isColumnVisible=e.isColumnVisible,e.intf.order=e.order,e.intf.draw=e.draw,e.intf.refresh=e.refresh,e.intf.isComponent=e.isComponent,e.intf.selectArea=e.selectArea,e.intf.clipElement=e.clipElement,e.intf.getSchemaFromData=e.getSchemaFromData,e.intf.setFilter=e.setFilter,e.intf.parentGrid=e.parentGrid,e.intf.toggleTree=e.toggleTree,e.intf.expandTree=e.expandTree,e.intf.collapseTree=e.collapseTree,e.intf.canvas=e.canvas,e.intf.context=e.ctx,e.intf.insertRow=e.insertRow,e.intf.deleteRow=e.deleteRow,e.intf.addRow=e.addRow,e.intf.insertColumn=e.insertColumn,e.intf.deleteColumn=e.deleteColumn,e.intf.addColumn=e.addColumn,e.intf.getClippingRect=e.getClippingRect,e.intf.setRowHeight=e.setRowHeight,e.intf.setColumnWidth=e.setColumnWidth,e.intf.resetColumnWidths=e.resetColumnWidths,e.intf.resetRowHeights=e.resetRowHeights,e.intf.resize=e.resize,e.intf.selectColumn=e.selectColumn,e.intf.selectRow=e.selectRow,e.intf.selectAll=e.selectAll,e.intf.selectNone=e.selectNone,e.intf.drawChildGrids=e.drawChildGrids,e.intf.assertPxColor=e.assertPxColor,e.intf.clearPxColorAssertions=e.clearPxColorAssertions,e.intf.integerToAlpha=e.integerToAlpha,e.intf.copy=e.copy,e.intf.cut=e.cut,e.intf.paste=e.paste,e.intf.setStyleProperty=e.setStyleProperty,e.intf.hideColumns=e.hideColumns,e.intf.unhideColumns=e.unhideColumns,e.intf.hideRows=e.hideRows,e.intf.unhideRows=e.unhideRows,Object.defineProperty(e.intf,"defaults",{get:function(){return{styles:e.defaults.styles.reduce(function(l,a){return l[a[0]]=a[1],l},{}),attributes:e.defaults.attributes.reduce(function(l,a){return l[a[0]]=a[1],l},{})}}}),e.styleKeys=Object.keys(e.intf.defaults.styles),e.styleKeys.map(function(l){return e.hyphenateProperty(l,!1)}).forEach(n),e.styleKeys.map(function(l){return e.hyphenateProperty(l,!0)}).forEach(n),e.DOMStyles=window.getComputedStyle(document.body,null),e.styleKeys.concat(Object.keys(e.DOMStyles)).forEach(function(l){t[l]=void 0,Object.defineProperty(t,l,{get:function(){return e.getStyleProperty(l)},set:function(a){e.initialized&&(e.appliedInlineStyles[l]=a),e.setStyleProperty(l,a)}})}),Object.defineProperty(e.intf,"shadowRoot",{get:function(){return e.shadowRoot}}),Object.defineProperty(e.intf,"activeCell",{get:function(){return e.activeCell}}),Object.defineProperty(e.intf,"hasFocus",{get:function(){return e.hasFocus}}),Object.defineProperty(e.intf,"hasActiveFilters",{get:function(){return e.hasActiveFilters()}}),Object.defineProperty(e.intf,"style",{get:function(){return t},set:function(l){Object.keys(l).forEach(function(a){e.setStyleProperty(a,l[a],!0)}),e.draw(!0),e.dispatchEvent("stylechanged",{name:"style",value:l})}}),Object.defineProperty(e.intf,"attributes",{value:{}}),Object.keys(e.attributes).forEach(function(l){Object.defineProperty(e.intf.attributes,l,{get:function(){return e.attributes[l]},set:function(a){e.attributes[l]=a,l==="name"&&e.tryLoadStoredSettings(),l!=="rowTree"&&l!=="columnTree"&&l!=="columnTreeRowEndIndex"||e.initCellTreeSettings(),e.draw(!0),e.dispatchEvent("attributechanged",{name:l,value:a[l]})}})}),e.filters.string=function(l,a){if(a===e.attributes.blanksText)return e.blankValues.includes(l==null?l:String(l).trim());l=String(l);var c,u=/\/(i|g|m)*$/.exec(a),s=u?u[0].substring(1):"",v=s.length;if(e.invalidFilterRegEx=void 0,a.substring(0,1)==="/"&&u){try{c=new RegExp(a.substring(1,a.length-(v+1)),s)}catch(d){return void(e.invalidFilterRegEx=d)}return c.test(l)}return!!l.toString&&l.toString().toLocaleUpperCase().indexOf(a.toLocaleUpperCase())!==-1},e.filters.number=function(l,a){return a===e.attributes.blanksText?e.blankValues.includes(l==null?l:String(l).trim()):!a||l===a},["formatters","filters","sorters"].forEach(e.initProp),e.applyComponentStyle(!1,e.intf),e.reloadStoredValues(),e.args.data&&(e.intf.data=e.args.data),(e.intf.innerText||e.intf.textContent)&&(e.intf.dataType==="application/x-canvas-datagrid"&&(e.intf.dataType="application/json+x-canvas-datagrid"),e.intf.data=e.intf.innerText||e.intf.textContent),e.args.schema&&(e.intf.schema=e.args.schema),e.isChildGrid||!e.isComponent?requestAnimationFrame(function(){e.resize(!0)}):e.resize(!0),e.initialized=!0,e}function n(l){e.styleKeys.indexOf(l)===-1&&e.styleKeys.push(l)}},e.intf.blur=function(t){e.hasFocus=!1},e.intf.focus=function(){e.hasFocus=!0,e.controlInput.focus()},(e.shadowRoot||e.isChildGrid)&&(Object.defineProperty(e.intf,"height",{get:function(){return e.shadowRoot?e.shadowRoot.height:e.parentNode.height},set:function(t){e.shadowRoot?e.shadowRoot.height=t:e.parentNode.height=t,e.resize(!0)}}),Object.defineProperty(e.intf,"width",{get:function(){return e.shadowRoot?e.shadowRoot.width:e.parentNode.width},set:function(t){e.shadowRoot?e.shadowRoot.width=t:e.parentNode.width=t,e.resize(!0)}}),Object.defineProperty(e.intf,"parentNode",{get:function(){return e.parentNode},set:function(t){if(!e.isChildGrid)throw new TypeError("Cannot set property parentNode which has only a getter");e.parentNode=t}})),Object.defineProperty(e.intf,"visibleRowHeights",{get:function(){return e.visibleRowHeights}}),Object.defineProperty(e.intf,"openChildren",{get:function(){return e.openChildren}}),Object.defineProperty(e.intf,"childGrids",{get:function(){return Object.keys(e.childGrids).map(function(t){return e.childGrids[t]})}}),Object.defineProperty(e.intf,"isChildGrid",{get:function(){return e.isChildGrid}}),Object.defineProperty(e,"cursor",{get:function(){return e.parentNodeStyle.cursor},set:function(t){t==="cell"&&(t="default"),e.currentCursor!==t&&(e.parentNodeStyle.cursor=t,e.currentCursor=t)}}),Object.defineProperty(e.intf,"orderDirection",{get:function(){return e.orderDirection},set:function(t){t!=="desc"&&(t="asc"),e.orderDirection=t,e.order(e.orderBy,e.orderDirection)}}),Object.defineProperty(e.intf,"orderBy",{get:function(){return e.orderBy},set:function(t){if(e.getSchema().find(function(n){return n.name===t})===void 0)throw new Error("Cannot sort by unknown column name.");e.orderBy=t,e.order(e.orderBy,e.orderDirection)}}),e.isComponent&&(Object.defineProperty(e.intf,"offsetHeight",{get:function(){return e.canvas.offsetHeight}}),Object.defineProperty(e.intf,"offsetWidth",{get:function(){return e.canvas.offsetWidth}})),Object.defineProperty(e.intf,"scrollHeight",{get:function(){return e.scrollBox.scrollHeight}}),Object.defineProperty(e.intf,"scrollWidth",{get:function(){return e.scrollBox.scrollWidth}}),Object.defineProperty(e.intf,"scrollTop",{get:function(){return e.scrollBox.scrollTop},set:function(t){e.scrollBox.scrollTop=t}}),Object.defineProperty(e.intf,"scrollLeft",{get:function(){return e.scrollBox.scrollLeft},set:function(t){e.scrollBox.scrollLeft=t}}),Object.defineProperty(e.intf,"sizes",{get:function(){return e.sizes}}),Object.defineProperty(e.intf,"parentDOMNode",{get:function(){return e.parentDOMNode}}),Object.defineProperty(e.intf,"input",{get:function(){return e.input}}),Object.defineProperty(e.intf,"controlInput",{get:function(){return e.controlInput}}),Object.defineProperty(e.intf,"currentCell",{get:function(){return e.currentCell}}),Object.defineProperty(e.intf,"visibleCells",{get:function(){return e.visibleCells}}),Object.defineProperty(e.intf,"visibleRows",{get:function(){return e.visibleRows}}),Object.defineProperty(e.intf,"selections",{get:function(){return o||(console.warn("DeprecationWarning: The property 'selections' is deprecated due to performance issue. And it will be removed in the future.Please use new property 'selectionList' instead. Visit this link to get more information: https://github.com/TonyGermaneri/canvas-datagrid/pull/498"),o=!0),e.getObsoleteSelectionMatrix()}}),Object.defineProperty(e.intf,"selectionList",{get:function(){return e.selections}}),Object.defineProperty(e.intf,"dragMode",{get:function(){return e.dragMode}}),Object.defineProperty(e.intf,"changes",{get:function(){return e.changes}}),e.intf.formatters=e.formatters,Object.defineProperty(e.intf,"dataType",{get:function(){return e.dataType},set:function(t){if(!e.parsers[t])throw new Error("No parser for MIME type "+t);e.dataType=t}}),e.eventNames.forEach(function(t){Object.defineProperty(e.intf,"on"+t,{get:function(){return e.componentL1Events[t]},set:function(n){e.events[t]=[],e.componentL1Events[t]=n,n&&e.addEventListener(t,n)}})}),Object.defineProperty(e.intf,"frozenRow",{get:function(){return e.frozenRow},set:function(t){if(isNaN(t))throw new TypeError("Expected value for frozenRow to be a number.");if(e.visibleRows.length<t)throw new RangeError("Cannot set a value larger than the number of visible rows.");e.frozenRow=t}}),Object.defineProperty(e.intf,"frozenColumn",{get:function(){return e.frozenColumn},set:function(t){if(isNaN(t))throw new TypeError("Expected value for frozenRow to be a number.");if(e.getVisibleSchema().length<t)throw new RangeError("Cannot set a value larger than the number of visible columns.");e.frozenColumn=t}}),Object.defineProperty(e.intf,"scrollIndexRect",{get:function(){return{top:e.scrollIndexTop,right:e.scrollIndexRight,bottom:e.scrollIndexBottom,left:e.scrollIndexLeft}}}),Object.defineProperty(e.intf,"scrollPixelRect",{get:function(){return{top:e.scrollPixelTop,right:e.scrollPixelRight,bottom:e.scrollPixelBottom,left:e.scrollPixelLeft}}}),Object.defineProperty(e.intf,"rowOrder",{get:function(){return e.orders.rows},set:function(t){if(!Array.isArray(t))throw new TypeError("Value must be an array.");if(!e.originalData||t.length<e.originalData.length)throw new RangeError("Array length must be equal to or greater than number of rows.");e.orders.rows=t}}),Object.defineProperty(e.intf,"columnOrder",{get:function(){return e.orders.columns},set:function(t){if(!Array.isArray(t))throw new TypeError("Value must be an array.");if(t.length<e.getSchema().length)throw new RangeError("Array length must be equal to or greater than number of columns.");e.orders.columns=t}}),Object.defineProperty(e.intf,"selectionBounds",{get:function(){return e.getSelectionBounds()}}),Object.defineProperty(e.intf,"selectedRows",{get:function(){return e.getSelectedData(!0)}}),Object.defineProperty(e.intf,"selectedCells",{get:function(){return e.getSelectedData()}}),Object.defineProperty(e.intf,"visibleSchema",{get:function(){return e.getVisibleSchema().map(function(t){return t})}}),Object.defineProperty(e.intf,"treeGridAttributes",{get:function(){return e.treeGridAttributes},set:function(t){e.treeGridAttributes=t}}),Object.defineProperty(e.intf,"cellGridAttributes",{get:function(){return e.cellGridAttributes},set:function(t){e.cellGridAttributes=t}}),Object.defineProperty(e.intf,"fillCellCallback",{get:function(){return e.fillCellCallback},set:function(t){e.fillCellCallback=t}}),Object.defineProperty(e.intf,"ctx",{get:function(){return e.ctx}}),Object.defineProperty(e.intf,"schema",{get:function(){return e.getSchema()},set:function(t){if(t===void 0)return e.schema=void 0,e.tempSchema=void 0,void e.dispatchEvent("schemachanged",{schema:void 0});if(!Array.isArray(t)||_typeof(t[0])!=="object")throw new Error("Schema must be an array of objects.");if(t[0].name===void 0)throw new Error("Expected schema to contain an object with at least a name property.");e.schema=t.map(function(n,l){return n.width=n.width||e.style.cellWidth,n.filter=n.filter||e.filter(n.type),n.type=n.type||"string",n.index=l,n.columnIndex=l,n.rowIndex=-1,n}),e.tempSchema=void 0,e.createNewRowData(),e.createColumnOrders(),e.tryLoadStoredSettings(),e.storedSettings&&_typeof(e.storedSettings.visibility)==="object"&&e.schema.forEach(function(n,l){e.storedSettings&&e.storedSettings.visibility[n.name]!==void 0&&(n.hidden=!e.storedSettings.visibility[n.name])}),e.resize(!0),e.dispatchEvent("schemachanged",{schema:e.schema})}}),e.intf.getTypes=function(){return Object.keys(e.parsers)},e.parseInnerHtml=function(t){if(!t||/^ +$/.test(t))return[];try{t=JSON.parse(t)}catch(n){console.warn(Error("Cannot parse application/json+x-canvas-datagrid formated data. "+n.message+`  
Note: canvas-datagrid.innerHTML is for string data only.  Use the canvas-datagrid.data property to set object data.`))}return t},e.parsers["application/json+x-canvas-datagrid"]=function(t,n){e.parsers["application/x-canvas-datagrid"](e.parseInnerHtml(t),function(l,a){return n(l,a)})},e.parsers["application/x-canvas-datagrid"]=function(t,n){return n(t)},e.intf.parsers=e.parsers,e.etl=function(t,n){if(!e.intf.parsers[e.dataType])throw new Error("Unsupported data type.");e.intf.parsers[e.dataType](t,function(l,a){e.originalData=l,e.viewData=Array.from(e.originalData),Array.isArray(a)&&(e.schema=a),e.attributes.autoGenerateSchema&&(e.schema=e.getSchemaFromData(l)),e.schema||(e.tempSchema=e.getSchemaFromData(l)),e.getSchema()&&e.createColumnOrders(),e.refresh(),e.schema||(e.originalData||[]).length!==0||(e.tempSchema=[{name:""}]),e.fitColumnToValues("cornerCell",!0),(e.tempSchema&&!e.schema||e.attributes.autoGenerateSchema)&&(e.createColumnOrders(),e.dispatchEvent("schemachanged",{schema:e.tempSchema})),n()})},Object.defineProperty(e.intf,"viewData",{get:function(){return e.viewData}}),Object.defineProperty(e.intf,"boundData",{get:function(){return e.originalData}}),Object.defineProperty(e.intf,"data",{get:function(){return e.originalData},set:function(t){e.etl(t,function(){e.changes=[],e.createNewRowData(),e.attributes.autoResizeColumns&&e.originalData.length>0&&e.storedSettings===void 0&&e.autosize(),e.fitColumnToValues("cornerCell",!0),e.createRowOrders(),e.tryLoadStoredSettings(),e.dispatchEvent("datachanged",{data:e.originalData}),e.initCellTreeSettings(),e.resize(!0)})}}),e.initScrollBox=function(){var t=0,n=0,l=0,a=0,c=0,u=0,s=20,v=20;function d(m,f){if(isNaN(m))throw new Error("ScrollTop value must be a number");m<0&&(m=0),m>c&&(m=c),c<0&&(m=0),l=m,f||e.scroll(),e.button&&e.moveButtonPos()}function g(m,f){if(isNaN(m))throw new Error("ScrollLeft value must be a number");m<0&&(m=0),m>u&&(m=u),u<0&&(m=0),a=m,f||e.scroll(),e.button&&e.moveButtonPos()}e.scrollBox.toString=function(){return'{"width": '+u.toFixed(2)+', "height": '+c.toFixed(2)+', "left": '+a.toFixed(2)+', "top": '+l.toFixed(2)+', "widthRatio": '+e.scrollBox.widthBoxRatio.toFixed(5)+', "heightRatio": '+e.scrollBox.heightBoxRatio.toFixed(5)+"}"},e.scrollBox.scrollTo=function(m,f,p){g(m,!0),d(f,p)},Object.defineProperty(e.scrollBox,"scrollBoxHeight",{get:function(){return s},set:function(m){s=m}}),Object.defineProperty(e.scrollBox,"scrollBoxWidth",{get:function(){return v},set:function(m){v=m}}),Object.defineProperty(e.scrollBox,"height",{get:function(){return t},set:function(m){t=m}}),Object.defineProperty(e.scrollBox,"width",{get:function(){return n},set:function(m){n=m}}),Object.defineProperty(e.scrollBox,"scrollTop",{get:function(){return l},set:d}),Object.defineProperty(e.scrollBox,"scrollLeft",{get:function(){return a},set:g}),Object.defineProperty(e.scrollBox,"scrollHeight",{get:function(){return c},set:function(m){l>m&&(l=Math.max(m,0)),c=m}}),Object.defineProperty(e.scrollBox,"scrollWidth",{get:function(){return u},set:function(m){a>m&&(a=Math.max(m,0)),u=m}})}}function selections(e){var i=this;function r(t,n,l){if(n){var a=n.top,c=n.bottom,u=n.left,s=n.right,v=c-a+1,d=s-u+1,g=getSelectionStateFromCells(e.selections,{startRow:a,endRow:c,startColumn:u,endColumn:s});if(g!==!1)for(var m=o(u,d),f=a,p=a+v;f<p;f++){var b=e.viewData[f]||{},k=g===!0||g[f-a];if(k){for(var C=u,I=u+d;C<I;C++)if(k===!0||k[C-u]){var P=m[C];P&&(!P.hidden||l)&&t({value:b[P.name],header:P,columnName:P.name,boundRowIndex:e.getBoundRowIndexFromViewRowIndex(f),boundColumnIndex:e.orders.columns[C],viewRowIndex:f,viewColumnIndex:C})}}}}}function o(t,n){for(var l=e.getSchema(),a=[],c=t,u=t+n;c<u;c++){var s=l[e.orders.columns[c]];a[c]=s}return a}e.selections=[],e.selectionCache=[],e.selectionCacheWidth=0,e.selectionCacheHeight=0,e.getObsoleteSelectionMatrix=function(t){var n=this;_newArrowCheck(this,i);var l=e.getSelectionBounds(!0,t);if(!l)return[];var a=l.top,c=l.bottom,u=l.left,s=l.right,v=c-a+1,d=s-u+1,g=getSelectionStateFromCells(e.selections,{startRow:a,endRow:c,startColumn:u,endColumn:s});if(g===!1)return[];for(var m=[],f=a,p=a+v;f<p;f++)if(g!==!0){var b=g[f-a];if(b){m[f]=[];for(var k=u,C=u+d;k<C;k++)(b===!0||b[k-u])&&m[f].push(k)}}else m[f]=new Array(d).fill(0).map(function(y,B){return _newArrowCheck(this,n),u+B}.bind(this));for(var I=0;I<e.selections.length;I++){var P=e.selections[I];if(P.type===SelectionType.Rows)for(var E=P.startRow;E<=P.endRow;E++)m[E]?m[E][0]!==-1&&m[E].unshift(-1):m[E]=[-1]}return m}.bind(this),e.getSelectedContiguousColumns=function(t){var n=this;t||(t=e.getSchema());var l=getSelectedContiguousColumns(e.selections,!1);if(Array.isArray(l)){var a=e.orders.columns;return l.map(function(c){_newArrowCheck(this,n);var u=a[c],s=t[u];return Object.assign({},s,{orderIndex:c})}.bind(this))}},e.getSelectedContiguousRows=function(t){var n=getSelectedContiguousRows(e.selections,!1);if(Array.isArray(n)&&(t||n[0]!==n[1]))return n},e.canSelectionsBeCopied=function(){return e.selections.length>0&&!areSelectionsComplex(e.selections)},e.getSelectedRowsHeight=function(){var t=getSelectedContiguousRows(e.selections,!0);if(!t)return 0;for(var n=0,l=t[0];l<=t[1];l++)n+=e.getRowHeight(l);return n},e.getSelectedColumnsWidth=function(){var t=getSelectedContiguousColumns(e.selections,!0);if(!t)return 0;for(var n=0,l=t[0];l<=t[1];l++)n+=e.getColumnWidth(e.orders.columns[l]);return n},e.isCellSelected=function(t){return _newArrowCheck(this,i),isCellSelected(e.selections,t.rowIndex,t.viewColumnIndex)}.bind(this),e.isColumnSelected=function(t){return _newArrowCheck(this,i),typeof t=="number"&&isColumnSelected(e.selections,t)}.bind(this),e.isRowSelected=function(t){return _newArrowCheck(this,i),typeof t=="number"&&isRowSelected(e.selections,t)}.bind(this),e.clearSelections=function(t){_newArrowCheck(this,i),e.selections=[],t&&e.dispatchSelectionChangedEvent()}.bind(this),e.selectNone=function(t){_newArrowCheck(this,i),e.clearSelections(!0),t||e.draw()}.bind(this),e.selectAll=function(t){_addIntoSelections(e.selections,{type:SelectionType.Columns,startColumn:0,endColumn:e.getSchema().length-1})&&!t&&e.draw()},e.unselectCell=function(t,n){_newArrowCheck(this,i);var l=_removeFromSelections(e.selections,normalizeSelection({type:SelectionType.Cells,startRow:t.rowIndex,startColumn:t.viewColumnIndex}));return l&&!n&&e.dispatchSelectionChangedEvent(),l}.bind(this),e.unselectRows=function(t,n,l){_newArrowCheck(this,i);var a=_removeFromSelections(e.selections,normalizeSelection({type:SelectionType.Rows,startRow:t,endRow:n}));return a&&!l&&e.dispatchSelectionChangedEvent(),a}.bind(this),e.selectCell=function(t,n){_newArrowCheck(this,i);var l=_addIntoSelections(e.selections,normalizeSelection({type:SelectionType.Cells,startRow:t.rowIndex,startColumn:t.viewColumnIndex}));return l&&!n&&e.dispatchSelectionChangedEvent(),l}.bind(this),e.moveSelection=function(t,n){moveSelections(e.selections,t,n)},e.dispatchSelectionChangedEvent=function(){_newArrowCheck(this,i),e.dispatchEvent("selectionchanged",e.getContextOfSelectionEvent())}.bind(this),e.getContextOfSelectionEvent=function(){_newArrowCheck(this,i);var t={selectionList:e.cloneSelections()};return Object.defineProperty(t,"selections",{get:function(){return e.getObsoleteSelectionMatrix()}}),Object.defineProperty(t,"selectedData",{get:function(){return e.getSelectedData()}}),Object.defineProperty(t,"selectedCells",{get:function(){return e.getSelectedCells()}}),Object.defineProperty(t,"selectionBounds",{get:function(){return e.getSelectionBounds()}}),t}.bind(this),e.cloneSelections=function(){return _newArrowCheck(this,i),cloneSelections(e.selections)}.bind(this),e.getSelectionBounds=function(t,n){_newArrowCheck(this,i);var l=getSelectionBounds(n||e.selections);if(t){if(l.top>l.bottom||l.left>l.right)return null;e.sanitizeSelectionBounds(l)}return l}.bind(this),e.sanitizeSelectionBounds=function(t){if(_newArrowCheck(this,i),!t)return t;t.top<0&&(t.top=0),t.left<0&&(t.left=0);var n=e.viewData.length;t.bottom>n&&(t.bottom=n-1);var l=e.getSchema().length;return t.right>l&&(t.right=l-1),t}.bind(this),e.getSelectedData=function(t){_newArrowCheck(this,i);var n=e.getSelectionBounds(!0);if(!n)return[];var l=[],a=n.top,c=n.bottom,u=n.left,s=n.right,v=c-a+1,d=s-u+1,g=getSelectionStateFromCells(e.selections,{startRow:a,endRow:c,startColumn:u,endColumn:s});if(g===!1)return[];for(var m=o(u,d),f=a,p=a+v;f<p;f++){var b=e.viewData[f]||{},k={},C=!1,I=g===!0||g[f-a];if(I){for(var P=u,E=u+d;P<E;P++)if(g===!0||I[P-u]){var y=m[P];if(y&&!y.hidden){if(C=!0,t)break;k[y.name]=b[y.name]}}C&&(l[f]=t?Object.assign({},b):k)}}return l}.bind(this),e.getSelectedCells=function(t){var n=this;_newArrowCheck(this,i);var l=[],a=e.getSelectionBounds(!0);return r(function(c){return _newArrowCheck(this,n),l.push(c)}.bind(this),a,t),l}.bind(this),e.clearSelectedCells=function(){var t=this;_newArrowCheck(this,i);var n=[],l=e.getSelectionBounds(!0);return r(function(a){_newArrowCheck(this,t),n.push(a),e.viewData[a.boundRowIndex][a.columnName]=""}.bind(this),l,!1),n}.bind(this),e.deleteSelectedData=function(t){var n=this;_newArrowCheck(this,i);var l=e.clearSelectedCells().map(function(a){return _newArrowCheck(this,n),[a.viewRowIndex,a.viewColumnIndex,a.boundRowIndex,a.boundColumnIndex]}.bind(this));e.dispatchEvent("afterdelete",{cells:l}),t||requestAnimationFrame(function(){return _newArrowCheck(this,n),e.draw()}.bind(this))}.bind(this),e.forEachSelectedCell=function(t,n){var l=this,a=e.getSelectionBounds(!0);r(function(c){return _newArrowCheck(this,l),t(e.viewData,c.viewRowIndex,c.columnName,c)}.bind(this),a,n)},e.copySelectedCellsToClipboard=function(t){_newArrowCheck(this,i);var n=areSelectionsNeat(e.selections),l=e.getSelectedData();if(l.length>0)for(var a=createTextString(l,n),c={"text/plain":a,"text/html":createHTMLString(l,n),"text/csv":a,"application/json":JSON.stringify(l)},u=0,s=Object.entries(c);u<s.length;u++){var v=_slicedToArray(s[u],2),d=v[0],g=v[1];t.setData(d,g)}}.bind(this),e.fitSelectedColumns=function(t){var n=this;_newArrowCheck(this,i);var l=e.getSelectionBounds(!0);if(l){var a=typeof t=="number"&&t>0;l.bottom=l.top,r(function(c){_newArrowCheck(this,n);var u=c.columnName,s=c.viewColumnIndex;a?(e.sizes.columns[s]=t,e.dispatchEvent("resizecolumn",{x:t,y:e.resizingStartingHeight,width:t,height:e.resizingStartingHeight,columnIndex:s,draggingItem:e.currentCell})):e.fitColumnToValues(u)}.bind(this),l,!1)}}.bind(this),e.fitSelectedRows=function(t){_newArrowCheck(this,i);var n=e.getSelectionBounds(!0);if(n)for(var l=n.top;l<=n.bottom;l++)e.isRowSelected(l)&&(e.sizes.rows[l]=t,e.dispatchEvent("resizerow",{width:e.resizingStartingWidth,height:t,rowIndex:l,draggingItem:e.currentCell}))}.bind(this),e.selectColumn=function(t,n,l,a){if(_newArrowCheck(this,i),e.isMultiRowsSelected=!1,e.isMultiColumnsSelected=!1,l){if(!e.activeCell)return;var c=Math.min(e.activeCell.columnIndex,t),u=Math.max(e.activeCell.columnIndex,t);_addIntoSelections(e.selections,normalizeSelection({type:SelectionType.Columns,startColumn:c,endColumn:u-1})),c!=u&&(e.isMultiColumnsSelected=!0)}var s;n||l||(e.selections=[],e.activeCell.columnIndex=t,e.activeCell.rowIndex=e.scrollIndexTop),n&&e.isColumnSelected(t)?(s=t,_removeFromSelections(e.selections,normalizeSelection({type:SelectionType.Columns,startColumn:s}))):function(v){_addIntoSelections(e.selections,normalizeSelection({type:SelectionType.Columns,startColumn:v}))}(t),a||e.dispatchSelectionChangedEvent()}.bind(this),e.selectRow=function(t,n,l,a){function c(){a||e.dispatchSelectionChangedEvent()}if(_newArrowCheck(this,i),e.isMultiRowsSelected=!1,(e.dragAddToSelection===!1||e.dragObject===void 0)&&isRowSelected(e.selections,t)&&n)return _removeFromSelections(e.selections,normalizeSelection({type:SelectionType.Rows,startRow:t})),void c();if(e.dragAddToSelection===!0||e.dragObject===void 0)if(l&&e.dragObject===void 0){if(!e.activeCell)return;var u=Math.min(e.activeCell.rowIndex,t),s=Math.max(e.activeCell.rowIndex,t);_addIntoSelections(e.selections,normalizeSelection({type:SelectionType.Rows,startRow:u,endRow:s}))}else v=t,_addIntoSelections(e.selections,normalizeSelection({type:SelectionType.Rows,startRow:v}));var v;c()}.bind(this),e.selectArea=function(t,n){var l=e.getSchema().length;if(t){if(t.right<0&&(t.right=Math.max(l-1,t.left,0)),t.top>t.bottom||t.left>t.right)throw new Error("Impossible selection area");e.selectionBounds=e.sanitizeSelectionBounds(t)}var a=e.selectionBounds,c=a.top,u=a.bottom,s=a.left,v=a.right;if(n||(e.selections=[]),u>=e.viewData.length&&(u=Math.max(e.viewData.length-1,c)),c<-1||s<-1||v>l)throw new Error("Impossible selection area");var d={rows:e.viewData.length,columns:l},g=!1;if(c===-1){var m=Math.max(s,0),f=s===-1?l-1:Math.min(v,l-1);g=_addIntoSelections(e.selections,normalizeSelection({type:SelectionType.Columns,startColumn:m,endColumn:f}),d)}else if(s===-1){var p=Math.max(c,0),b=Math.min(u,e.viewData.length-1);g=_addIntoSelections(e.selections,normalizeSelection({type:SelectionType.Rows,startRow:p,endRow:b}),d)}else g=_addIntoSelections(e.selections,normalizeSelection({type:SelectionType.Cells,startRow:c,endRow:u,startColumn:s,endColumn:v}),d);g&&e.dispatchSelectionChangedEvent()},e.getRowSelectionStates=function(t){var n=this;_newArrowCheck(this,i),(typeof t!="number"||t<0)&&(t=0);var l=e.getSchema().length-1,a=l-0+1,c=getSelectionStateFromCells(e.selections,{startRow:t,startColumn:0,endRow:t,endColumn:l});if(c!==!1){if(c===!0)return new Array(a).fill(!0).map(function(d,g){return _newArrowCheck(this,n),g}.bind(this));var u=c[0];if(u){for(var s=[],v=0;v<u.length;v++)u[v]&&s.push(v);return s}}}.bind(this),e.replaceAllSelections=function(t){_newArrowCheck(this,i),cleanupSelections(t),e.selections=t}.bind(this),e.selectColumnViewIndexes=function(t){var n=this;_newArrowCheck(this,i);var l=t.map(function(a){return _newArrowCheck(this,n),{type:SelectionType.Columns,startColumn:a,endRow:a}}.bind(this));e.replaceAllSelections(l)}.bind(this),e.getRowViewIndexesFromSelection=function(){if(_newArrowCheck(this,i),e.selections.length===0)return[];for(var t=getSelectionBounds(e.selections,!0),n=[],l=t.top;l<=t.bottom;l++)n.push(l);return n}.bind(this),e.shrinkOrExpandSelections=function(t,n,l){_newArrowCheck(this,i);var a=shrinkOrExpandSelections(e.selections,t,n,{columns:e.getSchema().length,rows:e.viewData.length});return a&&!l&&e.dispatchSelectionChangedEvent(),a}.bind(this)}function contextMenu(e){var i,r,o;function t(a){e.createInlineStyle(a,"canvas-datagrid-context-menu-item"+(e.mobile?"-mobile":"")),a.addEventListener("mouseover",function(){e.createInlineStyle(a,"canvas-datagrid-context-menu-item:hover")}),a.addEventListener("mouseout",function(){e.createInlineStyle(a,"canvas-datagrid-context-menu-item")})}function n(a,c,u,s){var v,d,g,m=document.createElement("div"),f=document.createElement("div"),p=document.createElement("div"),b=[],k=-1,C={};if(!Array.isArray(u))throw new Error("createContextMenu expects an array.");function I(){m.scrollTop>0?e.parentDOMNode.appendChild(f):f.parentNode&&f.parentNode.removeChild(f),m.scrollTop>=m.scrollHeight-m.offsetHeight&&p.parentNode?p.parentNode.removeChild(p):m.scrollHeight-m.offsetHeight>0&&!(m.scrollTop>=m.scrollHeight-m.offsetHeight)&&e.parentDOMNode.appendChild(p)}function P(y){return function B(){var S=e.attributes.contextHoverScrollAmount;y==="up"&&m.scrollTop===0||y==="down"&&m.scrollTop===m.scrollHeight||(m.scrollTop+=y==="up"?-S:S,r=setTimeout(B,e.attributes.contextHoverScrollRateMs,y))}}function E(y){return function(){clearTimeout(r)}}return C.parentGrid=e.intf,C.parentContextMenu=s,C.container=m,d={},g=e.scrollOffset(e.canvas),i===void 0&&(i=e.style.contextMenuZIndex),u.forEach(function(y){var B,S=document.createElement("div");function V(T){T.relatedTarget===m||y.contextMenu.container===T.relatedTarget||B===T.relatedTarget||S===T.relatedTarget||y.contextMenu.container.contains(T.relatedTarget)||(y.contextMenu.dispose(),b.splice(b.indexOf(y.contextMenu),1),y.contextMenu=void 0,S.removeEventListener("mouseout",V),m.removeEventListener("mouseout",V),S.setAttribute("contextOpen","0"),S.setAttribute("opening","0"))}function D(T){if(S.getAttribute("opening")==="1"&&S.getAttribute("contextOpen")!=="1"){var q=S.getBoundingClientRect();q={left:q.left+e.style.childContextMenuMarginLeft+m.offsetWidth,top:q.top+e.style.childContextMenuMarginTop,bottom:q.bottom,right:q.right},y.contextMenu=n(a,q,T,C),S.setAttribute("contextOpen","1"),S.addEventListener("mouseout",V),m.addEventListener("mouseout",V),b.push(y.contextMenu)}}function G(){var T;if(S.getAttribute("contextOpen")!=="1"){if(S.setAttribute("opening","1"),typeof y.items=="function")return T=y.items.apply(C,[function(q){D(q)}]),void(T!==void 0&&Array.isArray(T)&&D(T));D(y.items)}}(function(T){(function q(Q){if(Q!==null)return typeof Q=="function"?q(Q(a)):void(_typeof(Q)!=="object"?(t(S),S.innerHTML=Q):S.appendChild(Q))})(T.title),T.contextItemContainer=S,(T.items&&T.items.length>0||typeof T.items=="function")&&(B=document.createElement("div"),e.createInlineStyle(B,"canvas-datagrid-context-child-arrow"),B.innerHTML=e.style.childContextMenuArrowHTML,S.appendChild(B),S.addEventListener("mouseover",G),S.addEventListener("mouseout",function(){S.setAttribute("opening","0")})),T.click&&S.addEventListener("click",function(q){T.click.apply(e,[q])})})(y),m.appendChild(S)}),e.createInlineStyle(m,"canvas-datagrid-context-menu"+(e.mobile?"-mobile":"")),d.x=c.left-g.left,d.y=c.top-g.top,d.height=0,i+=1,m.style.opacity=0,m.style.position="absolute",f.style.color=e.style.contextMenuArrowColor,p.style.color=e.style.contextMenuArrowColor,[f,p].forEach(function(y){y.style.textAlign="center",y.style.position="absolute",y.style.zIndex=i+1}),m.style.zIndex=i,s&&s.inputDropdown&&(m.style.maxHeight=window.innerHeight-d.y-e.style.autocompleteBottomMargin+"px",m.style.minWidth=c.width+"px",d.y+=c.height),e.mobile&&(m.style.width=c.width+"px"),m.style.left=d.x+"px",m.style.top=d.y+"px",m.addEventListener("scroll",I),m.addEventListener("wheel",function(y){e.hasFocus&&(m.scrollTop+=y.deltaY,m.scrollLeft+=y.deltaX),I()}),f.innerHTML=e.style.contextMenuArrowUpHTML,p.innerHTML=e.style.contextMenuArrowDownHTML,m.appendChild(f),document.body.appendChild(p),document.body.appendChild(m),function(y){var B=.1;y.style.display="block";var S=setInterval(function(){B>=1&&clearInterval(S),y.style.opacity=B,y.style.filter="alpha(opacity="+100*B+")",B+=.1*B},.1*e.attributes.animationDurationShowContextMenu)}(m),(v=m.getBoundingClientRect()).bottom>window.innerHeight&&(s&&s.inputDropdown||(d.y-=v.bottom+e.style.contextMenuWindowMargin-window.innerHeight),d.y<0&&(d.y=e.style.contextMenuWindowMargin),m.offsetHeight>window.innerHeight-e.style.contextMenuWindowMargin&&(m.style.height=window.innerHeight-2*e.style.contextMenuWindowMargin+"px")),v.right>window.innerWidth&&(d.x-=v.right-window.innerWidth+e.style.contextMenuWindowMargin),d.x<0&&(d.x=e.style.contextMenuWindowMargin),d.y<0&&(d.y=e.style.contextMenuWindowMargin),m.style.left=d.x+"px",m.style.top=d.y+"px",v=m.getBoundingClientRect(),f.style.top=v.top+"px",p.style.top=v.top+v.height-p.offsetHeight+"px",f.style.left=v.left+"px",p.style.left=v.left+"px",p.style.width=m.offsetWidth+"px",f.style.width=m.offsetWidth+"px",p.addEventListener("mouseover",P("down")),p.addEventListener("mouseout",E()),f.addEventListener("mouseover",P("up")),f.addEventListener("mouseout",E()),I(),C.clickIndex=function(y){u[y].contextItemContainer.dispatchEvent(new Event("click"))},C.rect=v,C.items=u,C.upArrow=f,C.downArrow=p,C.dispose=function(){clearTimeout(r),b.forEach(function(y){y.dispose()}),[p,f,m].forEach(function(y){var B,S,V;B=y,S=1,V=setInterval(function(){S<=.1&&(clearInterval(V),B.style.display="none",B.parentNode&&B.parentNode.removeChild(B)),B.style.opacity=S,B.style.filter="alpha(opacity="+100*S+")",S-=.1*S},.1*e.attributes.animationDurationHideContextMenu)})},Object.defineProperty(C,"selectedIndex",{get:function(){return k},set:function(y){if(typeof y!="number"||isNaN(y)||!isFinite(y))throw new Error("Context menu selected index must be a sane number.");(k=y)>u.length-1&&(k=u.length-1),k<0&&(k=0),u.forEach(function(B,S){if(S===k)return e.createInlineStyle(B.contextItemContainer,"canvas-datagrid-context-menu-item:hover");e.createInlineStyle(B.contextItemContainer,"canvas-datagrid-context-menu-item")})}}),C}function l(a){var c,u=document.createElement("div"),s=document.createElement("div"),v=document.createElement("button"),d=document.createElement("input"),g=a.cell&&a.cell.header?a.cell.header.title||a.cell.header.name:"";function m(){d.style.background=e.style.contextFilterInputBackground,d.style.color=e.style.contextFilterInputColor,e.invalidFilterRegEx&&(d.style.background=e.style.contextFilterInvalidRegExpBackground,d.style.color=e.style.contextFilterInvalidRegExpColor)}function f(p){if(!p||!["ArrowDown","ArrowUp","Enter","Tab"].includes(p.key)){var b,k,C,I=(b=0,k={},C=[],e.viewData.forEach(function(P){var E=P[a.cell.header.name]==null?P[a.cell.header.name]:String(P[a.cell.header.name]).trim(),y=e.blankValues.includes(E)?e.attributes.blanksText:E;k[y]||b>e.attributes.maxAutoCompleteItems||(b+=1,k[y]={title:e.formatters[a.cell.header.type||"string"]({cell:{value:y}}),click:function(B){d.value=y,B.stopPropagation(),d.dispatchEvent(new Event("keyup")),e.disposeAutocomplete()}})}),Object.keys(k).indexOf(e.attributes.blanksText)!==-1&&(C.push(k[e.attributes.blanksText]),delete k[e.attributes.blanksText]),C.concat(Object.keys(k).map(function(P){return k[P]})));c=d.getBoundingClientRect(),o&&(o.dispose(),o=void 0),(o=n(a,{left:c.left,top:c.top,right:c.right,bottom:c.bottom,height:c.height,width:c.width},I,{inputDropdown:!0})).selectedIndex=0}}e.createInlineStyle(s,"canvas-datagrid-context-menu-label"),e.createInlineStyle(v,"canvas-datagrid-context-menu-filter-button"),e.createInlineStyle(d,"canvas-datagrid-context-menu-filter-input"),m(),d.onclick=e.disposeAutocomplete,d.addEventListener("keydown",function(p){p.key==="ArrowDown"&&(o.selectedIndex+=1),p.key==="ArrowUp"&&(o.selectedIndex-=1),p.key==="Enter"&&(o.clickIndex(o.selectedIndex),e.disposeContextMenu()),p.key==="Tab"&&(o.clickIndex(o.selectedIndex),p.preventDefault()),p.key==="Escape"&&e.disposeContextMenu()}),d.addEventListener("keyup",function(){e.setFilter(a.cell.header.name,d.value)}),d.addEventListener("keyup",f),["focus","blur","keydown","keyup","change"].forEach(function(p){d.addEventListener(p,m)}),d.value=a.cell.header&&e.columnFilters[a.cell.header.name]||"",s.innerHTML=e.attributes.filterOptionText.replace(/%s/g,g),v.onclick=function(){if(o)return e.disposeAutocomplete();f()},v.innerHTML=e.style.contextFilterButtonHTML,u.addEventListener("click",function(p){return p.stopPropagation()}),u.appendChild(s),u.appendChild(d),u.appendChild(v),a.items.push({title:u}),Object.keys(e.columnFilters).length&&Object.keys(e.columnFilters).forEach(function(p){var b=e.getHeaderByName(p);a.items.push({title:e.attributes.removeFilterOptionText.replace(/%s/g,b.title||b.name),click:function(k){k.preventDefault(),e.setFilter(p,""),e.controlInput.focus()}})})}e.disposeAutocomplete=function(){o&&(o.dispose(),o=void 0)},e.disposeContextMenu=function(a){document.removeEventListener("click",e.disposeContextMenu),i=e.style.contextMenuZIndex,e.disposeAutocomplete(),e.contextMenu&&e.contextMenu.dispose(),e.contextMenu=void 0,a&&(e.canvas.focus(),e.mousedown(a),e.mouseup(a))},e.contextmenuEvent=function(a,c){var u=this;if(e.hasFocus||a.target===e.canvas){for(var s=Object.keys(e.childGrids),v=0;v<s.length;v++){var d=e.childGrids[s[v]],g=d&&d.parentNode;if(g){var m=g.offsetLeft,f=g.offsetWidth,p=g.offsetTop,b=g.offsetHeight;if(a.x>=m&&a.x<=m+f&&a.y>=p&&a.y<=p+b)return}}if(e.isChildGrid&&e.parentNode){var k=e.parentGrid&&e.parentGrid.childGrids;if(!k||!Array.isArray(k)||!k.find(function(O){_newArrowCheck(this,u);var L=O.parentNode,A=e.parentNode;return L.offsetTop==A.offsetTop&&L.offsetLeft===A.offsetLeft}.bind(this)))return;for(var C=e.parentNode.offsetLeft,I=e.parentNode.offsetLeft+e.parentNode.offsetWidth,P=e.parentNode.offsetTop,E=e.parentNode.offsetTop+e.parentNode.offsetHeight,y=e.parentNode.parentNode;y;){var B=y,S=B.offsetLeft,V=B.offsetWidth,D=B.offsetTop;S>C&&(C=S),D>P&&(P=D);var G=S+V,T=D+B.offsetHeight;if(G<I&&(I=G),T<E&&(E=T),y.nodeType!=="canvas-datagrid-tree")break;y=y.parentNode}if(!(a.x>=C&&a.x<=I&&a.y>=P&&a.y<=E))return}var q,Q=[],le=c||e.getLayerPos(a),W={NativeEvent:a,cell:e.getCellAt(le.x,le.y),pos:le,items:Q};W.cell.isGrid||function(O){var L,A=this,K=e.getSchema(),re=function(){var Z=this;return _newArrowCheck(this,A),L||(L=new Map(K.map(function(ce){return _newArrowCheck(this,Z),[ce.columnIndex,ce]}.bind(this)))),L}.bind(this),pe=e.orderings.columns&&e.orderings.columns.length>0,we=!(O.cell.isBackground||O.cell.isColumnHeaderCellCap||O.cell.isScrollBar||O.cell.isCorner||O.cell.isRowHeader)&&O.cell.header;if(e.attributes.showFilter&&we&&l(O),e.attributes.showCopy&&e.canSelectionsBeCopied()&&O.items.push({title:e.attributes.copyText,click:function(){document.execCommand("copy"),e.disposeContextMenu(),e.controlInput.focus()}}),e.attributes.showPaste&&e.clipBoardData&&O.items.push({title:e.attributes.pasteText,click:function(){e.paste(e.clipBoardData),e.draw()}}),e.attributes.showColumnSelector&&(O.items.push({title:e.attributes.columnSelectorText,items:function(){var Z=[];return e.getSchema().forEach(function(ce){function _(x){ce.hidden=!ce.hidden,e.dispatchEvent("togglecolumn",{column:ce,hidden:ce.hidden}),x.preventDefault(),e.stopPropagation(x),e.disposeContextMenu(),e.resize(!0),e.setStorageData()}var ye=document.createElement("div");t(ye),ye.addEventListener("touchstart",_),ye.addEventListener("click",_),ye.innerHTML=(ce.hidden?e.attributes.columnSelectorHiddenText:e.attributes.columnSelectorVisibleText)+(ce.title||ce.name),Z.push({title:ye})}),Z}}),O.cell&&O.cell.header&&O.cell.columnIndex>-1)){var ee=O.cell.columnIndex,H=e.orders.columns[ee],be=e.getSelectedContiguousColumns(K),U="";if(be)U=be.map(function(Z){return _newArrowCheck(this,A),Z.title||Z.name}.bind(this)).join("-");else{var Be=K[H];Be&&(U=Be.title||Be.name)}O.items.push({title:e.attributes.hideColumnText.replace(/%s/gi,U),click:function(Z){Z.preventDefault(),e.stopPropagation(Z),e.disposeContextMenu(),be?e.hideColumns(be[0].orderIndex,be[1].orderIndex):e.hideColumns(ee)}})}if(e.attributes.saveAppearance&&e.attributes.showClearSettingsOption&&(Object.keys(e.sizes.rows).length>0||Object.keys(e.sizes.columns).length>0)&&O.items.push({title:e.attributes.clearSettingsOptionText,click:function(Z){Z.preventDefault(),e.sizes.rows={},e.sizes.columns={},e.createRowOrders(),e.createColumnOrders(),e.storedSettings=void 0,e.dispatchEvent("resizecolumn",{columnWidth:e.style.cellWidth}),e.dispatchEvent("resizerow",{cellHeight:e.style.cellHeight}),e.setStorageData(),e.resize(!0),e.disposeContextMenu(),e.controlInput.focus()}}),e.attributes.allowSorting&&e.attributes.showOrderByOption&&we&&(O.items.push({title:e.attributes.showOrderByOptionTextAsc.replace("%s",O.cell.header.title||O.cell.header.name),click:function(Z){Z.preventDefault(),e.order(O.cell.header.name,"asc"),e.controlInput.focus()}}),O.items.push({title:e.attributes.showOrderByOptionTextDesc.replace("%s",O.cell.header.title||O.cell.header.name),click:function(Z){Z.preventDefault(),e.order(O.cell.header.name,"desc"),e.disposeContextMenu(),e.controlInput.focus()}})),!pe&&O.cell.isRowHeader&&O.cell.header){var $e=e.getSelectedContiguousRows(!0);if($e){var He,Ae=$e.map(function(Z){return _newArrowCheck(this,A),e.getBoundRowIndexFromViewRowIndex(Z)}.bind(this));Ae.length===1?(He=typeof Ae[0]=="number"?Ae[0]+1:$e[0]+1,He=e.attributes.showHideRow.replace("%s",He),O.items.push({title:He,click:function(Z){Z.preventDefault(),e.hideRows(Ae[0],Ae[0])}})):Ae[0]<=Ae[1]&&(He=Ae.map(function(Z,ce){return _newArrowCheck(this,A),typeof Z=="number"?Z+1:$e[ce]+1}.bind(this)).join("-"),He=e.attributes.showHideRows.replace("%s",He),O.items.push({title:He,click:function(Z){Z.preventDefault(),e.hideRows(Ae[0],Ae[1])}}))}}var Fe=e.getColumnGroupAreaHeight(),Ne=e.getRowGroupAreaWidth(),nt=function(Z,ce){if(_newArrowCheck(this,A),Z.length!==0){for(var _=0;_<Z.length;_++)for(var ye=Z[_],x=0;x<ye.length;x++)ye[x].collapsed=ce;e.refresh()}}.bind(this);O.pos&&O.pos.y<Fe&&(O.items.push({title:e.attributes.showRemoveAllGroupColumns,click:function(Z){Z.preventDefault(),e.groupedColumns=[],e.refresh()}}),O.items.push({title:e.attributes.showExpandAllGroupColumns,click:function(Z){Z.preventDefault(),nt(e.groupedColumns,!1)}}),O.items.push({title:e.attributes.showCollapseAllGroupColumns,click:function(Z){Z.preventDefault(),nt(e.groupedColumns,!0)}})),O.pos&&O.pos.x<Ne&&(O.items.push({title:e.attributes.showRemoveAllGroupRows,click:function(Z){Z.preventDefault(),e.groupedRows=[],e.refresh()}}),O.items.push({title:e.attributes.showExpandAllGroupRows,click:function(Z){Z.preventDefault(),nt(e.groupedRows,!1)}}),O.items.push({title:e.attributes.showCollapseAllGroupRows,click:function(Z){Z.preventDefault(),nt(e.groupedRows,!0)}}));var dt=e.attributes.allowGroupingColumns&&O.cell.isColumnHeader&&O.cell.header&&O.cell.header.index>0,Je=e.attributes.allowGroupingColumns&&O.cell.isColumnHeader,je=!pe&&e.attributes.allowGroupingRows&&O.cell.isRowHeader&&O.cell.header,Ve=e.attributes.allowGroupingRows&&O.cell.isRowHeader;if(dt){for(var F=[],oe=O.cell.header.index,he=oe;he>=0&&e.isColumnSelected(he);he--)F[0]=he;for(he=oe;e.isColumnSelected(he);he++)F[1]=he;if(he!==oe&&F.length===2&&F[1]>F[0]&&e.isNewGroupRangeValid(e.groupedColumns,F[0],F[1])){for(var Ie=re(),Pe=[],Se=[],ge=0;ge<F.length;ge++){var Le=F[ge],ze=Ie.get(Le);ze&&(Se.push(ze.name),Pe.push(ze.title||ze.name||ze.index))}Se[0]&&Se[1]&&O.items.push({title:e.attributes.showGroupColumns.replace("%s",Pe[0]+"-"+Pe[1]),click:function(Z){Z.preventDefault(),e.groupColumns(Se[0],Se[1]),e.controlInput.focus()}})}}if(Je)for(var et=O.cell.columnIndex,rt=e.getGroupsColumnBelongsTo(et),tt=re(),ft=function(Z){var ce=rt[Z],_=ce.from,ye=ce.to,x=tt.get(_),N=tt.get(ye);if(x&&N){var ae=(x.title||x.name||x.index)+"-"+(N.title||N.name||N.index);O.items.push({title:e.attributes.showRemoveGroupColumns.replace("%s",ae),click:function(ne){ne.preventDefault(),e.removeGroupColumns(x.name,N.name),e.controlInput.focus()}})}else console.warn("Cannot find column ".concat(_," or column ").concat(ye))},R=0;R<rt.length;R++)ft(R);if(je){var z=e.getSelectedContiguousRows(!1)||[],ie=z.map(function(Z){_newArrowCheck(this,A);var ce=e.getBoundRowIndexFromViewRowIndex(Z);return typeof ce=="number"?ce+1:Z+1}.bind(this)).join("-");z.length===2&&e.isNewGroupRangeValid(e.groupedRows,z[0],z[1])&&O.items.push({title:e.attributes.showGroupRows.replace("%s",ie),click:function(Z){Z.preventDefault(),e.groupRows(z[0],z[1])}})}if(Ve)for(var ke=O.cell.rowIndex,Y=e.getGroupsRowBelongsTo(ke),se=function(Z){var ce=this,_=Y[Z],ye=_.from,x=_.to,N=[ye,x].map(function(ae){_newArrowCheck(this,ce);var ne=e.getBoundRowIndexFromViewRowIndex(ae);return typeof ne=="number"?ne+1:ae+1}.bind(this)).join("-");O.items.push({title:e.attributes.showRemoveGroupRows.replace("%s",N),click:function(ae){ae.preventDefault(),e.removeGroupRows(ye,x),e.controlInput.focus()}})},te=0;te<Y.length;te++)se(te)}(W),a.type!=="mousedown"&&e.dispatchEvent("contextmenu",W)||W.cell.isGrid||(e.contextMenu&&e.disposeContextMenu(),q={left:le.x+le.rect.left+e.style.contextMenuMarginLeft+e.canvasOffsetLeft,top:le.y+le.rect.top+e.style.contextMenuMarginTop+e.canvasOffsetTop,right:W.cell.width+W.cell.x+le.rect.left,bottom:W.cell.height+W.cell.y+le.rect.top,height:W.cell.height,width:W.cell.width},e.mobile&&(q.left=e.style.mobileContextMenuMargin+"px",q.width=e.width-2*e.style.mobileContextMenuMargin+"px"),a.type=="mousedown"&&(q.top+=e.style.filterButtonMenuOffsetTop),e.contextMenu=n(W,q,Q),a.type=="mousedown"?window.addEventListener("mouseup",$):$(),a.preventDefault())}function $(){requestAnimationFrame(function(){document.addEventListener("click",e.disposeContextMenu),window.removeEventListener("mouseup",$)})}}}function button(e){var i;function r(t,n,l){var a=document.createElement("div"),c=document.createElement("div"),u=document.createElement("div"),s={};if(!Array.isArray(n))throw new Error("createButton expects an array.");return s.wrapper=a,s.items=n,function(){var v={},d=e.scrollOffset(e.canvas);if(i===void 0&&(i=e.style.buttonZIndex),function(m){e.createInlineStyle(m,"canvas-datagrid-button-wrapper"),m.addEventListener("mouseover",function(){e.buttonMenu||e.createInlineStyle(m,"canvas-datagrid-button-wrapper:hover")}),m.addEventListener("mouseout",function(){e.buttonMenu||e.createInlineStyle(m,"canvas-datagrid-button-wrapper")})}(a),e.createInlineStyle(u,"canvas-datagrid-button-icon"),e.createInlineStyle(c,"canvas-datagrid-button-arrow"),v.x=t.left-d.left,v.y=t.top-d.top,v.height=0,i+=1,a.style.position="absolute",a.style.zIndex=i,a.style.left=v.x+"px",a.style.top=v.y+"px",a.left=t.left+e.scrollBox.scrollLeft,a.top=t.top+e.scrollBox.scrollTop,c.innerHTML=e.style.buttonArrowDownHTML,l){var g=document.createElement("img");g.setAttribute("src",l),g.style.maxWidth="100%",g.style.height="100%",u.appendChild(g)}a.appendChild(u),a.appendChild(c),document.body.appendChild(a),a.addEventListener("click",o)}(),s.dispose=function(){a.parentNode&&a.parentNode.removeChild(a)},s}function o(){if(e.buttonMenu)e.disposeButtonMenu();else{var t={left:e.button.wrapper.left-e.scrollBox.scrollLeft,top:e.button.wrapper.top+e.button.wrapper.offsetHeight-e.scrollBox.scrollTop};e.buttonMenu=function(n,l){var a,c=document.createElement("div"),u=-1,s={};function v(){function m(C,I){function P(E){E!==null&&(_typeof(E)!=="object"?(function(y){e.createInlineStyle(y,"canvas-datagrid-button-menu-item"+(e.mobile?"-mobile":"")),y.addEventListener("mouseover",function(){e.createInlineStyle(y,"canvas-datagrid-button-menu-item:hover")}),y.addEventListener("mouseout",function(){e.createInlineStyle(y,"canvas-datagrid-button-menu-item")})}(I),I.innerHTML=E):I.appendChild(E))}P(C.title),C.buttonMenuItemContainer=I,C.click&&I.addEventListener("click",function(E){C.click.apply(e,[E]),e.disposeButton()})}var f,p=_createForOfIteratorHelper(l);try{for(p.s();!(f=p.n()).done;){var b=f.value,k=document.createElement("div");m(b,k),c.appendChild(k)}}catch(C){p.e(C)}finally{p.f()}}function d(m){l[m].buttonMenuItemContainer.dispatchEvent(new Event("click"))}function g(){var m={},f=e.scrollOffset(e.canvas);i===void 0&&(i=e.style.buttonZIndex),v(),e.createInlineStyle(c,"canvas-datagrid-button-menu"+(e.mobile?"-mobile":"")),m.x=n.left-f.left,m.y=n.top-f.top,m.height=0,i+=1,c.style.position="absolute",c.style.zIndex=i,c.style.left=m.x+"px",c.style.top=m.y+"px",document.body.appendChild(c),(a=c.getBoundingClientRect()).bottom>window.innerHeight&&(m.y=e.button.wrapper.top-c.offsetHeight-e.scrollBox.scrollTop,m.y<0&&(m.y=e.style.buttonMenuWindowMargin),c.offsetHeight>window.innerHeight-e.style.buttonMenuWindowMargin&&(c.style.height=window.innerHeight-2*e.style.buttonMenuWindowMargin+"px")),a.right>window.innerWidth&&(m.x-=a.right-window.innerWidth+e.style.buttonMenuWindowMargin),m.x<0&&(m.x=e.style.buttonMenuWindowMargin),m.y<0&&(m.y=e.style.buttonMenuWindowMargin),c.style.left=m.x+"px",c.style.top=m.y+"px"}return s.buttonMenu=c,g(),s.clickIndex=d,s.rect=a,s.items=l,s.dispose=function(){c.parentNode&&c.parentNode.removeChild(c)},Object.defineProperty(s,"selectedIndex",{get:function(){return u},set:function(m){if(typeof m!="number"||isNaN(m)||!isFinite(m))throw new Error("Button menu selected index must be a sane number.");(u=m)>l.length-1&&(u=l.length-1),u<0&&(u=0),l.forEach(function(f,p){if(p===u)return e.createInlineStyle(f.buttonMenuItemContainer,"canvas-datagrid-button-menu-item:hover");e.createInlineStyle(f.buttonMenuItemContainer,"canvas-datagrid-button-menu-item")})}}),s}(t,e.button.items),e.createInlineStyle(e.button.wrapper,"canvas-datagrid-button-wrapper:active"),requestAnimationFrame(function(){document.addEventListener("click",e.disposeButtonMenu)})}}e.disposeButtonMenu=function(){e.buttonMenu&&(document.removeEventListener("click",e.disposeButtonMenu),e.buttonMenu.dispose(),e.buttonMenu=void 0,e.createInlineStyle(e.button.wrapper,"canvas-datagrid-button-wrapper:hover"))},e.disposeButton=function(t){t&&t.keyCode!==27||(document.removeEventListener("keydown",e.disposeButton),i=e.style.buttonZIndex,e.disposeButtonMenu(),e.button&&e.button.dispose(),e.button=void 0)},e.moveButtonPos=function(){e.button.wrapper.style.left=e.button.wrapper.left-e.scrollBox.scrollLeft+"px",e.button.wrapper.style.top=e.button.wrapper.top-e.scrollBox.scrollTop+"px",e.disposeButtonMenu()},e.attachButton=function(t,n,l){e.button&&e.disposeButton(),e.button=r(t,n,l),requestAnimationFrame(function(){document.addEventListener("keydown",e.disposeButton)})}}function dom(e){e.getClippingRect=function(i){var r=e.position(e.parentNode),o=e.position(i),t=e.scrollOffset(e.canvas),n={x:0,y:0,h:0,w:0},l={x:-1/0,y:-1/0,h:1/0,w:1/0},a=e.getColumnHeaderCellHeight(),c=e.getRowHeaderCellWidth();return r.top-=t.top,r.left-=t.left,o.top-=t.top,o.left-=t.left,n.h=r.top+r.height-i.offsetTop-e.style.scrollBarWidth,n.w=r.left+r.width-i.offsetLeft-e.style.scrollBarWidth,n.x=r.left+-1*o.left+c,n.y=r.top+-1*o.top+a,{x:n.x>l.x?n.x:l.x,y:n.y>l.y?n.y:l.y,h:n.h<l.h?n.h:l.h,w:n.w<l.w?n.w:l.w}},e.clipElement=function(i){var r=e.getClippingRect(i);r.w<0&&(r.w=0),r.h<0&&(r.h=0),i.style.clip="rect("+r.y+"px,"+r.w+"px,"+r.h+"px,"+r.x+"px)"},e.scrollOffset=function(i){for(var r=0,o=0,t=document.scrollingElement||{scrollLeft:0,scrollTop:0};i.parentNode&&i.nodeName!=="CANVAS-DATAGRID"&&i!==e.intf;)i.nodeType!=="canvas-datagrid-tree"&&i.nodeType!=="canvas-datagrid-cell"&&(r-=i.scrollLeft,o-=i.scrollTop),i=i.parentNode;return{left:r-t.scrollLeft,top:o-t.scrollTop}},e.resizeEditInput=function(){if(e.input&&e.input.editCell){var i=e.canvas.getBoundingClientRect(),r=e.scrollOffset(e.intf),o=e.style.gridBorderCollapse==="collapse"?1:2,t=e.style.cellBorderWidth*o,n=e.getVisibleCellByIndex(e.input.editCell.columnIndex,e.input.editCell.rowIndex)||{x:-100,y:-100,height:0,width:0};if(e.mobile)return e.input.style.left="0",e.input.style.top=e.height-e.style.mobileEditInputHeight-t-1+"px",e.input.style.height=e.style.mobileEditInputHeight+"px",void(e.input.style.width=e.width-t-1+"px");var l=e.getColumnGroupAreaHeight(),a=e.getRowGroupAreaWidth();if(e.parentNode){var c=e.parentNode,u=c.columnGroupsAreaHeight,s=c.rowGroupsAreaWidth;u&&(l+=u),s&&(a+=s)}e.input.style.left=i.left+n.x+e.canvasOffsetLeft-r.left+a+"px",e.input.style.top=i.top+n.y-e.style.cellBorderWidth+e.canvasOffsetTop-r.top+l+"px",e.input.style.height=n.height-t+"px",e.input.style.width=n.width-e.style.cellPaddingLeft+"px",e.clipElement(e.input)}},e.position=function(i,r){for(var o,t,n=0,l=0,a=i,c=!1;i.offsetParent&&i.nodeName!=="CANVAS-DATAGRID";){var u=i.nodeType==="canvas-datagrid-tree";u&&c||(n+=i.offsetLeft,l+=i.offsetTop,o=i.offsetHeight,t=i.offsetWidth),u&&(c=!0),i=i.offsetParent}return r?{left:n,top:l,height:o,width:t}:(i=a,{left:n+(a=e.scrollOffset(i)).left,top:l+a.top,height:o,width:t})},e.getLayerPos=function(i){var r=e.canvas.getBoundingClientRect(),o={x:i.clientX-r.left,y:i.clientY-r.top};return e.isChildGrid&&(o.x-=e.canvasOffsetLeft,o.y-=e.canvasOffsetTop,e.parentNode.rowGroupsAreaWidth&&(o.x-=e.parentNode.rowGroupsAreaWidth),e.parentNode.columnGroupsAreaHeight&&(o.y-=e.parentNode.columnGroupsAreaHeight)),{x:o.x,y:o.y,rect:r}},e.endEdit=function(i){var r=e.input.editCell,o=r.rowIndex;if(e.dispatchEvent("beforeendedit",{cell:r,newValue:e.input.value,oldValue:r.value,abort:function(){i=!0},input:e.input}))return!1;if(e.input.value!==r.value&&!i){if(e.changes[o]=e.changes[o]||{},e.changes[o][r.header.name]=e.input.value,r.data||(e.originalData[r.boundRowIndex]={},r.data=e.originalData[r.boundRowIndex]),r.data[r.header.name]=e.input.value,o===e.viewData.length){if(e.dispatchEvent("newrow",{value:e.input.value,defaultValue:r.value,aborted:i,cell:r,input:e.input}))return!1;e.addRow(r.data),e.createNewRowData()}e.draw(!0)}return e.input.parentNode&&e.input.parentNode.removeChild(e.input),e.intf.focus(),e.dispatchEvent("endedit",{cell:r,value:e.input.value,aborted:i,input:e.input}),e.input=void 0,!0},e.beginEditAt=function(i,r,o){var t=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(e.attributes.editable){e.input&&e.endEdit();var n,l,a,c,u,s=e.getVisibleCellByIndex(i,r);if(e.getSchema(),s&&s.header){if(a=s.header.enum,e.dispatchEvent("beforebeginedit",{cell:s,NativeEvent:o}))return!1;if(e.scrollIntoView(i,r),e.setActiveCell(i,r),n=e.getAdjacentCells(),e.input=a?document.createElement("select"):document.createElement(e.attributes.multiLine?"textarea":"input"),s=e.getVisibleCellByIndex(i,r)){a&&(typeof a=="function"?l=a.apply(e.intf,[{cell:s}]):Array.isArray(a)&&(l=a),l.forEach(function(g){var m,f,p=document.createElement("option");Array.isArray(g)?(m=g[0],f=g[1]):(m=g,f=g),m===s.value&&(u=!0),p.value=m,p.innerHTML=f,e.input.appendChild(p)}),u||((c=document.createElement("option")).value=s.value,c.innerHTML=s.value,e.input.appendChild(c)),e.input.addEventListener("change",function(){e.endEdit(),e.draw(!0)})),e.dispatchEvent("appendeditinput",{cell:s,input:e.input})||document.body.appendChild(e.input),e.createInlineStyle(e.input,e.mobile?"canvas-datagrid-edit-mobile-input":"canvas-datagrid-edit-input"),e.input.style.position="absolute",e.input.editCell=s,e.resizeEditInput(),e.input.style.zIndex=e.style.editCellZIndex,e.input.style.fontSize=parseInt(e.style.editCellFontSize,10)*e.scale+"px";var v=[null,void 0].indexOf(s.value)!==-1||t;e.input.value=v?"":s.value;var d=Math.round(e.input.value.length*parseInt(e.style.editCellFontSize,10)*.7*e.scale);d+e.style.cellPaddingLeft<s.width?d=s.width-e.style.cellPaddingLeft:d>e.width-s.x-e.style.scrollBarWidth&&(d=e.width-s.x-e.style.scrollBarWidth,e.input.style.height="auto"),e.input.style.width=d+"px",e.input.focus(),e.input.addEventListener("click",e.stopPropagation),e.input.addEventListener("dblclick",e.stopPropagation),e.input.addEventListener("mouseup",e.stopPropagation),e.input.addEventListener("mousedown",e.stopPropagation),e.input.addEventListener("keydown",function(g){var m=s.columnIndex,f=s.rowIndex;if(g.key==="Escape")e.endEdit(!0),e.draw(!0);else if(g.key==="Enter"&&e.attributes.multiLine&&g.altKey)e.input.value=e.input.value+`
`,e.input.scrollTop=e.input.scrollHeight;else if(g.key==="Enter"){e.endEdit();var p=g.shiftKey?Math.max(0,f-1):Math.min(f+1,e.viewData.length-1);p!==f&&(e.scrollIntoView(m,p),e.setActiveCell(m,p)),e.draw(!0)}else if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(g.key)&&t){switch(g.key){case"ArrowUp":f=Math.max(0,f-1);break;case"ArrowDown":f=Math.min(f+1,e.viewData.length-1);break;case"ArrowLeft":m=Math.max(m-1,0);break;case"ArrowRight":m=n.right}e.endEdit(),e.scrollIntoView(m,f),e.setActiveCell(m,f),e.draw(!0)}else if(g.key==="Tab"){if(g.preventDefault(),!e.endEdit())return;m=g.shiftKey?n.left:n.right,n.left===i&&g.shiftKey&&(m=n.last,f-=1),n.right!==i||g.shiftKey||(m=n.first,f+=1),f<0&&(f=e.viewData.length-1),f>e.viewData.length-1&&(f=0),e.scrollIntoView(m,f),e.beginEditAt(m,f,g)}else{var b=Math.round(e.input.value.length*parseInt(e.style.editCellFontSize,10)*.7*e.scale);b+e.style.cellPaddingLeft<s.width?b=s.width-e.style.cellPaddingLeft:b>e.width-s.x-e.style.scrollBarWidth&&(b=e.width-s.x-e.style.scrollBarWidth,e.input.style.height="auto"),e.input.style.width=b+"px"}}),e.dispatchEvent("beginedit",{cell:s,input:e.input})}}}},e.createInlineStyle=function(i,r){var o={"canvas-datagrid-button-wrapper":{display:"inline-block",padding:e.style.buttonPadding,borderWidth:"1px",borderStyle:"solid",borderColor:e.style.buttonBorderColor,cursor:"pointer",background:e.style.buttonBackgroundColor,userSelect:"none"},"canvas-datagrid-button-wrapper:hover":{borderColor:e.style.buttonBorderColor,background:e.style.buttonHoverBackgroundColor},"canvas-datagrid-button-wrapper:active":{borderColor:e.style.buttonActiveBorderColor,background:e.style.buttonActiveBackgroundColor},"canvas-datagrid-button-icon":{width:"18px",height:"18px",display:"inline-block",verticalAlign:"middle"},"canvas-datagrid-button-arrow":{display:"inline-block",color:e.style.buttonArrowColor,fontSize:"9px"},"canvas-datagrid-button-menu-item-mobile":{lineHeight:"normal",fontWeight:"normal",fontFamily:e.style.contextMenuFontFamily,fontSize:e.style.contextMenuFontSize,color:"inherit",background:"inherit",margin:e.style.contextMenuItemMargin,borderRadius:e.style.contextMenuItemBorderRadius,verticalAlign:"middle"},"canvas-datagrid-button-menu-item":{lineHeight:"normal",fontWeight:"normal",fontFamily:e.style.contextMenuFontFamily,fontSize:e.style.contextMenuFontSize,color:"inherit",background:"inherit",margin:e.style.contextMenuItemMargin,borderRadius:e.style.contextMenuItemBorderRadius,verticalAlign:"middle"},"canvas-datagrid-button-menu-item:hover":{background:e.style.contextMenuHoverBackground,color:e.style.contextMenuHoverColor},"canvas-datagrid-button-menu-label":{margin:e.style.contextMenuLabelMargin,display:e.style.contextMenuLabelDisplay,minWidth:e.style.contextMenuLabelMinWidth,maxWidth:e.style.contextMenuLabelMaxWidth},"canvas-datagrid-button-menu-mobile":{lineHeight:"normal",fontWeight:"normal",fontFamily:e.style.contextMenuFontFamily,fontSize:e.style.contextMenuFontSize,background:e.style.contextMenuBackground,color:e.style.contextMenuColor,border:e.style.contextMenuBorder,padding:e.style.contextMenuPadding,borderRadius:e.style.contextMenuBorderRadius,opacity:e.style.contextMenuOpacity,overflow:"hidden",whiteSpace:"nowrap"},"canvas-datagrid-button-menu":{lineHeight:"normal",fontWeight:"normal",fontFamily:e.style.contextMenuFontFamily,fontSize:e.style.contextMenuFontSize,background:e.style.contextMenuBackground,color:e.style.contextMenuColor,border:e.style.contextMenuBorder,padding:e.style.contextMenuPadding,borderRadius:e.style.contextMenuBorderRadius,opacity:e.style.contextMenuOpacity,overflow:"hidden",whiteSpace:"nowrap",cursor:e.style.contextMenuCursor},"canvas-datagrid-context-menu-filter-input":{height:"19px",verticalAlign:"bottom",marginLeft:"2px",padding:"0",background:e.style.contextFilterInputBackground,color:e.style.contextFilterInputColor,border:e.style.contextFilterInputBorder,borderRadius:e.style.contextFilterInputBorderRadius,lineHeight:"normal",fontWeight:"normal",fontFamily:e.style.contextFilterInputFontFamily,fontSize:e.style.contextFilterInputFontSize},"canvas-datagrid-context-menu-filter-button":{height:"19px",verticalAlign:"bottom",marginLeft:"2px",padding:"0",background:e.style.contextMenuBackground,color:e.style.contextMenuColor,border:e.style.contextFilterButtonBorder,borderRadius:e.style.contextFilterButtonBorderRadius,lineHeight:"normal",fontWeight:"normal",fontFamily:e.style.contextMenuFilterButtonFontFamily,fontSize:e.style.contextMenuFilterButtonFontSize},"canvas-datagrid-context-child-arrow":{cssFloat:"right",color:e.style.childContextMenuArrowColor,fontSize:e.style.contextMenuChildArrowFontSize,fontFamily:e.style.contextMenuFontFamily,verticalAlign:"middle"},"canvas-datagrid-autocomplete":{fontFamily:e.style.contextMenuFontFamily,fontSize:e.style.contextMenuFontSize,background:e.style.contextMenuBackground,color:e.style.contextMenuColor,border:e.style.contextMenuBorder,padding:e.style.contextMenuPadding,borderRadius:e.style.contextMenuBorderRadius,opacity:e.style.contextMenuOpacity,position:"absolute",zIndex:9999,overflow:"hidden"},"canvas-datagrid-autocomplete-item":{background:e.style.contextMenuBackground,color:e.style.contextMenuColor},"canvas-datagrid-autocomplete-item:hover":{background:e.style.contextMenuHoverBackground,color:e.style.contextMenuHoverColor},"canvas-datagrid-canvas":{position:"absolute",zIndex:"-1"},"canvas-datagrid":{display:"block"},"canvas-datagrid-control-input":{position:"fixed",top:"-5px",left:"-5px",border:"none",opacity:"0",cursor:"pointer",width:"1px",height:"1px",lineHeight:"normal",fontWeight:"normal",fontFamily:e.style.contextMenuFontFamily,fontSize:e.style.contextMenuFontSize},"canvas-datagrid-edit-mobile-input":{boxSizing:"content-box",outline:"none",margin:"0",padding:"0 0 0 0",lineHeight:"normal",fontWeight:"normal",fontFamily:e.style.mobileEditFontFamily,fontSize:e.style.mobileEditFontSize,border:e.style.editCellBorder,color:e.style.editCellColor,background:e.style.editCellBackgroundColor,appearance:"none",webkitAppearance:"none",mozAppearance:"none",borderRadius:"0"},"canvas-datagrid-edit-input":{boxSizing:"content-box",outline:"none",margin:"0",padding:"0 0 0 "+e.style.editCellPaddingLeft+"px",lineHeight:"normal",fontWeight:"normal",fontFamily:e.style.editCellFontFamily,fontSize:e.style.editCellFontSize,boxShadow:e.style.editCellBoxShadow,border:e.style.editCellBorder,color:e.style.editCellColor,background:e.style.editCellBackgroundColor,appearance:"none",webkitAppearance:"none",mozAppearance:"none",borderRadius:"0"},"canvas-datagrid-context-menu-item-mobile":{lineHeight:"normal",fontWeight:"normal",fontFamily:e.style.contextMenuFontFamily,fontSize:e.style.contextMenuFontSize,color:"inherit",background:"inherit",margin:e.style.contextMenuItemMargin,borderRadius:e.style.contextMenuItemBorderRadius,verticalAlign:"middle"},"canvas-datagrid-context-menu-item":{lineHeight:"normal",fontWeight:"normal",fontFamily:e.style.contextMenuFontFamily,fontSize:e.style.contextMenuFontSize,color:"inherit",background:"inherit",margin:e.style.contextMenuItemMargin,borderRadius:e.style.contextMenuItemBorderRadius,verticalAlign:"middle"},"canvas-datagrid-context-menu-item:hover":{background:e.style.contextMenuHoverBackground,color:e.style.contextMenuHoverColor},"canvas-datagrid-context-menu-label":{margin:e.style.contextMenuLabelMargin,display:e.style.contextMenuLabelDisplay,minWidth:e.style.contextMenuLabelMinWidth,maxWidth:e.style.contextMenuLabelMaxWidth},"canvas-datagrid-context-menu-mobile":{lineHeight:"normal",fontWeight:"normal",fontFamily:e.style.contextMenuFontFamily,fontSize:e.style.contextMenuFontSize,background:e.style.contextMenuBackground,color:e.style.contextMenuColor,border:e.style.contextMenuBorder,padding:e.style.contextMenuPadding,borderRadius:e.style.contextMenuBorderRadius,opacity:e.style.contextMenuOpacity,overflow:"hidden",whiteSpace:"nowrap"},"canvas-datagrid-context-menu":{lineHeight:"normal",fontWeight:"normal",fontFamily:e.style.contextMenuFontFamily,fontSize:e.style.contextMenuFontSize,background:e.style.contextMenuBackground,color:e.style.contextMenuColor,border:e.style.contextMenuBorder,padding:e.style.contextMenuPadding,borderRadius:e.style.contextMenuBorderRadius,opacity:e.style.contextMenuOpacity,overflow:"hidden",whiteSpace:"nowrap",cursor:e.style.contextMenuCursor},"canvas-datagrid-invalid-search-regExp":{background:e.style.contextMenuFilterInvalidExpresion}};o[r]&&(Object.keys(o[r]).map(function(t){i.style[t]=o[r][t]}),i.className=r)},e.appendTo=function(i){e.parentNode=i,e.setDom()},e.setDom=function(){e.isChildGrid?(e.parentGrid=e.parentNode.parentGrid,e.ctx=e.parentGrid.context,e.canvas=e.parentGrid.canvas,e.controlInput=e.parentGrid.controlInput,e.eventParent=e.canvas):(e.controlInput=e.controlInput||document.createElement("input"),e.controlInput.onblur=e.intf.blur,e.createInlineStyle(e.controlInput,"canvas-datagrid-control-input"),e.isChildGrid=!1,e.parentDOMNode=e.parentNode,e.parentIsCanvas=/^canvas$/i.test(e.parentDOMNode.tagName),e.parentIsCanvas?e.canvas=e.parentDOMNode:(e.canvas=document.createElement("canvas"),e.parentDOMNode.appendChild(e.canvas)),document.body.appendChild(e.controlInput),e.createInlineStyle(e.canvas,"canvas-datagrid"),e.ctx=e.canvas.getContext("2d"),e.ctx.textBaseline="alphabetic",e.eventParent=e.canvas),e.parentNodeStyle=e.canvas.style,e.controlInput.setAttribute("readonly",!0),e.controlInput.addEventListener("blur",function(i){i.target!==e.canvas&&(e.hasFocus=!1)}),e.eventParent.addEventListener("scroll",e.resize,!1),e.eventParent.addEventListener("touchstart",e.touchstart,!1),e.eventParent.addEventListener("mousedown",e.mousedown,!1),e.eventParent.addEventListener("dblclick",e.dblclick,!1),e.eventParent.addEventListener("click",e.click,!1),e.eventParent.addEventListener("mouseup",e.mouseup,!1),window.addEventListener("mousemove",e.mousemove),e[e.isChildGrid?"parentGrid":"eventParent"].addEventListener("wheel",e.scrollWheel,!1),e.canvas.addEventListener("contextmenu",e.contextmenuEvent,!1),e.controlInput.addEventListener("copy",e.copy),e.controlInput.addEventListener("cut",e.cut),e.controlInput.addEventListener("paste",e.paste),e.controlInput.addEventListener("keypress",e.keypress,!1),e.controlInput.addEventListener("keyup",e.keyup,!1),e.controlInput.addEventListener("keydown",e.keydown,!1),window.addEventListener("resize",e.resize)}}var mergeHiddenRowRanges=function(e,i){var r=this,o=_slicedToArray(i,2),t=o[0],n=o[1];if(n<t)return!1;for(var l=!1,a=0;a<e.length;a++){var c=e[a];if(!(t>c[1]+1)){if(t<=c[0]&&n>=c[0]){e[a]=[t,Math.max(n,c[1])],l=!0;break}if(t>=c[0]){e[a]=[c[0],Math.max(n,c[1])],l=!0;break}}}l||e.push([t,n]),e.sort(function(d,g){return _newArrowCheck(this,r),d[0]-g[0]}.bind(this));for(var u=0;u<e.length-1;u++){var s=e[u],v=e[u+1];v[0]<=s[1]+1&&(e[u]=[s[0],Math.max(s[1],v[1])],e.splice(u+1,1),u--)}return!0};function publicMethods(e){function i(o,t,n){for(var l=!1,a=o==="rows"?e.groupedRows:e.groupedColumns,c=a.length-1;c>=0;c--){var u=a[c],s=u[0].from,v=u[u.length-1].to;if(t<=s&&n>=v){if(t===s&&n===v&&u.length===1)return}else{for(var d=0;d<u.length;d++){var g=u[d];if(!(t>g.to)){if(t>=g.from){if(n>g.to){if(t===g.from)return a.splice(c,0,[{from:t,to:n,collapsed:!1}]),void e.refresh();throw new Error("Can't group these ".concat(o))}if(n===g.to&&t===g.from)return;l=!0;break}if(n>=g.from){if(n<g.to)throw new Error("Can't group these ".concat(o));a.splice(c,0,[{from:t,to:n,collapsed:!1}])}else u.splice(d,0,{from:t,to:n,collapsed:!1});return void e.refresh()}}if(!l)return u.push({from:t,to:n,collapsed:!1}),void e.refresh()}}l?a.push([{from:t,to:n,collapsed:!1}]):a.unshift([{from:t,to:n,collapsed:!1}]),e.refresh()}function r(o,t,n){for(var l=0;l<o.length;l++)for(var a=o[l],c=0;c<a.length;c++){var u=a[c];if(u.from===t&&u.to===n)return a.length<=1?o.splice(l,1):a.splice(c,1),void e.refresh()}}e.integerToAlpha=function(o){for(var t="a".charCodeAt(0),n="z".charCodeAt(0)-t+1,l="";o>=0;)l=String.fromCharCode(o%n+t)+l,o=Math.floor(o/n)-1;return l},e.insertColumn=function(o,t){var n=e.getSchema();if(n.length<t)throw new Error("Index is beyond the length of the schema.");e.validateColumn(o,n),n.splice(t,0,o),e.originalData.forEach(function(l,a){e.applyDefaultValue(l,o,a)}),e.intf.schema=n,e.refresh()},e.deleteColumn=function(o){var t=e.getSchema();e.originalData.forEach(function(n){delete n[t[o].name]}),t.splice(o,1),e.intf.schema=t,e.refresh()},e.addColumn=function(o){var t=e.getSchema();e.validateColumn(o,t),t.push(o),e.originalData.forEach(function(n,l){e.applyDefaultValue(n,o,l)}),e.intf.schema=t,e.refresh()},e.deleteRow=function(o){e.originalData.splice(o,1),e.setFilter(),e.resize(!0)},e.insertRow=function(o,t){if(e.originalData.length<t)throw new Error("Index is beyond the length of the dataset.");e.originalData.splice(t,0,o),e.getSchema().forEach(function(n){o[n.name]===void 0&&e.applyDefaultValue(e.originalData[t],n,t)}),e.setFilter(),e.resize(!0)},e.addRow=function(o){e.originalData.push(o),e.getSchema().forEach(function(t){o[t.name]===void 0&&e.applyDefaultValue(e.originalData[e.originalData.length-1],t,e.originalData.length-1)}),e.setFilter(),e.resize(!0)},e.setRowHeight=function(o,t){e.sizes.rows[o]=t,e.draw(!0)},e.setColumnWidth=function(o,t){e.sizes.columns[o]=t,e.draw(!0)},e.resetColumnWidths=function(){e.sizes.columns={},e.draw(!0)},e.resetRowHeights=function(){e.sizes.rows={},e.draw(!0)},e.setFilter=function(o,t){o===void 0&&t===void 0?e.columnFilters={}:!o||t!==""&&t!==void 0?(e.columnFilters[o]=t,e.attributes.showFilterInCell&&(e.filterable.rows.push(0),e.orders.columns.forEach(function(n,l){e.filterable.columns.push(l)}))):delete e.columnFilters[o],Object.keys(e.columnFilters).length||(e.filterable={rows:[],columns:[]}),e.refresh()},e.findRowScrollTop=function(o){if(e.scrollCache.y[o]===void 0)throw new RangeError("Row index ".concat(o," out of range: ").concat(e.scrollCache.y.length,"."));return e.scrollCache.y[o]},e.findColumnScrollLeft=function(o){var t=Math.max(o-1,0);if(e.scrollCache.x[t]===void 0)throw new Error("Column index out of range.");return e.scrollCache.x[t]-e.getColumnWidth(e.orders.columns[o])},e.gotoCell=function(o,t,n,l){var a,c=o===void 0?void 0:e.findColumnScrollLeft(o),u=t===void 0?void 0:e.findRowScrollTop(t),s=e.scrollBox.width-(e.scrollBox.verticalBarVisible?e.style.scrollBarWidth:0),v=e.scrollBox.height-(e.scrollBox.horizontalBarVisible?e.style.scrollBarWidth:0);c-=s*(n=n===void 0?0:n),u-=v*(l=l===void 0?0:l),o!==void 0&&t!==void 0?(e.scrollBox.scrollTo(c,u),requestAnimationFrame(function(){(a=e.getVisibleCellByIndex(o,t))&&(c+=a.width*n,u+=a.height*l,e.scrollBox.scrollTo(c,u))})):o!==void 0?e.scrollBox.scrollLeft=c:t!==void 0&&(e.scrollBox.scrollTop=u)},e.gotoRow=function(o){e.gotoCell(0,o)},e.addButton=function(o,t,n,l,a){var c=e.visibleCells.filter(function(u){return u.sortColumnIndex===o&&u.sortRowIndex===t});e.attachButton({top:c[0].y+c[0].height+n.y,left:c[0].x+c[0].width+n.x},l,a)},e.toggleCellCollapseTree=function(o){for(var t in o){var n,l=_createForOfIteratorHelper(o[t]);try{for(l.s();!(n=l.n()).done;){var a=n.value;a.length>0&&e.toggleCollapseTree(a[0],a[1],t)}}catch(c){l.e(c)}finally{l.f()}}e.draw()},e.expandCollapseCellTree=function(o){for(var t in o){var n,l=_createForOfIteratorHelper(o[t]);try{for(l.s();!(n=l.n()).done;){var a=n.value;a.length>0&&e.cellTreeExpandCollapse(a[0],a[1],t)}}catch(c){l.e(c)}finally{l.f()}}e.draw()},e.scrollIntoView=function(o,t,n,l){var a=e.visibleCells.filter(function(c){return(c.rowIndex===t||t===void 0)&&(c.columnIndex===o||o===void 0)&&c.x>0&&c.y>0&&c.x+c.width<e.width&&c.y+c.height<e.height});a.length===1&&o!==void 0&&t!==void 0&&(a[0].x<e.getRowHeaderCellWidth()||a[0].y<e.getColumnHeaderCellHeight())&&(a.length=0),a.length===0&&e.gotoCell(o,t,n,l)},e.setActiveCell=function(o,t){o!==void 0&&(o<0&&(o=0),t<0&&(t=0),e.activeCell={rowIndex:t,columnIndex:o})},e.collapseTree=function(o){e.dispatchEvent("collapsetree",{childGrid:e.childGrids[o],data:e.viewData[o],rowIndex:o}),e.openChildren[o].blur(),e.openChildren[o].dispose(),delete e.openChildren[o],delete e.sizes.trees[o],delete e.childGrids[o],e.dispatchEvent("resizerow",{cellHeight:e.style.cellHeight}),e.resize(!0),e.draw(!0)},e.expandTree=function(o){var t,n=e.args.treeGridAttributes||{},l=e.getColumnHeaderCellHeight(),a=e.sizes.columns.cornerCell||e.style.rowHeaderCellWidth,c=e.sizes.trees[o]||e.style.treeGridHeight;e.childGrids[o]||(n.debug=e.attributes.debug,n.name=e.attributes.saveAppearance?e.attributes.name+"tree"+o:void 0,n.style=n.style||e.style,n.parentNode={parentGrid:e.intf,nodeType:"canvas-datagrid-tree",offsetHeight:c,offsetWidth:e.width-a,header:{width:e.width-a},offsetLeft:a,offsetTop:l,offsetParent:e.intf.parentNode,parentNode:e.intf.parentNode,style:"tree",data:e.viewData[o]},t=e.createGrid(n),e.childGrids[o]=t),(t=e.childGrids[o]).visible=!0,e.dispatchEvent("expandtree",{treeGrid:t,data:e.viewData[o],rowIndex:o}),e.openChildren[o]=t,e.sizes.trees[o]=c,e.dispatchEvent("resizerow",{height:e.style.cellHeight}),e.resize(!0)},e.toggleTree=function(o){if(e.openChildren[o])return e.collapseTree(o);e.expandTree(o)},e.getHeaderByName=function(o){var t,n=e.getSchema();for(t=0;t<n.length;t+=1)if(n[t].name===o)return n[t]},e.hideColumns=function(o,t){var n=e.getSchema(),l=e.orders.columns,a=[];typeof t!="number"&&(t=o);for(var c=o;c<=t;c++){var u=l[c];u>=0&&!n[u].hidden&&(a.push(u),n[u].hidden=!0,e.dispatchEvent("columnhide",{columnIndex:u}))}a.length>0&&(e.setStorageData(),setTimeout(function(){e.resize(!0)},10)),e.dispatchEvent("hidecolumns",{hiddenColumns:a})},e.unhideColumns=function(o,t){for(var n=e.orders.columns,l=e.getSchema(),a=o;a<=t;a++){var c=n[a],u=l[c];u&&u.hidden&&(u.hidden=!1,e.dispatchEvent("columnunhide",{columnIndex:c}))}e.refresh()},e.hideRows=function(o,t){mergeHiddenRowRanges(e.hiddenRowRanges,[o,t])&&e.refresh()},e.unhideRows=function(o,t){var n=this;e.hiddenRowRanges=e.hiddenRowRanges.filter(function(l){return _newArrowCheck(this,n),l[0]!==o||l[1]!==t}.bind(this)),e.refresh()},e.fitColumnToValues=function(o,t){if(e.canvas){var n=o==="cornerCell"?-1:e.getHeaderByName(o).index,l=Math.max(e.findColumnMaxTextLength(o),e.style.minColumnWidth);e.sizes.columns[n]=l,e.dispatchEvent("resizecolumn",{x:l,y:e.resizingStartingHeight,draggingItem:e.currentCell}),t||(e.resize(),e.draw(!0))}},e.isCellVisible=function(o,t){if(t!==void 0)return e.visibleCells.filter(function(a){return a.columnIndex===o&&a.rowIndex===t}).length>0;var n,l=e.visibleCells.length;for(n=0;n<l;n+=1)if(o.x===e.visibleCells[n].x&&o.y===e.visibleCells[n].y)return!0;return!1},e.order=function(o,t,n,l){if(e.attributes.allowSorting){var a,c=e.getSchema().filter(function(u){return u.name===o});if(!e.dispatchEvent("beforesortcolumn",{name:o,direction:t})&&(e.orderBy=o,e.orderDirection=t,e.viewData&&e.viewData.length!==0)){if(c.length===0)throw new Error("Cannot sort.  No such column name");(a=n||c[0].sorter||e.sorters[c[0].type])||c[0].type===void 0||console.warn('Cannot sort type "%s" falling back to string sort.',c[0].type),e.orderings.add(o,t,typeof a=="function"?a:e.sorters.string),e.refresh(),e.dispatchEvent("sortcolumn",{name:o,direction:t}),l||e.setStorageData()}}else e.refresh()},e.groupColumns=function(o,t){for(var n,l,a=e.getSchema(),c=0;c<a.length;c++){var u=a[c];if(n&&l)break;u.name!==o?u.name!==t||(l=u):n=u}if(!n)throw new Error("No such column name for first column");if(!l)throw new Error("No such column name for last column");if(!(l.columnIndex>n.columnIndex))throw new Error("Can't group these columns");var s=n.columnIndex,v=l.columnIndex,d={group:{type:"columns",from:s,to:v}};try{i("columns",s,v)}catch(g){d.error=g}e.dispatchEvent("aftercreategroup",d)},e.groupRows=function(o,t){if(!Number.isInteger(o)||o<0)throw new Error("No such row for the beginning of the group");var n=e.viewData.length;if(!Number.isInteger(o)||t<=o||t>=n)throw new Error("No such row for the end of the group");var l={group:{type:"rows",from:o,to:t}};try{i("rows",o,t)}catch(a){l.error=a}e.dispatchEvent("aftercreategroup",l)},e.removeGroupColumns=function(o,t){for(var n,l,a=e.getSchema(),c=0;c<a.length;c++){var u=a[c];if(n&&l)break;u.name!==o?u.name!==t||(l=u):n=u}if(!n)throw new Error("No such column name for first column");if(!l)throw new Error("No such column name for last column");var s=n.columnIndex,v=l.columnIndex;r(e.groupedColumns,s,v)},e.removeGroupRows=function(o,t){r(e.groupedRows,o,t)},e.toggleGroupColumns=function(o,t){for(var n,l,a=e.getSchema(),c=0;c<a.length;c++){var u=a[c];if(n&&l)break;u.name!==o?u.name!==t||(l=u):n=u}if(n&&l){var s=n.columnIndex,v=l.columnIndex;e.toggleGroup({type:"c",from:s,to:v})&&(e.disposeContextMenu(),e.setStorageData(),e.refresh())}},e.toggleGroupRows=function(o,t){e.toggleGroup({type:"r",from:o,to:t})&&(e.disposeContextMenu(),e.setStorageData(),e.refresh())},e.isInGrid=function(o){return!(o.x<0||o.x>e.width||o.y<0||o.y>e.height)},e.moveTo=function(o,t,n){o=e.getObsoleteSelectionMatrix(o);var l,a=e.getSelectedData(),c=e.getVisibleSchema(),u=o.length,s=-1/0,v=1/0,d=n-1;o.forEach(function(g,m){m!==u&&g.length!==0&&(v=Math.min(e.getVisibleColumnIndexOf(t),v),s=Math.max(s,g.length),g.forEach(function(f){f=e.getVisibleColumnIndexOf(f),c[f]&&(e.data||(e.data={}),e.data[m]||(e.data[m]={}),e.data[m][c[f].name]=null)}))}),o.forEach(function(g,m){var f;d+=1,l=e.getVisibleColumnIndexOf(t),g.forEach(function(p,b){p=e.getVisibleColumnIndexOf(p),b>0&&(l+=p-f),f=p,p===-1||!c[l]||!c[p]||e.data.length-1<d||d<0||(e.data[d]||(e.data[d]={}),e.data[d][c[l].name]=a[m][c[p].name])})})},e.getGroupsColumnBelongsTo=function(o){if(!e.attributes.allowGroupingColumns)return[];for(var t=[],n=0;n<e.groupedColumns.length;n++)for(var l=e.groupedColumns[n],a=0;a<l.length;a++){var c=l[a];if(o>=c.from&&o<=c.to){t.push(c);break}}return t},e.getGroupsRowBelongsTo=function(o){if(!e.attributes.allowGroupingRows)return[];for(var t=[],n=0;n<e.groupedRows.length;n++)for(var l=e.groupedRows[n],a=0;a<l.length;a++){var c=l[a];if(o>=c.from&&o<=c.to){t.push(c);break}}return t},e.isColumnVisible=function(o){return e.visibleCells.filter(function(t){return t.columnIndex===o}).length>0},e.isRowVisible=function(o){return e.visibleCells.filter(function(t){return t.rowIndex===o}).length>0},e.getVisibleCellByIndex=function(o,t){return e.visibleCells.filter(function(n){return n.columnIndex===o&&n.rowIndex===t})[0]},e.getUnhideIndicator=function(o,t){var n=e.visibleUnhideIndicators;if(!(n.length<=0))for(var l=0;l<n.length;l++){var a=n[l];if(o>=a.x&&t>=a.y&&o<=a.x2&&t<=a.y2)return a}},e.getColumnGroupAt=function(o,t){if(!(e.groupedColumns.length<=0)&&!(t>=e.getColumnGroupAreaHeight()))for(var n=0;n<e.visibleGroups.length;n++){var l=e.visibleGroups[n];if(l.type==="c"&&o>=l.x&&t>=l.y&&o<=l.x2&&t<=l.y2)return l}},e.getRowGroupAt=function(o,t){if(!(e.groupedRows.length<=0)&&!(o>=e.getRowGroupAreaWidth()))for(var n=0;n<e.visibleGroups.length;n++){var l=e.visibleGroups[n];if(l.type==="r"&&o>=l.x&&t>=l.y&&o<=l.x2&&t<=l.y2)return l}},e.getCellAt=function(o,t,n){function l(b){return b.x+b.width-.4*e.attributes.borderResizeZone<o&&b.x+b.width+.6*e.attributes.borderResizeZone>o?"r":b.x-.4*e.attributes.borderResizeZone<o&&b.x+.6*e.attributes.borderResizeZone>o?"l":b.y+b.height-.4*e.attributes.borderResizeZone<t&&b.y+b.height+.6*e.attributes.borderResizeZone>t?"b":b.y-.4*e.attributes.borderResizeZone<t&&b.y+.6*e.attributes.borderResizeZone>t?"t":void 0}if(e.visibleCells){o-=e.getRowGroupAreaWidth(),t-=e.getColumnGroupAreaHeight(),e.dragStartObject!==void 0&&(o<=0&&(o=1),o>=e.width&&(o=e.width-1),t<=0&&(t=1),t>=e.height&&(t=e.height-1));var a,c,u,s,v,d=n?e.attributes.touchScrollZone:0,g=e.attributes.borderDragBehavior==="move",m=e.visibleCells.length,f=g?e.cursorGrab:"ew-resize",p=g?e.cursorGrab:"ns-resize";if(e.visibleCells&&e.visibleCells.length){if(e.hasFocus=!0,!(t<e.height&&t>0&&o<e.width&&o>0))return e.hasFocus=!1,{dragContext:"inherit",context:"inherit"};for(c=0;c<m;c+=1)if(v={x:(s=e.visibleCells[c]).x,y:s.y,height:s.height,width:s.width},n&&/(vertical|horizontal)-scroll-/.test(s.style)&&(v.x-=d,v.y-=d,v.height+=d,v.width+=d),v.x-e.style.cellBorderWidth<o&&v.x+v.width+e.style.cellBorderWidth>o&&v.y-e.style.cellBorderWidth<t&&v.y+v.height+e.style.cellBorderWidth>t){if(/frozen-row-marker/.test(s.style)){if(e.dragMode==="frozen-column-marker")continue;return s.dragContext=s.style,s.context="grab",s}if(/frozen-column-marker/.test(s.style)){if(e.dragMode==="frozen-row-marker")continue;return s.dragContext=s.style,s.context="grab",s}if(/selection-handle-/.test(s.style))return s.dragContext=s.style,s.context="crosshair",s;if(/vertical-scroll-(bar|box)/.test(s.style))return s.dragContext="vertical-scroll-box",s.context="vertical-scroll-box",s.isScrollBar=!0,s.isVerticalScrollBar=!0,t>e.scrollBox.box.v.y+e.scrollBox.scrollBoxHeight?(s.dragContext="vertical-scroll-bottom",s.context="vertical-scroll-bottom"):t<e.scrollBox.box.v.y&&(s.dragContext="vertical-scroll-top",s.context="vertical-scroll-top"),e.cursor="default",s;if(/horizontal-scroll-(bar|box)/.test(s.style))return s.dragContext="horizontal-scroll-box",s.context="horizontal-scroll-box",s.isScrollBar=!0,s.isHorizontalScrollBar=!0,o>e.scrollBox.box.h.x+e.scrollBox.scrollBoxWidth?(s.dragContext="horizontal-scroll-right",s.context="horizontal-scroll-right"):o<e.scrollBox.box.h.x&&(s.dragContext="horizontal-scroll-left",s.context="horizontal-scroll-left"),e.cursor="default",s;if(a=l(v),u=g&&s.selectionBorder&&s.selectionBorder.indexOf(a)!==-1,["l","r"].indexOf(a)!==-1&&(e.attributes.allowColumnResize||u)&&(e.attributes.allowColumnResizeFromCell&&s.isNormal||!s.isNormal||u)&&(e.attributes.allowRowHeaderResize&&(s.isRowHeader||s.isCorner)||!s.isRowHeader||!s.isCorner)){if((s.isColumnHeader||s.isCorner||e.attributes.allowColumnResizeFromCell&&s.isNormal)&&a==="r")return s.context="ew-resize",s.dragContext="ew-resize",s;if(!s.isColumnHeader&&!s.isCorner&&u)return s.context=f,s.dragContext=a+"-move",s}if(["t","b"].indexOf(a)!==-1&&s.rowIndex>-1&&(e.attributes.allowRowResize||u)&&(e.attributes.allowRowResizeFromCell&&s.isNormal||!s.isNormal||u)&&!s.isColumnHeader){if((s.isRowHeader||s.isCorner||e.attributes.allowRowResizeFromCell&&s.isNormal)&&a==="b")return s.context="ns-resize",s.dragContext="ns-resize",s;if(!s.isRowHeader&&!s.isCorner&&u)return s.context=p,s.dragContext=a+"-move",s}return s.style==="columnHeaderCell"?(!e.isColumnSelected(s.columnIndex)&&s.x+s.width-e.attributes.columnGrabZoneSize-e.style.cellBorderWidth>o||!e.attributes.allowRowReordering?(s.dragContext="cell",s.context="cell"):(s.context=e.cursorGrab,s.dragContext="column-reorder"),s):s.style==="rowHeaderCell"?(!e.isRowSelected(s.rowIndex)&&e.attributes.rowGrabZoneSize+(s.y-e.style.cellBorderWidth)<t||!e.attributes.allowRowReordering?(s.dragContext="cell",s.context="cell"):(s.context=e.cursorGrab,s.dragContext="row-reorder"),s):s.isGrid?(e.hasFocus=!1,s.dragContext="cell-grid",s.context="cell-grid",s):s.style==="tree-grid"?(e.hasFocus=!1,s.dragContext="tree",s.context="tree",s):(s.dragContext="cell",s.context="cell",s)}return e.hasFocus=!0,e.cursor="default",{dragContext:"background",context:"background",style:"background",isBackground:!0}}}},e.getSchemaFromData=function(o){return o=o||e.originalData,Object.keys(o[0]||{" ":""}).map(function(t,n){var l=e.getBestGuessDataType(t,o),a={name:t,title:isNaN(parseInt(t,10))?t:e.integerToAlpha(t).toUpperCase(),index:n,columnIndex:n,type:l,filter:e.filter(l)};return e.storedSettings&&e.storedSettings.visibility&&e.storedSettings.visibility[a.name]!==void 0&&(a.hidden=!e.storedSettings.visibility[a.name]),a})},e.clearChangeLog=function(){e.changes=[]},e.findColumnMaxTextLength=function(o){var t=-1/0;if(o==="cornerCell")return e.ctx.font=e.style.rowHeaderCellFont,e.ctx.measureText((e.viewData.length+(e.attributes.showNewRow?1:0)).toString()).width+e.style.autosizePadding+e.style.autosizeHeaderCellPadding+e.style.rowHeaderCellPaddingRight+e.style.rowHeaderCellPaddingLeft+(e.attributes.tree?e.style.treeArrowWidth+e.style.treeArrowMarginLeft+e.style.treeArrowMarginRight:0);var n=null;return e.getSchema().forEach(function(l){if(l.name===o){e.ctx.font=e.style.columnHeaderCellFont;var a=e.ctx.measureText(l.title||l.name).width+e.style.columnHeaderCellPaddingRight+e.style.columnHeaderCellPaddingLeft+e.style.cellAutoResizePadding;t=a>t?a:t,n=e.formatters[l.type]}}),e.viewData.forEach(function(l){var a=l[o];n&&(a=n({cell:{value:a}})),e.ctx.font=e.style.cellFont;var c=e.ctx.measureText(a).width+e.style.cellPaddingRight+e.style.cellPaddingLeft+e.style.cellAutoResizePadding;t=c>t?c:t}),t},e.getHeaderWidth=function(){return e.getVisibleSchema().reduce(function(o,t){return o+parseInt(t.width||e.style.cellWidth,10)},0)},e.getRowHeight=function(o){return(e.sizes.rows[o]||e.style.cellHeight)*e.scale},e.getColumnWidth=function(o){return(e.sizes.columns[o]||e.getSchema()[o].width||e.style.cellWidth)*e.scale},e.formatters.string=function(o){return o.cell.value!==void 0?o.cell.value:""},e.formatters.rowHeaderCell=e.formatters.string,e.formatters.headerCell=e.formatters.string,e.formatters.number=e.formatters.string,e.formatters.int=e.formatters.string,e.formatters.html=e.formatters.string,e.sorters.string=function(o,t){var n=t==="asc";return function(l,a){var c=l[o]||"",u=a[o]||"";return n?c.localeCompare?c.localeCompare(u):1:u.localeCompare?u.localeCompare(c):1}},e.sorters.number=function(o,t){var n=t==="asc";return function(l,a){return n?l[o]-a[o]:a[o]-l[o]}},e.sorters.date=function(o,t){var n=t==="asc";return function(l,a){return n?new Date(l[o]).getTime()-new Date(a[o]).getTime():new Date(a[o]).getTime()-new Date(l[o]).getTime()}}}var webComponent=component(),modules=[defaults,draw,events,touch,intf,selections,contextMenu,button,dom,publicMethods];function Grid(args){args=args||{};var self={};return self.isComponent=args.component===void 0,self.isChildGrid=args.parentNode&&/canvas-datagrid-(cell|tree)/.test(args.parentNode.nodeType),self.isChildGrid?self.intf={}:self.intf=self.isComponent?eval("Reflect.construct(HTMLElement, [], new.target)"):document.createElement("canvas"),self.args=args,self.intf.args=args,self.applyComponentStyle=webComponent.applyComponentStyle,self.hyphenateProperty=webComponent.hyphenateProperty,self.dehyphenateProperty=webComponent.dehyphenateProperty,self.createGrid=function(e){return e.component=!1,new Grid(e)},modules.forEach(function(e){e(self)}),self.isChildGrid?(self.shadowRoot=args.parentNode.shadowRoot,self.parentNode=args.parentNode):(self.shadowRoot=self.intf.attachShadow({mode:"open"}),self.parentNode=self.shadowRoot),self.init(),self.intf}function canvasDatagrid(e){e=e||{};var i,r=["style","formatters","sorters","filters","treeGridAttributes","cellGridAttributes","fillCellCallback","data","schema"];return window.customElements?(i=document.createElement("canvas-datagrid"),Object.keys(e).forEach(function(o){o!=="data"&&o!=="parentNode"&&(r.indexOf(o)===-1?i.attributes[o]=e[o]:r.forEach(function(t){e[t]!==void 0&&t===o&&(["formatters","sorters","filters"].indexOf(o)!==-1?_typeof(e[t])==="object"&&e[t]!==null&&Object.keys(e[t]).forEach(function(n){i[t][n]=e[t][n]}):i[t]=e[t])}))}),e.data&&(i.data=e.data),e.parentNode&&e.parentNode.appendChild(i),i):(e.component=!1,i=new Grid(e),e.parentNode&&e.parentNode.appendChild&&e.parentNode.appendChild(i),i)}window.HTMLElement&&(Grid.prototype=Object.create(window.HTMLElement.prototype)),window.customElements&&(Grid.observedAttributes=webComponent.getObservableAttributes(),Grid.prototype.disconnectedCallback=webComponent.disconnectedCallback,Grid.prototype.attributeChangedCallback=webComponent.attributeChangedCallback,Grid.prototype.connectedCallback=webComponent.connectedCallback,Grid.prototype.adoptedCallback=webComponent.adoptedCallback,window.customElements.define("canvas-datagrid",Grid));const _sfc_main$1=defineComponent({__name:"CecalcPlanilha.client",props:{dados:{default:()=>[]}},setup(e){const i=e,r=ref();let o;return onMounted(()=>{nextTick(()=>{o=canvasDatagrid({parentNode:r.value}),o.data=i.dados})}),(t,n)=>(openBlock(),createElementBlock("div",{ref_key:"conteiner",ref:r},null,512))}}),__nuxt_component_0_client_wrapped=createClientOnly(__nuxt_component_0_client),__nuxt_component_6_client_wrapped=createClientOnly(_sfc_main$1),_withScopeId=e=>(pushScopeId("data-v-d998dc9e"),e=e(),popScopeId(),e),_hoisted_1=_withScopeId(()=>createBaseVNode("div",{class:"text-h6"},"Carta de Concessão",-1)),_hoisted_2=_withScopeId(()=>createBaseVNode("div",{class:"q-mb-md"},"Carregue aqui os dados da carta de concessão.",-1)),_hoisted_3={class:"row q-pa-xs"},_hoisted_4={class:"q-pa-xs"},_hoisted_5=_withScopeId(()=>createBaseVNode("div",{class:"text-h6"},"CNIS",-1)),_hoisted_6=_withScopeId(()=>createBaseVNode("div",{class:"q-mb-md"},"Carregue aqui os dados do CNIS.",-1)),_hoisted_7={class:"row q-pa-xs"},_hoisted_8=_withScopeId(()=>createBaseVNode("div",{class:"text-h6"},"Editar Informações",-1)),_hoisted_9=_withScopeId(()=>createBaseVNode("div",{class:"q-mb-md"},"Ajuste aqui os dados de cálculo, se necessário.",-1)),_hoisted_10=_withScopeId(()=>createBaseVNode("div",{class:"text-h6"},"Resultado",-1)),_hoisted_11=_withScopeId(()=>createBaseVNode("div",{class:"q-mb-md"},"Demonstrativo de cálculo da Revisão da Vida Toda (RVT).",-1)),_sfc_main=defineComponent({__name:"index",setup(e){const{getScrollTarget:i,setVerticalScrollPosition:r}=scroll,o=useTabs(),t=ref(null),n=ref(!1),l=c=>{n.value=c>300},a=()=>{if(!t.value)return;const c=i(t.value),u=t.value.offsetTop;r(c,u,500),n.value=!1};return(c,u)=>{const s=__nuxt_component_0_client_wrapped,v=_sfc_main$9,d=_sfc_main$6,g=__nuxt_component_3$1,m=_sfc_main$5,f=_sfc_main$2,p=__nuxt_component_6_client_wrapped,b=__nuxt_component_7$1,k=__nuxt_component_8$1,C=__nuxt_component_9,I=__nuxt_component_10,P=__q_directive_0;return openBlock(),createBlock(I,null,{default:withCtx(()=>[withDirectives(createBaseVNode("div",{ref_key:"anchor",ref:t},null,512),[[P,l]]),createVNode(b,{modelValue:unref(o).atual,"onUpdate:modelValue":u[0]||(u[0]=E=>unref(o).atual=E)},{default:withCtx(()=>[createVNode(g,{name:"carta-concessao"},{default:withCtx(()=>[_hoisted_1,_hoisted_2,createBaseVNode("div",_hoisted_3,[createVNode(s,{class:"col q-pa-xs leitor-documento",rotulo:"Carregue aqui a Carta de Concessão","tipo-documento":unref(j).CARTA_CONCESSAO},null,8,["tipo-documento"]),createVNode(v,{class:"col q-ma-xs"})]),createBaseVNode("div",_hoisted_4,[createVNode(d,{class:"col q-ma-xs"})])]),_:1}),createVNode(g,{name:"cnis"},{default:withCtx(()=>[_hoisted_5,_hoisted_6,createBaseVNode("div",_hoisted_7,[createVNode(s,{class:"col q-pa-xs leitor-documento",rotulo:"Carregue aqui o CNIS","tipo-documento":unref(j).CNIS},null,8,["tipo-documento"]),createVNode(m,{class:"col q-ma-xs"})]),createVNode(f)]),_:1}),createVNode(g,{name:"ajustes"},{default:withCtx(()=>[_hoisted_8,_hoisted_9,createVNode(p)]),_:1}),createVNode(g,{name:"resultado"},{default:withCtx(()=>[_hoisted_10,_hoisted_11]),_:1})]),_:1},8,["modelValue"]),createVNode(C,{position:"bottom-right",offset:[18,18]},{default:withCtx(()=>[unref(n)?(openBlock(),createBlock(k,{key:0,fab:"",padding:"sm",icon:unref(mdiChevronUp),color:"grey-3","text-color":"grey-10",onClick:a},null,8,["icon"])):createCommentVNode("",!0)]),_:1})]),_:1})}}}),index_vue_vue_type_style_index_0_scoped_d998dc9e_lang="",index=_export_sfc(_sfc_main,[["__scopeId","data-v-d998dc9e"]]);export{index as default};
